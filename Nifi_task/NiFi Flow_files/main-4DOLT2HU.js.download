import{a as Rc}from"./chunk-FSCV36OC.js";import{a as Sr,b as Fc,c as Oc,d as rn}from"./chunk-HOWSOAFR.js";import{b as Pc,d as Nc}from"./chunk-OTI2EEHA.js";import{a as wc,b as Dc,c as kc,d as Mc}from"./chunk-4T4OQRV2.js";import{k as Ic}from"./chunk-UNG4MNQN.js";import{c as ve,d as Se,f as ko,g as Mo,h as Io,i as Fi,k as Sc,m as Po,n as _c,o as Cc,p as No,q as Ue,r as Ro,s as bc,u as Fo,v as Oo}from"./chunk-ZSGRQJXI.js";import{a as Ac}from"./chunk-UHYJBZMQ.js";import{a as Ec,b as Tc}from"./chunk-GRUDJLDT.js";import{a as xc}from"./chunk-GPEYWUAH.js";import{a as He,b as Al,c as xl}from"./chunk-IFZDC4PQ.js";import{a as uo}from"./chunk-2AJML4II.js";import"./chunk-6RYSWFJQ.js";import{a as Xl,c as Zl}from"./chunk-N6WXY46F.js";import{A as fc,B as hc,C as gc,D as Pi,E as Ao,F as xo,G as en,H as Ni,I as yr,J as nn,K as wo,L as yc,M as Ri,N as Do,O as vr,R as vc,d as cc,f as pc,h as lt,i as mc,j as dc,k as cr,l as ur,m as pr,n as Xi,o as Eo,p as mr,q as dr,r as Zi,s as fr,t as hr,u as To,v as Ji,w as ye,x as gr,y as ri,z as tn}from"./chunk-ZZ2CPSTB.js";import{a as rr,b as Yi,c as Co,d as or,e as bo,f as sr,g as ar}from"./chunk-WSUTWA46.js";import{a as nc}from"./chunk-W4SES2UY.js";import{a as lc}from"./chunk-HZTI34EA.js";import{a as uc}from"./chunk-HRNMAZ3J.js";import{a as Jl,b as tc,f as ec}from"./chunk-73NE6BRW.js";import{a as ge}from"./chunk-GDM375JW.js";import{b as Ii}from"./chunk-CMQD7O2T.js";import{a as rc,b as oc,c as lr}from"./chunk-TF3EXYFG.js";import{a as sc,b as ac}from"./chunk-2C3ZJLS4.js";import"./chunk-PICAMIPG.js";import{a as ic}from"./chunk-VBFESPK5.js";import{a as _t}from"./chunk-DVEEGAJ4.js";import{a as ze}from"./chunk-5ZJVDO23.js";import{a as je}from"./chunk-EKBFYLT2.js";import{a as Bn}from"./chunk-3TR5UDHQ.js";import{c as Il}from"./chunk-Q4AC7FQR.js";import{a as Ml,b as Kt}from"./chunk-ABVNDMIM.js";import{a as $n,b as jn,c as Pl,d as Vn,e as Nl,f as zn,g as Rl,h as Un,i as wi,j as Fl}from"./chunk-VXMWRGHE.js";import{a as ir,b as nr,c as Ql,d as Yl}from"./chunk-ZSMIHRSH.js";import{a as ki,b as qi,c as Wn,d as Qn,e as _o,f as Mi,g as Ki,h as Ll,i as Yn,j as Gl,k as Wl}from"./chunk-JSX7GJN3.js";import{a as ii,b as qn,c as Ol,d as zi,e as Di,f as So,g as Ui,h as Hl,i as Kn,j as Gn,k as $l,l as jl}from"./chunk-KNQ4CFNY.js";import{a as Xn,b as Zn,c as Vl}from"./chunk-HEFNF3AE.js";import{a as zl,b as Jn,c as Gi,d as tr,e as ni,f as Wi,g as Ul,h as ql,i as er,j as Kl,m as Qi}from"./chunk-KGUOQC5Q.js";import{a as Bl}from"./chunk-UEF4WCDH.js";import{a as Dl,b as kl}from"./chunk-RIBUKEQ4.js";import{a as R,b as pt,c as P,d as wl}from"./chunk-WWC4ABVI.js";import{a as Fa,b as hi,c as Oa}from"./chunk-5MCXDQQH.js";import{a as dt}from"./chunk-E5KIQSXS.js";import{$ as Ga,$b as On,A as Va,Aa as gi,Ab as Ti,Ba as vo,Ca as Pn,Cb as rl,D as za,Da as Nn,Db as ol,Ea as Lt,Eb as sl,Fa as te,Fb as al,G as Ua,Ga as ee,Gb as ll,H as qa,Ha as ie,Hb as cl,Ia as ne,Ib as ul,Ja as fe,Jb as pl,Ka as Be,Kb as ml,Lb as dl,Mb as Rn,Na as Xa,Nb as fl,R as Ka,Sa as yi,Sb as hl,Ta as vi,Tb as gl,Va as Za,Vb as Fn,X as fo,Xa as Si,_a as _i,_b as yl,ab as Ci,ac as Ai,cc as vl,d as Ha,db as bi,dc as Hn,fb as $e,hc as xi,ka as Wa,kc as Sl,lc as _l,mc as Cl,nc as bl,o as po,ob as Ut,oc as El,p as La,pa as Z,pb as Ei,q as Ba,qa as de,qb as he,ra as Qa,rb as Ja,s as mo,sa as ho,sb as tl,t as $a,ta as Ya,tb as qt,tc as Tl,ua as ei,ub as el,uc as Ve,v as ja,va as go,vc as Ln,xa as yo,xc as Vi,yb as il,yc as ft,zb as nl}from"./chunk-A42UKWUF.js";import{a as lo,b as wn,c as ka,d as Dn,e as Ma,f as kn,g as Ia,h as co}from"./chunk-7DKLK7RK.js";import{a as Pa,b as Mn}from"./chunk-JH4OJGI3.js";import{a as Jt,b as ht,c as Ee,d as Na,e as Ra,f as In}from"./chunk-KBBDECTP.js";import{$ as it,$c as Sa,A as to,Aa as $i,Ab as zt,B as yn,Ba as Sn,Bd as Da,C as ut,Ca as Xe,Cb as na,Cc as ca,Cd as B,Da as mi,Db as Et,Dd as mt,Ea as Ys,Eb as ra,Ec as me,F as z,Fa as Xs,Fb as q,G as js,H as Ye,Hc as fi,I as Vt,Ja as eo,Jc as ua,Kb as io,L as Vs,Lb as no,Mb as ro,Mc as En,Nc as Ht,Oa as Zs,Oc as pa,P as zs,Pa as A,Pc as ma,Qa as tt,Qc as da,Rb as C,Rc as fa,S as Us,Sa as Js,Sb as St,Sc as ha,T as qs,Tb as rt,Tc as Tn,Ua as ta,Ub as di,V as Ks,Vb as Je,Wb as oa,Wc as ga,Xa as ea,Xb as sa,Xc as ya,Y as N,Yb as aa,Yc as va,Z as Pt,_b as Nt,ac as ji,ad as _a,b as Jr,ba as Gs,bb as Xt,bd as Ca,ca as nt,cd as Oe,d as ce,ea as V,eb as Q,ec as Ft,f as Os,fa as ue,fc as Ot,fd as oo,ga as Pe,gd as Zt,h as Me,ha as E,hd as ba,i as Hs,ia as vt,ib as ia,id as Le,jb as ot,jd as ti,k as Ls,kd as so,l as Bs,lb as Ze,lc as la,ld as An,m as K,md as Ea,n as I,na as xt,oa as pe,p as $s,pa as vn,pb as X,pd as Ta,q as M,qd as Aa,r as Qe,ra as Ws,rb as Ne,rd as ao,sb as Re,sd as xa,tb as Fe,td as wa,ua as kt,ub as v,ud as et,va as Mt,vb as y,vc as bn,wb as st,xb as _n,xd as be,ya as Qs,yb as Cn,yd as xn,z as Ie}from"./chunk-GS6RMZQQ.js";import{a as D,b as O,c as Fs,d as De,e as ke}from"./chunk-EQDQRRRY.js";var Xp=De((Qp,Yp)=>{"use strict";(function(i){typeof Qp=="object"&&typeof Yp=="object"?i(je()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],i):i(CodeMirror)})(function(i){var e=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),t=i.Pos,n={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function r(d){return d&&d.bracketRegex||/[(){}[\]]/}function o(d,h,_){var T=d.getLineHandle(h.line),f=h.ch-1,u=_&&_.afterCursor;u==null&&(u=/(^| )cm-fat-cursor($| )/.test(d.getWrapperElement().className));var p=r(_),m=!u&&f>=0&&p.test(T.text.charAt(f))&&n[T.text.charAt(f)]||p.test(T.text.charAt(f+1))&&n[T.text.charAt(++f)];if(!m)return null;var g=m.charAt(1)==">"?1:-1;if(_&&_.strict&&g>0!=(f==h.ch))return null;var S=d.getTokenTypeAt(t(h.line,f+1)),b=a(d,t(h.line,f+(g>0?1:0)),g,S,_);return b==null?null:{from:t(h.line,f),to:b&&b.pos,match:b&&b.ch==m.charAt(0),forward:g>0}}function a(d,h,_,T,f){for(var u=f&&f.maxScanLineLength||1e4,p=f&&f.maxScanLines||1e3,m=[],g=r(f),S=_>0?Math.min(h.line+p,d.lastLine()+1):Math.max(d.firstLine()-1,h.line-p),b=h.line;b!=S;b+=_){var x=d.getLine(b);if(x){var k=_>0?0:x.length-1,F=_>0?x.length:-1;if(!(x.length>u))for(b==h.line&&(k=h.ch-(_<0?1:0));k!=F;k+=_){var $=x.charAt(k);if(g.test($)&&(T===void 0||(d.getTokenTypeAt(t(b,k+1))||"")==(T||""))){var U=n[$];if(U&&U.charAt(1)==">"==_>0)m.push($);else if(m.length)m.pop();else return{pos:t(b,k),ch:$}}}}}return b-_==(_>0?d.lastLine():d.firstLine())?!1:null}function s(d,h,_){for(var T=d.state.matchBrackets.maxHighlightLineLength||1e3,f=_&&_.highlightNonMatching,u=[],p=d.listSelections(),m=0;m<p.length;m++){var g=p[m].empty()&&o(d,p[m].head,_);if(g&&(g.match||f!==!1)&&d.getLine(g.from.line).length<=T){var S=g.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";u.push(d.markText(g.from,t(g.from.line,g.from.ch+1),{className:S})),g.to&&d.getLine(g.to.line).length<=T&&u.push(d.markText(g.to,t(g.to.line,g.to.ch+1),{className:S}))}}if(u.length){e&&d.state.focused&&d.focus();var b=function(){d.operation(function(){for(var x=0;x<u.length;x++)u[x].clear()})};if(h)setTimeout(b,800);else return b}}function l(d){d.operation(function(){d.state.matchBrackets.currentlyHighlighted&&(d.state.matchBrackets.currentlyHighlighted(),d.state.matchBrackets.currentlyHighlighted=null),d.state.matchBrackets.currentlyHighlighted=s(d,!1,d.state.matchBrackets)})}function c(d){d.state.matchBrackets&&d.state.matchBrackets.currentlyHighlighted&&(d.state.matchBrackets.currentlyHighlighted(),d.state.matchBrackets.currentlyHighlighted=null)}i.defineOption("matchBrackets",!1,function(d,h,_){_&&_!=i.Init&&(d.off("cursorActivity",l),d.off("focus",l),d.off("blur",c),c(d)),h&&(d.state.matchBrackets=typeof h=="object"?h:{},d.on("cursorActivity",l),d.on("focus",l),d.on("blur",c))}),i.defineExtension("matchBrackets",function(){s(this,!0)}),i.defineExtension("findMatchingBracket",function(d,h,_){return(_||typeof h=="boolean")&&(_?(_.strict=h,h=_):h=h?{strict:!0}:null),o(this,d,h)}),i.defineExtension("scanForBracket",function(d,h,_,T){return a(this,d,h,_,T)})})});var tm=De((Zp,Jp)=>{"use strict";(function(i){typeof Zp=="object"&&typeof Jp=="object"?i(je()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],i):i(CodeMirror)})(function(i){"use strict";function e(t){return function(n,r){var o=r.line,a=n.getLine(o);function s(T){for(var f,u=r.ch,p=0;;){var m=u<=0?-1:a.lastIndexOf(T[0],u-1);if(m==-1){if(p==1)break;p=1,u=a.length;continue}if(p==1&&m<r.ch)break;if(f=n.getTokenTypeAt(i.Pos(o,m+1)),!/^(comment|string)/.test(f))return{ch:m+1,tokenType:f,pair:T};u=m-1}}function l(T){var f=1,u=n.lastLine(),p,m=T.ch,g;t:for(var S=o;S<=u;++S)for(var b=n.getLine(S),x=S==o?m:0;;){var k=b.indexOf(T.pair[0],x),F=b.indexOf(T.pair[1],x);if(k<0&&(k=b.length),F<0&&(F=b.length),x=Math.min(k,F),x==b.length)break;if(n.getTokenTypeAt(i.Pos(S,x+1))==T.tokenType){if(x==k)++f;else if(!--f){p=S,g=x;break t}}++x}return p==null||o==p?null:{from:i.Pos(o,m),to:i.Pos(p,g)}}for(var c=[],d=0;d<t.length;d++){var h=s(t[d]);h&&c.push(h)}c.sort(function(T,f){return T.ch-f.ch});for(var d=0;d<c.length;d++){var _=l(c[d]);if(_)return _}return null}}i.registerHelper("fold","brace",e([["{","}"],["[","]"]])),i.registerHelper("fold","brace-paren",e([["{","}"],["[","]"],["(",")"]])),i.registerHelper("fold","import",function(t,n){function r(d){if(d<t.firstLine()||d>t.lastLine())return null;var h=t.getTokenAt(i.Pos(d,1));if(/\S/.test(h.string)||(h=t.getTokenAt(i.Pos(d,h.end+1))),h.type!="keyword"||h.string!="import")return null;for(var _=d,T=Math.min(t.lastLine(),d+10);_<=T;++_){var f=t.getLine(_),u=f.indexOf(";");if(u!=-1)return{startCh:h.end,end:i.Pos(_,u)}}}var o=n.line,a=r(o),s;if(!a||r(o-1)||(s=r(o-2))&&s.end.line==o-1)return null;for(var l=a.end;;){var c=r(l.line+1);if(c==null)break;l=c.end}return{from:t.clipPos(i.Pos(o,a.startCh+1)),to:l}}),i.registerHelper("fold","include",function(t,n){function r(c){if(c<t.firstLine()||c>t.lastLine())return null;var d=t.getTokenAt(i.Pos(c,1));if(/\S/.test(d.string)||(d=t.getTokenAt(i.Pos(c,d.end+1))),d.type=="meta"&&d.string.slice(0,8)=="#include")return d.start+8}var o=n.line,a=r(o);if(a==null||r(o-1)!=null)return null;for(var s=o;;){var l=r(s+1);if(l==null)break;++s}return{from:i.Pos(o,a+1),to:t.clipPos(i.Pos(s))}})})});var nm=De((em,im)=>{"use strict";(function(i){typeof em=="object"&&typeof im=="object"?i(je()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],i):i(CodeMirror)})(function(i){"use strict";i.registerGlobalHelper("fold","comment",function(e){return e.blockCommentStart&&e.blockCommentEnd},function(e,t){var n=e.getModeAt(t),r=n.blockCommentStart,o=n.blockCommentEnd;if(!(!r||!o)){for(var a=t.line,s=e.getLine(a),l,c=t.ch,d=0;;){var h=c<=0?-1:s.lastIndexOf(r,c-1);if(h==-1){if(d==1)return;d=1,c=s.length;continue}if(d==1&&h<t.ch)return;if(/comment/.test(e.getTokenTypeAt(i.Pos(a,h+1)))&&(h==0||s.slice(h-o.length,h)==o||!/comment/.test(e.getTokenTypeAt(i.Pos(a,h))))){l=h+r.length;break}c=h-1}var _=1,T=e.lastLine(),f,u;t:for(var p=a;p<=T;++p)for(var m=e.getLine(p),g=p==a?l:0;;){var S=m.indexOf(r,g),b=m.indexOf(o,g);if(S<0&&(S=m.length),b<0&&(b=m.length),g=Math.min(S,b),g==m.length)break;if(g==S)++_;else if(!--_){f=p,u=g;break t}++g}if(!(f==null||a==f&&u==l))return{from:i.Pos(a,l),to:i.Pos(f,u)}}})})});var Rs=De((rm,om)=>{"use strict";(function(i){typeof rm=="object"&&typeof om=="object"?i(je()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],i):i(CodeMirror)})(function(i){"use strict";function e(o,a,s,l){if(s&&s.call){var c=s;s=null}else var c=r(o,s,"rangeFinder");typeof a=="number"&&(a=i.Pos(a,0));var d=r(o,s,"minFoldSize");function h(u){var p=c(o,a);if(!p||p.to.line-p.from.line<d)return null;if(l==="fold")return p;for(var m=o.findMarksAt(p.from),g=0;g<m.length;++g)if(m[g].__isFold){if(!u)return null;p.cleared=!0,m[g].clear()}return p}var _=h(!0);if(r(o,s,"scanUp"))for(;!_&&a.line>o.firstLine();)a=i.Pos(a.line-1,0),_=h(!1);if(!(!_||_.cleared||l==="unfold")){var T=t(o,s,_);i.on(T,"mousedown",function(u){f.clear(),i.e_preventDefault(u)});var f=o.markText(_.from,_.to,{replacedWith:T,clearOnEnter:r(o,s,"clearOnEnter"),__isFold:!0});f.on("clear",function(u,p){i.signal(o,"unfold",o,u,p)}),i.signal(o,"fold",o,_.from,_.to)}}function t(o,a,s){var l=r(o,a,"widget");if(typeof l=="function"&&(l=l(s.from,s.to)),typeof l=="string"){var c=document.createTextNode(l);l=document.createElement("span"),l.appendChild(c),l.className="CodeMirror-foldmarker"}else l&&(l=l.cloneNode(!0));return l}i.newFoldFunction=function(o,a){return function(s,l){e(s,l,{rangeFinder:o,widget:a})}},i.defineExtension("foldCode",function(o,a,s){e(this,o,a,s)}),i.defineExtension("isFolded",function(o){for(var a=this.findMarksAt(o),s=0;s<a.length;++s)if(a[s].__isFold)return!0}),i.commands.toggleFold=function(o){o.foldCode(o.getCursor())},i.commands.fold=function(o){o.foldCode(o.getCursor(),null,"fold")},i.commands.unfold=function(o){o.foldCode(o.getCursor(),{scanUp:!1},"unfold")},i.commands.foldAll=function(o){o.operation(function(){for(var a=o.firstLine(),s=o.lastLine();a<=s;a++)o.foldCode(i.Pos(a,0),{scanUp:!1},"fold")})},i.commands.unfoldAll=function(o){o.operation(function(){for(var a=o.firstLine(),s=o.lastLine();a<=s;a++)o.foldCode(i.Pos(a,0),{scanUp:!1},"unfold")})},i.registerHelper("fold","combine",function(){var o=Array.prototype.slice.call(arguments,0);return function(a,s){for(var l=0;l<o.length;++l){var c=o[l](a,s);if(c)return c}}}),i.registerHelper("fold","auto",function(o,a){for(var s=o.getHelpers(a,"fold"),l=0;l<s.length;l++){var c=s[l](o,a);if(c)return c}});var n={rangeFinder:i.fold.auto,widget:"\u2194",minFoldSize:0,scanUp:!1,clearOnEnter:!0};i.defineOption("foldOptions",null);function r(o,a,s){if(a&&a[s]!==void 0)return a[s];var l=o.options.foldOptions;return l&&l[s]!==void 0?l[s]:n[s]}i.defineExtension("foldOption",function(o,a){return r(this,o,a)})})});var lm=De((sm,am)=>{"use strict";(function(i){typeof sm=="object"&&typeof am=="object"?i(je(),Rs()):typeof define=="function"&&define.amd?define(["../../lib/codemirror","./foldcode"],i):i(CodeMirror)})(function(i){"use strict";i.defineOption("foldGutter",!1,function(f,u,p){p&&p!=i.Init&&(f.clearGutter(f.state.foldGutter.options.gutter),f.state.foldGutter=null,f.off("gutterClick",c),f.off("changes",h),f.off("viewportChange",_),f.off("fold",T),f.off("unfold",T),f.off("swapDoc",h),f.off("optionChange",d)),u&&(f.state.foldGutter=new t(n(u)),l(f),f.on("gutterClick",c),f.on("changes",h),f.on("viewportChange",_),f.on("fold",T),f.on("unfold",T),f.on("swapDoc",h),f.on("optionChange",d))});var e=i.Pos;function t(f){this.options=f,this.from=this.to=0}function n(f){return f===!0&&(f={}),f.gutter==null&&(f.gutter="CodeMirror-foldgutter"),f.indicatorOpen==null&&(f.indicatorOpen="CodeMirror-foldgutter-open"),f.indicatorFolded==null&&(f.indicatorFolded="CodeMirror-foldgutter-folded"),f}function r(f,u){for(var p=f.findMarks(e(u,0),e(u+1,0)),m=0;m<p.length;++m)if(p[m].__isFold){var g=p[m].find(-1);if(g&&g.line===u)return p[m]}}function o(f){if(typeof f=="string"){var u=document.createElement("div");return u.className=f+" CodeMirror-guttermarker-subtle",u}else return f.cloneNode(!0)}function a(f,u,p){var m=f.state.foldGutter.options,g=u-1,S=f.foldOption(m,"minFoldSize"),b=f.foldOption(m,"rangeFinder"),x=typeof m.indicatorFolded=="string"&&s(m.indicatorFolded),k=typeof m.indicatorOpen=="string"&&s(m.indicatorOpen);f.eachLine(u,p,function(F){++g;var $=null,U=F.gutterMarkers;if(U&&(U=U[m.gutter]),r(f,g)){if(x&&U&&x.test(U.className))return;$=o(m.indicatorFolded)}else{var ct=e(g,0),Ct=b&&b(f,ct);if(Ct&&Ct.to.line-Ct.from.line>=S){if(k&&U&&k.test(U.className))return;$=o(m.indicatorOpen)}}!$&&!U||f.setGutterMarker(F,m.gutter,$)})}function s(f){return new RegExp("(^|\\s)"+f+"(?:$|\\s)\\s*")}function l(f){var u=f.getViewport(),p=f.state.foldGutter;p&&(f.operation(function(){a(f,u.from,u.to)}),p.from=u.from,p.to=u.to)}function c(f,u,p){var m=f.state.foldGutter;if(m){var g=m.options;if(p==g.gutter){var S=r(f,u);S?S.clear():f.foldCode(e(u,0),g)}}}function d(f,u){u=="mode"&&h(f)}function h(f){var u=f.state.foldGutter;if(u){var p=u.options;u.from=u.to=0,clearTimeout(u.changeUpdate),u.changeUpdate=setTimeout(function(){l(f)},p.foldOnChangeTimeSpan||600)}}function _(f){var u=f.state.foldGutter;if(u){var p=u.options;clearTimeout(u.changeUpdate),u.changeUpdate=setTimeout(function(){var m=f.getViewport();u.from==u.to||m.from-u.to>20||u.from-m.to>20?l(f):f.operation(function(){m.from<u.from&&(a(f,m.from,u.from),u.from=m.from),m.to>u.to&&(a(f,u.to,m.to),u.to=m.to)})},p.updateViewportTimeSpan||400)}}function T(f,u){var p=f.state.foldGutter;if(p){var m=u.line;m>=p.from&&m<p.to&&a(f,m,m+1)}}})});var pm=De((cm,um)=>{"use strict";(function(i){typeof cm=="object"&&typeof um=="object"?i(je()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],i):i(CodeMirror)})(function(i){"use strict";i.registerHelper("fold","markdown",function(e,t){var n=100;function r(_){var T=e.getTokenTypeAt(i.Pos(_,0));return T&&/\bheader\b/.test(T)}function o(_,T,f){var u=T&&T.match(/^#+/);return u&&r(_)?u[0].length:(u=f&&f.match(/^[=\-]+\s*$/),u&&r(_+1)?f[0]=="="?1:2:n)}var a=e.getLine(t.line),s=e.getLine(t.line+1),l=o(t.line,a,s);if(l!==n){for(var c=e.lastLine(),d=t.line,h=e.getLine(d+2);d<c&&!(o(d+1,s,h)<=l);)++d,s=h,h=e.getLine(d+2);return{from:i.Pos(t.line,a.length),to:i.Pos(d,e.getLine(d).length)}}})})});var fm=De((mm,dm)=>{"use strict";(function(i){typeof mm=="object"&&typeof dm=="object"?i(je()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],i):i(CodeMirror)})(function(i){"use strict";var e=i.Pos;function t(p,m){return p.line-m.line||p.ch-m.ch}var n="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r=n+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",o=new RegExp("<(/?)(["+n+"]["+r+"]*)","g");function a(p,m,g,S){this.line=m,this.ch=g,this.cm=p,this.text=p.getLine(m),this.min=S?Math.max(S.from,p.firstLine()):p.firstLine(),this.max=S?Math.min(S.to-1,p.lastLine()):p.lastLine()}function s(p,m){var g=p.cm.getTokenTypeAt(e(p.line,m));return g&&/\btag\b/.test(g)}function l(p){if(!(p.line>=p.max))return p.ch=0,p.text=p.cm.getLine(++p.line),!0}function c(p){if(!(p.line<=p.min))return p.text=p.cm.getLine(--p.line),p.ch=p.text.length,!0}function d(p){for(;;){var m=p.text.indexOf(">",p.ch);if(m==-1){if(l(p))continue;return}if(!s(p,m+1)){p.ch=m+1;continue}var g=p.text.lastIndexOf("/",m),S=g>-1&&!/\S/.test(p.text.slice(g+1,m));return p.ch=m+1,S?"selfClose":"regular"}}function h(p){for(;;){var m=p.ch?p.text.lastIndexOf("<",p.ch-1):-1;if(m==-1){if(c(p))continue;return}if(!s(p,m+1)){p.ch=m;continue}o.lastIndex=m,p.ch=m;var g=o.exec(p.text);if(g&&g.index==m)return g}}function _(p){for(;;){o.lastIndex=p.ch;var m=o.exec(p.text);if(!m){if(l(p))continue;return}if(!s(p,m.index+1)){p.ch=m.index+1;continue}return p.ch=m.index+m[0].length,m}}function T(p){for(;;){var m=p.ch?p.text.lastIndexOf(">",p.ch-1):-1;if(m==-1){if(c(p))continue;return}if(!s(p,m+1)){p.ch=m;continue}var g=p.text.lastIndexOf("/",m),S=g>-1&&!/\S/.test(p.text.slice(g+1,m));return p.ch=m+1,S?"selfClose":"regular"}}function f(p,m){for(var g=[];;){var S=_(p),b,x=p.line,k=p.ch-(S?S[0].length:0);if(!S||!(b=d(p)))return;if(b!="selfClose")if(S[1]){for(var F=g.length-1;F>=0;--F)if(g[F]==S[2]){g.length=F;break}if(F<0&&(!m||m==S[2]))return{tag:S[2],from:e(x,k),to:e(p.line,p.ch)}}else g.push(S[2])}}function u(p,m){for(var g=[];;){var S=T(p);if(!S)return;if(S=="selfClose"){h(p);continue}var b=p.line,x=p.ch,k=h(p);if(!k)return;if(k[1])g.push(k[2]);else{for(var F=g.length-1;F>=0;--F)if(g[F]==k[2]){g.length=F;break}if(F<0&&(!m||m==k[2]))return{tag:k[2],from:e(p.line,p.ch),to:e(b,x)}}}}i.registerHelper("fold","xml",function(p,m){for(var g=new a(p,m.line,0);;){var S=_(g);if(!S||g.line!=m.line)return;var b=d(g);if(!b)return;if(!S[1]&&b!="selfClose"){var x=e(g.line,g.ch),k=f(g,S[2]);return k&&t(k.from,x)>0?{from:x,to:k.from}:null}}}),i.findMatchingTag=function(p,m,g){var S=new a(p,m.line,m.ch,g);if(!(S.text.indexOf(">")==-1&&S.text.indexOf("<")==-1)){var b=d(S),x=b&&e(S.line,S.ch),k=b&&h(S);if(!(!b||!k||t(S,m)>0)){var F={from:e(S.line,S.ch),to:x,tag:k[2]};return b=="selfClose"?{open:F,close:null,at:"open"}:k[1]?{open:u(S,k[2]),close:F,at:"close"}:(S=new a(p,x.line,x.ch,g),{open:F,close:f(S,k[2]),at:"open"})}}},i.findEnclosingTag=function(p,m,g,S){for(var b=new a(p,m.line,m.ch,g);;){var x=u(b,S);if(!x)break;var k=new a(p,m.line,m.ch,g),F=f(k,x.tag);if(F)return{open:x,close:F}}},i.scanForClosingTag=function(p,m,g,S){var b=new a(p,m.line,m.ch,S?{from:0,to:S}:null);return f(b,g)}})});var ym=De((hm,gm)=>{"use strict";(function(i){typeof hm=="object"&&typeof gm=="object"?i(je()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],i):i(CodeMirror)})(function(i){"use strict";var e="CodeMirror-hint",t="CodeMirror-hint-active";i.showHint=function(u,p,m){if(!p)return u.showHint(m);m&&m.async&&(p.async=!0);var g={hint:p};if(m)for(var S in m)g[S]=m[S];return u.showHint(g)},i.defineExtension("showHint",function(u){u=a(this,this.getCursor("start"),u);var p=this.listSelections();if(!(p.length>1)){if(this.somethingSelected()){if(!u.hint.supportsSelection)return;for(var m=0;m<p.length;m++)if(p[m].head.line!=p[m].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var g=this.state.completionActive=new n(this,u);g.options.hint&&(i.signal(this,"startCompletion",this),g.update(!0))}}),i.defineExtension("closeHint",function(){this.state.completionActive&&this.state.completionActive.close()});function n(u,p){if(this.cm=u,this.options=p,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,this.options.updateOnCursorActivity){var m=this;u.on("cursorActivity",this.activityFunc=function(){m.cursorActivity()})}}var r=window.requestAnimationFrame||function(u){return setTimeout(u,1e3/60)},o=window.cancelAnimationFrame||clearTimeout;n.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.options.updateOnCursorActivity&&this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&i.signal(this.data,"close"),this.widget&&this.widget.close(),i.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(u,p){var m=u.list[p],g=this;this.cm.operation(function(){m.hint?m.hint(g.cm,u,m):g.cm.replaceRange(s(m),m.from||u.from,m.to||u.to,"complete"),i.signal(u,"pick",m),g.cm.scrollIntoView()}),this.options.closeOnPick&&this.close()},cursorActivity:function(){this.debounce&&(o(this.debounce),this.debounce=0);var u=this.startPos;this.data&&(u=this.data.from);var p=this.cm.getCursor(),m=this.cm.getLine(p.line);if(p.line!=this.startPos.line||m.length-p.ch!=this.startLen-this.startPos.ch||p.ch<u.ch||this.cm.somethingSelected()||!p.ch||this.options.closeCharacters.test(m.charAt(p.ch-1)))this.close();else{var g=this;this.debounce=r(function(){g.update()}),this.widget&&this.widget.disable()}},update:function(u){if(this.tick!=null){var p=this,m=++this.tick;_(this.options.hint,this.cm,this.options,function(g){p.tick==m&&p.finishUpdate(g,u)})}},finishUpdate:function(u,p){this.data&&i.signal(this.data,"update");var m=this.widget&&this.widget.picked||p&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=u,u&&u.list.length&&(m&&u.list.length==1?this.pick(u,0):(this.widget=new d(this,u),i.signal(u,"shown")))}};function a(u,p,m){var g=u.options.hintOptions,S={};for(var b in f)S[b]=f[b];if(g)for(var b in g)g[b]!==void 0&&(S[b]=g[b]);if(m)for(var b in m)m[b]!==void 0&&(S[b]=m[b]);return S.hint.resolve&&(S.hint=S.hint.resolve(u,p)),S}function s(u){return typeof u=="string"?u:u.text}function l(u,p){var m={Up:function(){p.moveFocus(-1)},Down:function(){p.moveFocus(1)},PageUp:function(){p.moveFocus(-p.menuSize()+1,!0)},PageDown:function(){p.moveFocus(p.menuSize()-1,!0)},Home:function(){p.setFocus(0)},End:function(){p.setFocus(p.length-1)},Enter:p.pick,Tab:p.pick,Esc:p.close},g=/Mac/.test(navigator.platform);g&&(m["Ctrl-P"]=function(){p.moveFocus(-1)},m["Ctrl-N"]=function(){p.moveFocus(1)});var S=u.options.customKeys,b=S?{}:m;function x($,U){var ct;typeof U!="string"?ct=function(Ct){return U(Ct,p)}:m.hasOwnProperty(U)?ct=m[U]:ct=U,b[$]=ct}if(S)for(var k in S)S.hasOwnProperty(k)&&x(k,S[k]);var F=u.options.extraKeys;if(F)for(var k in F)F.hasOwnProperty(k)&&x(k,F[k]);return b}function c(u,p){for(;p&&p!=u;){if(p.nodeName.toUpperCase()==="LI"&&p.parentNode==u)return p;p=p.parentNode}}function d(u,p){this.id="cm-complete-"+Math.floor(Math.random(1e6)),this.completion=u,this.data=p,this.picked=!1;var m=this,g=u.cm,S=g.getInputField().ownerDocument,b=S.defaultView||S.parentWindow,x=this.hints=S.createElement("ul");x.setAttribute("role","listbox"),x.setAttribute("aria-expanded","true"),x.id=this.id;var k=u.cm.options.theme;x.className="CodeMirror-hints "+k,this.selectedHint=p.selectedHint||0;for(var F=p.list,$=0;$<F.length;++$){var U=x.appendChild(S.createElement("li")),ct=F[$],Ct=e+($!=this.selectedHint?"":" "+t);ct.className!=null&&(Ct=ct.className+" "+Ct),U.className=Ct,$==this.selectedHint&&U.setAttribute("aria-selected","true"),U.id=this.id+"-"+$,U.setAttribute("role","option"),ct.render?ct.render(U,p,ct):U.appendChild(S.createTextNode(ct.displayText||s(ct))),U.hintId=$}var Bt=u.options.container||S.body,Tt=g.cursorCoords(u.options.alignWithWord?p.from:null),xe=Tt.left,we=Tt.bottom,H=!0,L=0,j=0;if(Bt!==S.body){var G=["absolute","relative","fixed"].indexOf(b.getComputedStyle(Bt).position)!==-1,gt=G?Bt:Bt.offsetParent,It=gt.getBoundingClientRect(),bt=S.body.getBoundingClientRect();L=It.left-bt.left-gt.scrollLeft,j=It.top-bt.top-gt.scrollTop}x.style.left=xe-L+"px",x.style.top=we-j+"px";var wt=b.innerWidth||Math.max(S.body.offsetWidth,S.documentElement.offsetWidth),w=b.innerHeight||Math.max(S.body.offsetHeight,S.documentElement.offsetHeight);Bt.appendChild(x),g.getInputField().setAttribute("aria-autocomplete","list"),g.getInputField().setAttribute("aria-owns",this.id),g.getInputField().setAttribute("aria-activedescendant",this.id+"-"+this.selectedHint);var Y=u.options.moveOnOverlap?x.getBoundingClientRect():new DOMRect,At=u.options.paddingForScrollbar?x.scrollHeight>x.clientHeight+1:!1,W;setTimeout(function(){W=g.getScrollInfo()});var yt=Y.bottom-w;if(yt>0){var Dt=Y.bottom-Y.top,le=Y.top-(Tt.bottom-Tt.top)-2;w-Y.top<le?(Dt>le&&(x.style.height=(Dt=le)+"px"),x.style.top=(we=Tt.top-Dt)+j+"px",H=!1):x.style.height=w-Y.top-2+"px"}var Rt=Y.right-wt;if(At&&(Rt+=g.display.nativeBarWidth),Rt>0&&(Y.right-Y.left>wt&&(x.style.width=wt-5+"px",Rt-=Y.right-Y.left-wt),x.style.left=(xe=Math.max(Tt.left-Rt-L,0))+"px"),At)for(var pi=x.firstChild;pi;pi=pi.nextSibling)pi.style.paddingRight=g.display.nativeBarWidth+"px";if(g.addKeyMap(this.keyMap=l(u,{moveFocus:function(at,jt){m.changeActive(m.selectedHint+at,jt)},setFocus:function(at){m.changeActive(at)},menuSize:function(){return m.screenAmount()},length:F.length,close:function(){u.close()},pick:function(){m.pick()},data:p})),u.options.closeOnUnfocus){var hn;g.on("blur",this.onBlur=function(){hn=setTimeout(function(){u.close()},100)}),g.on("focus",this.onFocus=function(){clearTimeout(hn)})}g.on("scroll",this.onScroll=function(){var at=g.getScrollInfo(),jt=g.getWrapperElement().getBoundingClientRect();W||(W=g.getScrollInfo());var We=we+W.top-at.top,Zr=We-(b.pageYOffset||(S.documentElement||S.body).scrollTop);if(H||(Zr+=x.offsetHeight),Zr<=jt.top||Zr>=jt.bottom)return u.close();x.style.top=We+"px",x.style.left=xe+W.left-at.left+"px"}),i.on(x,"dblclick",function(at){var jt=c(x,at.target||at.srcElement);jt&&jt.hintId!=null&&(m.changeActive(jt.hintId),m.pick())}),i.on(x,"click",function(at){var jt=c(x,at.target||at.srcElement);jt&&jt.hintId!=null&&(m.changeActive(jt.hintId),u.options.completeOnSingleClick&&m.pick())}),i.on(x,"mousedown",function(){setTimeout(function(){g.focus()},20)});var gn=this.getSelectedHintRange();return(gn.from!==0||gn.to!==0)&&this.scrollToActive(),i.signal(p,"select",F[this.selectedHint],x.childNodes[this.selectedHint]),!0}d.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode&&this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var u=this.completion.cm.getInputField();u.removeAttribute("aria-activedescendant"),u.removeAttribute("aria-owns");var p=this.completion.cm;this.completion.options.closeOnUnfocus&&(p.off("blur",this.onBlur),p.off("focus",this.onFocus)),p.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var u=this;this.keyMap={Enter:function(){u.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(u,p){if(u>=this.data.list.length?u=p?this.data.list.length-1:0:u<0&&(u=p?0:this.data.list.length-1),this.selectedHint!=u){var m=this.hints.childNodes[this.selectedHint];m&&(m.className=m.className.replace(" "+t,""),m.removeAttribute("aria-selected")),m=this.hints.childNodes[this.selectedHint=u],m.className+=" "+t,m.setAttribute("aria-selected","true"),this.completion.cm.getInputField().setAttribute("aria-activedescendant",m.id),this.scrollToActive(),i.signal(this.data,"select",this.data.list[this.selectedHint],m)}},scrollToActive:function(){var u=this.getSelectedHintRange(),p=this.hints.childNodes[u.from],m=this.hints.childNodes[u.to],g=this.hints.firstChild;p.offsetTop<this.hints.scrollTop?this.hints.scrollTop=p.offsetTop-g.offsetTop:m.offsetTop+m.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=m.offsetTop+m.offsetHeight-this.hints.clientHeight+g.offsetTop)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1},getSelectedHintRange:function(){var u=this.completion.options.scrollMargin||0;return{from:Math.max(0,this.selectedHint-u),to:Math.min(this.data.list.length-1,this.selectedHint+u)}}};function h(u,p){if(!u.somethingSelected())return p;for(var m=[],g=0;g<p.length;g++)p[g].supportsSelection&&m.push(p[g]);return m}function _(u,p,m,g){if(u.async)u(p,g,m);else{var S=u(p,m);S&&S.then?S.then(g):g(S)}}function T(u,p){var m=u.getHelpers(p,"hint"),g;if(m.length){var S=function(b,x,k){var F=h(b,m);function $(U){if(U==F.length)return x(null);_(F[U],b,k,function(ct){ct&&ct.list.length>0?x(ct):$(U+1)})}$(0)};return S.async=!0,S.supportsSelection=!0,S}else return(g=u.getHelper(u.getCursor(),"hintWords"))?function(b){return i.hint.fromList(b,{words:g})}:i.hint.anyword?function(b,x){return i.hint.anyword(b,x)}:function(){}}i.registerHelper("hint","auto",{resolve:T}),i.registerHelper("hint","fromList",function(u,p){var m=u.getCursor(),g=u.getTokenAt(m),S,b=i.Pos(m.line,g.start),x=m;g.start<m.ch&&/\w/.test(g.string.charAt(m.ch-g.start-1))?S=g.string.substr(0,m.ch-g.start):(S="",b=m);for(var k=[],F=0;F<p.words.length;F++){var $=p.words[F];$.slice(0,S.length)==S&&k.push($)}if(k.length)return{list:k,from:b,to:x}}),i.commands.autocomplete=i.showHint;var f={hint:i.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnPick:!0,closeOnUnfocus:!0,updateOnCursorActivity:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null,paddingForScrollbar:!0,moveOnOverlap:!0};i.defineOption("hintOptions",null)})});var _r=(()=>{class i{static{this.API="../nifi-api"}constructor(t){this.httpClient=t}getUser(){return this.httpClient.get(`${i.API}/flow/current-user`)}static{this.\u0275fac=function(n){return new(n||i)(E(Ht))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Cr=Le("[Login Configuration] Load Login Configuration"),qe=Le("[Login Configuration] Load Login Configuration Success",ti());var $t=()=>{let i=vt(He),e=vt(_r),t=vt(dt),n=vt(et);return n.select(hi).pipe(Vt(1),N(o=>o?I(o):K(i.getLoginConfiguration()).pipe(it(a=>{n.dispatch(qe({response:{loginConfiguration:a.authenticationConfiguration}}))})))).pipe(N(o=>n.select(Mn).pipe(Vt(1),N(a=>a.status=="success"?I(!0):K(e.getUser()).pipe(it(s=>{n.dispatch(wn({response:{user:s}}))}),M(()=>!0),z(s=>((s.status!==401||o.loginSupported)&&n.dispatch(t.fullScreenError(s)),I(!1))))))),z(()=>(n.dispatch(Jt({errorDetail:{title:"Unauthorized",message:"Unable to load authentication configuration. Please contact your system administrator."}})),I(!1))))};var Hc=i=>()=>{let e=vt(et),t=vt(He),n=vt(dt);return e.select(hi).pipe(N(r=>r?I(r):t.getLoginConfiguration().pipe(it(o=>e.dispatch(qe({response:{loginConfiguration:o.authenticationConfiguration}}))))),M(r=>i(r)?!0:(e.dispatch(Jt({skipReplaceUrl:!0,errorDetail:{title:"Unable to load",message:"Login configuration check failed"}})),!1)),z(r=>(e.dispatch(n.fullScreenError(r,!0)),I(!1))))};var _m=[{path:"login",canMatch:[Hc(i=>i.loginSupported)],loadChildren:()=>import("./chunk-225INXA3.js").then(i=>i.LoginModule)},{path:"logout-complete",loadChildren:()=>import("./chunk-BKOIIHX7.js").then(i=>i.LogoutModule)},{path:"error",loadChildren:()=>import("./chunk-2SLMGQSD.js").then(i=>i.ErrorModule)},{path:"404",component:uo,loadChildren:()=>import("./chunk-SVM6LPDG.js").then(i=>i.RouteNotFoundModule)},{path:"documentation",canMatch:[$t],loadChildren:()=>import("./chunk-JTU6KBQO.js").then(i=>i.DocumentationModule)},{path:"settings",canMatch:[$t],loadChildren:()=>import("./chunk-47UHBR4G.js").then(i=>i.SettingsModule)},{path:"provenance",canMatch:[$t],loadChildren:()=>import("./chunk-XMQAIO6K.js").then(i=>i.ProvenanceModule)},{path:"parameter-contexts",canMatch:[$t],loadChildren:()=>import("./chunk-VGYRCGB2.js").then(i=>i.ParameterContextsModule)},{path:"counters",canMatch:[$t],loadChildren:()=>import("./chunk-WOJ4HBZB.js").then(i=>i.CountersModule)},{path:"users",canMatch:[$t],loadChildren:()=>import("./chunk-FLKLQDL7.js").then(i=>i.UsersModule)},{path:"access-policies",canMatch:[$t],loadChildren:()=>import("./chunk-X5R2CHPR.js").then(i=>i.AccessPoliciesModule)},{path:"summary",canMatch:[$t],loadChildren:()=>import("./chunk-3U3LNSJS.js").then(i=>i.SummaryModule)},{path:"bulletins",canMatch:[$t],loadChildren:()=>import("./chunk-4OYWCE2Y.js").then(i=>i.BulletinsModule)},{path:"queue",canMatch:[$t],loadChildren:()=>import("./chunk-EPOQA4DA.js").then(i=>i.QueueModule)},{path:"flow-configuration-history",canMatch:[$t],loadChildren:()=>import("./chunk-XXWZ6XDG.js").then(i=>i.FlowConfigurationHistoryModule)},{path:"cluster",canMatch:[$t],loadChildren:()=>import("./chunk-AZ2N5NW3.js").then(i=>i.ClusterModule)},{path:"content-viewer",canMatch:[$t],loadChildren:()=>import("./chunk-6PNIBQS6.js").then(i=>i.ContentViewerModule)},{path:"",canMatch:[$t],loadChildren:()=>import("./chunk-GMCU7PYV.js").then(i=>i.FlowDesignerModule)},{path:"**",component:uo,loadChildren:()=>import("./chunk-SVM6LPDG.js").then(i=>i.RouteNotFoundModule)}],Lc=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=pe({type:i})}static{this.\u0275inj=ue({imports:[oo.forRoot(_m,{paramsInheritanceStrategy:"always",useHash:!0}),oo]})}}return i})();var br=Le("[Navigation] Push Back Navigation",ti()),Er=Le("[Navigation] Pop Back Navigation",ti());var Tr=Le("[Document Visibility] Document Visibility Changed",ti());function Cm(i,e){i&1&&(v(0,"div",0)(1,"div",1),st(2,"mat-spinner",2),y()())}function bm(i,e){i&1&&st(0,"router-outlet")}var Bc=(()=>{class i{constructor(t,n,r,o,a){this.router=t,this.storage=n,this.themingService=r,this.dialog=o,this.store=a,this.title="nifi",this.guardLoading=!0,this.documentVisibilityListener=()=>{this.store.dispatch(Tr({change:{documentVisibility:document.visibilityState==="visible"?rn.Visible:rn.Hidden,changedTimestamp:Date.now()}}))},this.router.events.pipe(Zt(),it(c=>{c instanceof ga&&this.dialog.openDialogs.forEach(d=>d.close("ROUTED")),c instanceof Sa&&(this.guardLoading=!0),(c instanceof _a||c instanceof va)&&(this.guardLoading=!1)}),ut(c=>c instanceof ya),M(c=>c),_t(()=>this.store.select(Wl))).subscribe(([c,d])=>{let h=this.router.getCurrentNavigation()?.extras;if(h?.state?.backNavigation){let _=h?.state?.backNavigation;this.store.dispatch(br({backNavigation:_}))}else d&&this.store.dispatch(Er({url:c.url}))});let s=this.storage.getItem("theme"),l=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;this.themingService.toggleTheme(l,s),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addListener(c=>{s=this.storage.getItem("theme"),this.themingService.toggleTheme(c.matches,s)}),document.addEventListener("visibilitychange",this.documentVisibilityListener)}ngOnDestroy(){document.removeEventListener("visibilitychange",this.documentVisibilityListener)}static{this.\u0275fac=function(n){return new(n||i)(tt(Oe),tt(el),tt(il),tt(Lt),tt(et))}}static{this.\u0275cmp=xt({type:i,selectors:[["nifi"]],decls:2,vars:1,consts:[[1,"splash","h-screen","p-20"],[1,"splash-img","h-full","flex","items-center","justify-center"],[1,"tertiary-spinner"]],template:function(n,r){n&1&&Q(0,Cm,3,0,"div",0)(1,bm,1,0,"router-outlet"),n&2&&X(r.guardLoading?0:1)},dependencies:[Ca,Al],styles:['.splash[_ngcontent-%COMP%]   .splash-img[_ngcontent-%COMP%]{background:transparent url("./media/nifi-drop-splash-XQG4BR47.svg") no-repeat center center}']})}}return i})();function $c(i){return new nt(3e3,!1)}function Em(){return new nt(3100,!1)}function Tm(){return new nt(3101,!1)}function Am(i){return new nt(3001,!1)}function xm(i){return new nt(3003,!1)}function wm(i){return new nt(3004,!1)}function Dm(i,e){return new nt(3005,!1)}function km(){return new nt(3006,!1)}function Mm(){return new nt(3007,!1)}function Im(i,e){return new nt(3008,!1)}function Pm(i){return new nt(3002,!1)}function Nm(i,e,t,n,r){return new nt(3010,!1)}function Rm(){return new nt(3011,!1)}function Fm(){return new nt(3012,!1)}function Om(){return new nt(3200,!1)}function Hm(){return new nt(3202,!1)}function Lm(){return new nt(3013,!1)}function Bm(i){return new nt(3014,!1)}function $m(i){return new nt(3015,!1)}function jm(i){return new nt(3016,!1)}function Vm(i,e){return new nt(3404,!1)}function zm(i){return new nt(3502,!1)}function Um(i){return new nt(3503,!1)}function qm(){return new nt(3300,!1)}function Km(i){return new nt(3504,!1)}function Gm(i){return new nt(3301,!1)}function Wm(i,e){return new nt(3302,!1)}function Qm(i){return new nt(3303,!1)}function Ym(i,e){return new nt(3400,!1)}function Xm(i){return new nt(3401,!1)}function Zm(i){return new nt(3402,!1)}function Jm(i,e){return new nt(3505,!1)}function Ge(i){switch(i.length){case 0:return new gi;case 1:return i[0];default:return new vo(i)}}function tu(i,e,t=new Map,n=new Map){let r=[],o=[],a=-1,s=null;if(e.forEach(l=>{let c=l.get("offset"),d=c==a,h=d&&s||new Map;l.forEach((_,T)=>{let f=T,u=_;if(T!=="offset")switch(f=i.normalizePropertyName(f,r),u){case Pn:u=t.get(T);break;case de:u=n.get(T);break;default:u=i.normalizeStyleValue(T,f,u,r);break}h.set(f,u)}),d||o.push(h),s=h,a=c}),r.length)throw zm(r);return o}function ss(i,e,t,n){switch(e){case"start":i.onStart(()=>n(t&&Lo(t,"start",i)));break;case"done":i.onDone(()=>n(t&&Lo(t,"done",i)));break;case"destroy":i.onDestroy(()=>n(t&&Lo(t,"destroy",i)));break}}function Lo(i,e,t){let n=t.totalTime,r=!!t.disabled,o=as(i.element,i.triggerName,i.fromState,i.toState,e||i.phaseName,n??i.totalTime,r),a=i._data;return a!=null&&(o._data=a),o}function as(i,e,t,n,r="",o=0,a){return{element:i,triggerName:e,fromState:t,toState:n,phaseName:r,totalTime:o,disabled:!!a}}function Qt(i,e,t){let n=i.get(e);return n||i.set(e,n=t),n}function jc(i){let e=i.indexOf(":"),t=i.substring(1,e),n=i.slice(e+1);return[t,n]}var td=typeof document>"u"?null:document.documentElement;function ls(i){let e=i.parentNode||i.host||null;return e===td?null:e}function ed(i){return i.substring(1,6)=="ebkit"}var si=null,Vc=!1;function id(i){si||(si=nd()||{},Vc=si.style?"WebkitAppearance"in si.style:!1);let e=!0;return si.style&&!ed(i)&&(e=i in si.style,!e&&Vc&&(e="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in si.style)),e}function nd(){return typeof document<"u"?document.body:null}function eu(i,e){for(;e;){if(e===i)return!0;e=ls(e)}return!1}function iu(i,e,t){if(t)return Array.from(i.querySelectorAll(e));let n=i.querySelector(e);return n?[n]:[]}var cs=(()=>{class i{validateStyleProperty(t){return id(t)}containsElement(t,n){return eu(t,n)}getParentElement(t){return ls(t)}query(t,n,r){return iu(t,n,r)}computeStyle(t,n,r){return r||""}animate(t,n,r,o,a,s=[],l){return new gi(r,o)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac})}}return i})(),ci=class{static{this.NOOP=new cs}},ui=class{};var rd=1e3,nu="{{",od="}}",ru="ng-enter",Uo="ng-leave",Ar="ng-trigger",Mr=".ng-trigger",zc="ng-animating",qo=".ng-animating";function Te(i){if(typeof i=="number")return i;let e=i.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Ko(parseFloat(e[1]),e[2])}function Ko(i,e){switch(e){case"s":return i*rd;default:return i}}function Ir(i,e,t){return i.hasOwnProperty("duration")?i:sd(i,e,t)}function sd(i,e,t){let n=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,a="";if(typeof i=="string"){let s=i.match(n);if(s===null)return e.push($c(i)),{duration:0,delay:0,easing:""};r=Ko(parseFloat(s[1]),s[2]);let l=s[3];l!=null&&(o=Ko(parseFloat(l),s[4]));let c=s[5];c&&(a=c)}else r=i;if(!t){let s=!1,l=e.length;r<0&&(e.push(Em()),s=!0),o<0&&(e.push(Tm()),s=!0),s&&e.splice(l,0,$c(i))}return{duration:r,delay:o,easing:a}}function ad(i){return i.length?i[0]instanceof Map?i:i.map(e=>new Map(Object.entries(e))):[]}function _e(i,e,t){e.forEach((n,r)=>{let o=us(r);t&&!t.has(r)&&t.set(r,i.style[o]),i.style[o]=n})}function li(i,e){e.forEach((t,n)=>{let r=us(n);i.style[r]=""})}function on(i){return Array.isArray(i)?i.length==1?i[0]:Ya(i):i}function ld(i,e,t){let n=e.params||{},r=ou(i);r.length&&r.forEach(o=>{n.hasOwnProperty(o)||t.push(Am(o))})}var Go=new RegExp(`${nu}\\s*(.+?)\\s*${od}`,"g");function ou(i){let e=[];if(typeof i=="string"){let t;for(;t=Go.exec(i);)e.push(t[1]);Go.lastIndex=0}return e}function an(i,e,t){let n=`${i}`,r=n.replace(Go,(o,a)=>{let s=e[a];return s==null&&(t.push(xm(a)),s=""),s.toString()});return r==n?i:r}var cd=/-+([a-z0-9])/g;function us(i){return i.replace(cd,(...e)=>e[1].toUpperCase())}function ud(i,e){return i===0||e===0}function pd(i,e,t){if(t.size&&e.length){let n=e[0],r=[];if(t.forEach((o,a)=>{n.has(a)||r.push(a),n.set(a,o)}),r.length)for(let o=1;o<e.length;o++){let a=e[o];r.forEach(s=>a.set(s,ps(i,s)))}}return e}function Wt(i,e,t){switch(e.type){case Z.Trigger:return i.visitTrigger(e,t);case Z.State:return i.visitState(e,t);case Z.Transition:return i.visitTransition(e,t);case Z.Sequence:return i.visitSequence(e,t);case Z.Group:return i.visitGroup(e,t);case Z.Animate:return i.visitAnimate(e,t);case Z.Keyframes:return i.visitKeyframes(e,t);case Z.Style:return i.visitStyle(e,t);case Z.Reference:return i.visitReference(e,t);case Z.AnimateChild:return i.visitAnimateChild(e,t);case Z.AnimateRef:return i.visitAnimateRef(e,t);case Z.Query:return i.visitQuery(e,t);case Z.Stagger:return i.visitStagger(e,t);default:throw wm(e.type)}}function ps(i,e){return window.getComputedStyle(i)[e]}var md=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Pr=class extends ui{normalizePropertyName(e,t){return us(e)}normalizeStyleValue(e,t,n,r){let o="",a=n.toString().trim();if(md.has(t)&&n!==0&&n!=="0")if(typeof n=="number")o="px";else{let s=n.match(/^[+-]?[\d\.]+([a-z]*)$/);s&&s[1].length==0&&r.push(Dm(e,n))}return a+o}};var Nr="*";function dd(i,e){let t=[];return typeof i=="string"?i.split(/\s*,\s*/).forEach(n=>fd(n,t,e)):t.push(i),t}function fd(i,e,t){if(i[0]==":"){let l=hd(i,t);if(typeof l=="function"){e.push(l);return}i=l}let n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(n==null||n.length<4)return t.push($m(i)),e;let r=n[1],o=n[2],a=n[3];e.push(Uc(r,a));let s=r==Nr&&a==Nr;o[0]=="<"&&!s&&e.push(Uc(a,r))}function hd(i,e){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push(jm(i)),"* => *"}}var xr=new Set(["true","1"]),wr=new Set(["false","0"]);function Uc(i,e){let t=xr.has(i)||wr.has(i),n=xr.has(e)||wr.has(e);return(r,o)=>{let a=i==Nr||i==r,s=e==Nr||e==o;return!a&&t&&typeof r=="boolean"&&(a=r?xr.has(i):wr.has(i)),!s&&n&&typeof o=="boolean"&&(s=o?xr.has(e):wr.has(e)),a&&s}}var su=":self",gd=new RegExp(`s*${su}s*,?`,"g");function au(i,e,t,n){return new Wo(i).build(e,t,n)}var qc="",Wo=class{constructor(e){this._driver=e}build(e,t,n){let r=new Qo(t);return this._resetContextStyleTimingState(r),Wt(this,on(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=qc,e.collectedStyles=new Map,e.collectedStyles.set(qc,new Map),e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0,o=[],a=[];return e.name.charAt(0)=="@"&&t.errors.push(km()),e.definitions.forEach(s=>{if(this._resetContextStyleTimingState(t),s.type==Z.State){let l=s,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,o.push(this.visitState(l,t))}),l.name=c}else if(s.type==Z.Transition){let l=this.visitTransition(s,t);n+=l.queryCount,r+=l.depCount,a.push(l)}else t.errors.push(Mm())}),{type:Z.Trigger,name:e.name,states:o,transitions:a,queryCount:n,depCount:r,options:null}}visitState(e,t){let n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){let o=new Set,a=r||{};n.styles.forEach(s=>{s instanceof Map&&s.forEach(l=>{ou(l).forEach(c=>{a.hasOwnProperty(c)||o.add(c)})})}),o.size&&t.errors.push(Im(e.name,[...o.values()]))}return{type:Z.State,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let n=Wt(this,on(e.animation),t),r=dd(e.expr,t.errors);return{type:Z.Transition,matchers:r,animation:n,queryCount:t.queryCount,depCount:t.depCount,options:ai(e.options)}}visitSequence(e,t){return{type:Z.Sequence,steps:e.steps.map(n=>Wt(this,n,t)),options:ai(e.options)}}visitGroup(e,t){let n=t.currentTime,r=0,o=e.steps.map(a=>{t.currentTime=n;let s=Wt(this,a,t);return r=Math.max(r,t.currentTime),s});return t.currentTime=r,{type:Z.Group,steps:o,options:ai(e.options)}}visitAnimate(e,t){let n=_d(e.timings,t.errors);t.currentAnimateTimings=n;let r,o=e.styles?e.styles:ei({});if(o.type==Z.Keyframes)r=this.visitKeyframes(o,t);else{let a=e.styles,s=!1;if(!a){s=!0;let c={};n.easing&&(c.easing=n.easing),a=ei(c)}t.currentTime+=n.duration+n.delay;let l=this.visitStyle(a,t);l.isEmptyStep=s,r=l}return t.currentAnimateTimings=null,{type:Z.Animate,timings:n,style:r,options:null}}visitStyle(e,t){let n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){let n=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let s of r)typeof s=="string"?s===de?n.push(s):t.errors.push(Pm(s)):n.push(new Map(Object.entries(s)));let o=!1,a=null;return n.forEach(s=>{if(s instanceof Map&&(s.has("easing")&&(a=s.get("easing"),s.delete("easing")),!o)){for(let l of s.values())if(l.toString().indexOf(nu)>=0){o=!0;break}}}),{type:Z.Style,styles:n,easing:a,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let n=t.currentAnimateTimings,r=t.currentTime,o=t.currentTime;n&&o>0&&(o-=n.duration+n.delay),e.styles.forEach(a=>{typeof a!="string"&&a.forEach((s,l)=>{let c=t.collectedStyles.get(t.currentQuerySelector),d=c.get(l),h=!0;d&&(o!=r&&o>=d.startTime&&r<=d.endTime&&(t.errors.push(Nm(l,d.startTime,d.endTime,o,r)),h=!1),o=d.startTime),h&&c.set(l,{startTime:o,endTime:r}),t.options&&ld(s,t.options,t.errors)})})}visitKeyframes(e,t){let n={type:Z.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(Rm()),n;let r=1,o=0,a=[],s=!1,l=!1,c=0,d=e.steps.map(m=>{let g=this._makeStyleAst(m,t),S=g.offset!=null?g.offset:Sd(g.styles),b=0;return S!=null&&(o++,b=g.offset=S),l=l||b<0||b>1,s=s||b<c,c=b,a.push(b),g});l&&t.errors.push(Fm()),s&&t.errors.push(Om());let h=e.steps.length,_=0;o>0&&o<h?t.errors.push(Hm()):o==0&&(_=r/(h-1));let T=h-1,f=t.currentTime,u=t.currentAnimateTimings,p=u.duration;return d.forEach((m,g)=>{let S=_>0?g==T?1:_*g:a[g],b=S*p;t.currentTime=f+u.delay+b,u.duration=b,this._validateStyleAst(m,t),m.offset=S,n.styles.push(m)}),n}visitReference(e,t){return{type:Z.Reference,animation:Wt(this,on(e.animation),t),options:ai(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:Z.AnimateChild,options:ai(e.options)}}visitAnimateRef(e,t){return{type:Z.AnimateRef,animation:this.visitReference(e.animation,t),options:ai(e.options)}}visitQuery(e,t){let n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[o,a]=yd(e.selector);t.currentQuerySelector=n.length?n+" "+o:o,Qt(t.collectedStyles,t.currentQuerySelector,new Map);let s=Wt(this,on(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:Z.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:a,animation:s,originalSelector:e.selector,options:ai(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(Lm());let n=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Ir(e.timings,t.errors,!0);return{type:Z.Stagger,animation:Wt(this,on(e.animation),t),timings:n,options:null}}};function yd(i){let e=!!i.split(/\s*,\s*/).find(t=>t==su);return e&&(i=i.replace(gd,"")),i=i.replace(/@\*/g,Mr).replace(/@\w+/g,t=>Mr+"-"+t.slice(1)).replace(/:animating/g,qo),[i,e]}function vd(i){return i?D({},i):null}var Qo=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function Sd(i){if(typeof i=="string")return null;let e=null;if(Array.isArray(i))i.forEach(t=>{if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){let t=i;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function _d(i,e){if(i.hasOwnProperty("duration"))return i;if(typeof i=="number"){let o=Ir(i,e).duration;return Bo(o,0,"")}let t=i;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=Bo(0,0,"");return o.dynamic=!0,o.strValue=t,o}let r=Ir(t,e);return Bo(r.duration,r.delay,r.easing)}function ai(i){return i?(i=D({},i),i.params&&(i.params=vd(i.params))):i={},i}function Bo(i,e,t){return{duration:i,delay:e,easing:t}}function ms(i,e,t,n,r,o,a=null,s=!1){return{type:1,element:i,keyframes:e,preStyleProps:t,postStyleProps:n,duration:r,delay:o,totalTime:r+o,easing:a,subTimeline:s}}var ln=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},Cd=1,bd=":enter",Ed=new RegExp(bd,"g"),Td=":leave",Ad=new RegExp(Td,"g");function lu(i,e,t,n,r,o=new Map,a=new Map,s,l,c=[]){return new Yo().buildKeyframes(i,e,t,n,r,o,a,s,l,c)}var Yo=class{buildKeyframes(e,t,n,r,o,a,s,l,c,d=[]){c=c||new ln;let h=new Xo(e,t,c,r,o,d,[]);h.options=l;let _=l.delay?Te(l.delay):0;h.currentTimeline.delayNextStep(_),h.currentTimeline.setStyles([a],null,h.errors,l),Wt(this,n,h);let T=h.timelines.filter(f=>f.containsAnimation());if(T.length&&s.size){let f;for(let u=T.length-1;u>=0;u--){let p=T[u];if(p.element===t){f=p;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([s],null,h.errors,l)}return T.length?T.map(f=>f.buildKeyframes()):[ms(t,[],[],[],0,_,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let n=t.subInstructions.get(t.element);if(n){let r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,a=this._visitSubInstructions(n,r,r.options);o!=a&&t.transformIntoNewTimeline(a)}t.previousNode=e}visitAnimateRef(e,t){let n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,n),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,n){for(let r of e){let o=r?.delay;if(o){let a=typeof o=="number"?o:Te(an(o,r?.params??{},t.errors));n.delayNextStep(a)}}}_visitSubInstructions(e,t,n){let o=t.currentTimeline.currentTime,a=n.duration!=null?Te(n.duration):null,s=n.delay!=null?Te(n.delay):null;return a!==0&&e.forEach(l=>{let c=t.appendInstructionToTimeline(l,a,s);o=Math.max(o,c.duration+c.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Wt(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let n=t.subContextCount,r=t,o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==Z.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Rr);let a=Te(o.delay);r.delayNextStep(a)}e.steps.length&&(e.steps.forEach(a=>Wt(this,a,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let n=[],r=t.currentTimeline.currentTime,o=e.options&&e.options.delay?Te(e.options.delay):0;e.steps.forEach(a=>{let s=t.createSubContext(e.options);o&&s.delayNextStep(o),Wt(this,a,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(a=>t.currentTimeline.mergeTimelineCollectedStyles(a)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let n=e.strValue,r=t.params?an(n,t.params,t.errors):n;return Ir(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());let o=e.style;o.type==Z.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(n.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();let o=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(o):n.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let n=t.currentAnimateTimings,r=t.currentTimeline.duration,o=n.duration,s=t.createSubContext().currentTimeline;s.easing=n.easing,e.styles.forEach(l=>{let c=l.offset||0;s.forwardTime(c*o),s.setStyles(l.styles,l.easing,t.errors,t.options),s.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(s),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){let n=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?Te(r.delay):0;o&&(t.previousNode.type===Z.Style||n==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Rr);let a=n,s=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=s.length;let l=null;s.forEach((c,d)=>{t.currentQueryIndex=d;let h=t.createSubContext(e.options,c);o&&h.delayNextStep(o),c===t.element&&(l=h.currentTimeline),Wt(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe();let _=h.currentTimeline.currentTime;a=Math.max(a,_)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(a),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let n=t.parentContext,r=t.currentTimeline,o=e.timings,a=Math.abs(o.duration),s=a*(t.currentQueryTotal-1),l=a*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=s-l;break;case"full":l=n.currentStaggerTime;break}let d=t.currentTimeline;l&&d.delayNextStep(l);let h=d.currentTime;Wt(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-h+(r.startTime-n.currentTimeline.startTime)}},Rr={},Xo=class i{constructor(e,t,n,r,o,a,s,l){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=o,this.errors=a,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Rr,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new Fr(this._driver,t,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let n=e,r=this.options;n.duration!=null&&(r.duration=Te(n.duration)),n.delay!=null&&(r.delay=Te(n.delay));let o=n.params;if(o){let a=r.params;a||(a=this.options.params={}),Object.keys(o).forEach(s=>{(!t||!a.hasOwnProperty(s))&&(a[s]=an(o[s],a,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let n=e.params={};Object.keys(t).forEach(r=>{n[r]=t[r]})}}return e}createSubContext(e=null,t,n){let r=t||this.element,o=new i(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=Rr,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(n??0)+e.delay,easing:""},o=new Zo(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,o,a){let s=[];if(r&&s.push(this.element),e.length>0){e=e.replace(Ed,"."+this._enterClassName),e=e.replace(Ad,"."+this._leaveClassName);let l=n!=1,c=this._driver.query(this.element,e,l);n!==0&&(c=n<0?c.slice(c.length+n,c.length):c.slice(0,n)),s.push(...c)}return!o&&s.length==0&&a.push(Bm(t)),s}},Fr=class i{constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new i(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Cd,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,n]of this._globalTimelineStyles)this._backFill.set(t,n||de),this._currentKeyframe.set(t,de);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&this._previousKeyframe.set("easing",t);let o=r&&r.params||{},a=xd(e,this._globalTimelineStyles);for(let[s,l]of a){let c=an(l,o,n);this._pendingStyles.set(s,c),this._localTimelineStyles.has(s)||this._backFill.set(s,this._globalTimelineStyles.get(s)??de),this._updateStyle(s,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,n)=>{let r=this._styleSummary.get(n);(!r||t.time>r.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,n=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((s,l)=>{let c=new Map([...this._backFill,...s]);c.forEach((d,h)=>{d===Pn?e.add(h):d===de&&t.add(h)}),n||c.set("offset",l/this.duration),r.push(c)});let o=[...e.values()],a=[...t.values()];if(n){let s=r[0],l=new Map(s);s.set("offset",0),l.set("offset",1),r=[s,l]}return ms(this.element,r,o,a,this.duration,this.startTime,this.easing,!1)}},Zo=class extends Fr{constructor(e,t,n,r,o,a,s=!1){super(e,t,a.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=s,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],a=n+t,s=t/a,l=new Map(e[0]);l.set("offset",0),o.push(l);let c=new Map(e[0]);c.set("offset",Kc(s)),o.push(c);let d=e.length-1;for(let h=1;h<=d;h++){let _=new Map(e[h]),T=_.get("offset"),f=t+T*n;_.set("offset",Kc(f/a)),o.push(_)}n=a,t=0,r="",e=o}return ms(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}};function Kc(i,e=3){let t=Math.pow(10,e-1);return Math.round(i*t)/t}function xd(i,e){let t=new Map,n;return i.forEach(r=>{if(r==="*"){n??=e.keys();for(let o of n)t.set(o,de)}else for(let[o,a]of r)t.set(o,a)}),t}function Gc(i,e,t,n,r,o,a,s,l,c,d,h,_){return{type:0,element:i,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:n,toStyles:a,timelines:s,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:h,errors:_}}var $o={},Or=class{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return wd(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,n):new Map}build(e,t,n,r,o,a,s,l,c,d){let h=[],_=this.ast.options&&this.ast.options.params||$o,T=s&&s.params||$o,f=this.buildStyles(n,T,h),u=l&&l.params||$o,p=this.buildStyles(r,u,h),m=new Set,g=new Map,S=new Map,b=r==="void",x={params:cu(u,_),delay:this.ast.options?.delay},k=d?[]:lu(e,t,this.ast.animation,o,a,f,p,x,c,h),F=0;return k.forEach($=>{F=Math.max($.duration+$.delay,F)}),h.length?Gc(t,this._triggerName,n,r,b,f,p,[],[],g,S,F,h):(k.forEach($=>{let U=$.element,ct=Qt(g,U,new Set);$.preStyleProps.forEach(Bt=>ct.add(Bt));let Ct=Qt(S,U,new Set);$.postStyleProps.forEach(Bt=>Ct.add(Bt)),U!==t&&m.add(U)}),Gc(t,this._triggerName,n,r,b,f,p,k,[...m.values()],g,S,F))}};function wd(i,e,t,n,r){return i.some(o=>o(e,t,n,r))}function cu(i,e){let t=D({},e);return Object.entries(i).forEach(([n,r])=>{r!=null&&(t[n]=r)}),t}var Jo=class{constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){let n=new Map,r=cu(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,s)=>{a&&(a=an(a,r,t));let l=this.normalizer.normalizePropertyName(s,t);a=this.normalizer.normalizeStyleValue(s,l,a,t),n.set(s,a)})}),n}};function Dd(i,e,t){return new ts(i,e,t)}var ts=class{constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new Jo(r.style,o,n))}),Wc(this.states,"true","1"),Wc(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new Or(e,r,this.states))}),this.fallbackTransition=kd(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(a=>a.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}};function kd(i,e,t){let n=[(a,s)=>!0],r={type:Z.Sequence,steps:[],options:null},o={type:Z.Transition,animation:r,matchers:n,options:null,queryCount:0,depCount:0};return new Or(i,o,e)}function Wc(i,e,t){i.has(e)?i.has(t)||i.set(t,i.get(e)):i.has(t)&&i.set(e,i.get(t))}var Md=new ln,es=class{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let n=[],r=[],o=au(this._driver,t,n,r);if(n.length)throw Um(n);r.length&&void 0,this._animations.set(e,o)}_buildPlayer(e,t,n){let r=e.element,o=tu(this._normalizer,e.keyframes,t,n);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){let r=[],o=this._animations.get(e),a,s=new Map;if(o?(a=lu(this._driver,t,o,ru,Uo,new Map,new Map,n,Md,r),a.forEach(d=>{let h=Qt(s,d.element,new Map);d.postStyleProps.forEach(_=>h.set(_,null))})):(r.push(qm()),a=[]),r.length)throw Km(r);s.forEach((d,h)=>{d.forEach((_,T)=>{d.set(T,this._driver.computeStyle(h,T,de))})});let l=a.map(d=>{let h=s.get(d.element);return this._buildPlayer(d,new Map,h)}),c=Ge(l);return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw Gm(e);return t}listen(e,t,n,r){let o=as(t,"","","");return ss(this._getPlayer(e),n,o,r),()=>{}}command(e,t,n,r){if(n=="register"){this.register(e,r[0]);return}if(n=="create"){let a=r[0]||{};this.create(e,t,a);return}let o=this._getPlayer(e);switch(n){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},Qc="ng-animate-queued",Id=".ng-animate-queued",jo="ng-animate-disabled",Pd=".ng-animate-disabled",Nd="ng-star-inserted",Rd=".ng-star-inserted",Fd=[],uu={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Od={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},se="__ng_removed",cn=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let n=e&&e.hasOwnProperty("value"),r=n?e.value:e;if(this.value=Ld(r),n){let o=e,{value:a}=o,s=Fs(o,["value"]);this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let n=this.options.params;Object.keys(t).forEach(r=>{n[r]==null&&(n[r]=t[r])})}}},sn="void",Vo=new cn(sn),is=class{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,re(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.has(t))throw Wm(n,t);if(n==null||n.length==0)throw Qm(t);if(!Bd(n))throw Ym(n,t);let o=Qt(this._elementListeners,e,[]),a={name:t,phase:n,callback:r};o.push(a);let s=Qt(this._engine.statesByElement,e,new Map);return s.has(t)||(re(e,Ar),re(e,Ar+"-"+t),s.set(t,Vo)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(a);l>=0&&o.splice(l,1),this._triggers.has(t)||s.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw Xm(e);return t}trigger(e,t,n,r=!0){let o=this._getTrigger(t),a=new un(this.id,t,e),s=this._engine.statesByElement.get(e);s||(re(e,Ar),re(e,Ar+"-"+t),this._engine.statesByElement.set(e,s=new Map));let l=s.get(t),c=new cn(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),s.set(t,c),l||(l=Vo),!(c.value===sn)&&l.value===c.value){if(!Vd(l.params,c.params)){let u=[],p=o.matchStyles(l.value,l.params,u),m=o.matchStyles(c.value,c.params,u);u.length?this._engine.reportError(u):this._engine.afterFlush(()=>{li(e,p),_e(e,m)})}return}let _=Qt(this._engine.playersByElement,e,[]);_.forEach(u=>{u.namespaceId==this.id&&u.triggerName==t&&u.queued&&u.destroy()});let T=o.matchTransition(l.value,c.value,e,c.params),f=!1;if(!T){if(!r)return;T=o.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:T,fromState:l,toState:c,player:a,isFallbackTransition:f}),f||(re(e,Qc),a.onStart(()=>{Oi(e,Qc)})),a.onDone(()=>{let u=this.players.indexOf(a);u>=0&&this.players.splice(u,1);let p=this._engine.playersByElement.get(e);if(p){let m=p.indexOf(a);m>=0&&p.splice(m,1)}}),this.players.push(a),_.push(a),a}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let n=this._engine.driver.query(e,Mr,!0);n.forEach(r=>{if(r[se])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(a=>a.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,n,r){let o=this._engine.statesByElement.get(e),a=new Map;if(o){let s=[];if(o.forEach((l,c)=>{if(a.set(c,l.value),this._triggers.has(c)){let d=this.trigger(e,c,sn,r);d&&s.push(d)}}),s.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,a),n&&Ge(s).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){let r=new Set;t.forEach(o=>{let a=o.name;if(r.has(a))return;r.add(a);let l=this._triggers.get(a).fallbackTransition,c=n.get(a)||Vo,d=new cn(sn),h=new un(this.id,a,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:a,transition:l,fromState:c,toState:d,player:h,isFallbackTransition:!0})})}}removeNode(e,t){let n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){let o=n.players.length?n.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let a=e;for(;a=a.parentNode;)if(n.statesByElement.get(a)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{let o=e[se];(!o||o===uu)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){re(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(n=>{let r=n.player;if(r.destroyed)return;let o=n.element,a=this._elementListeners.get(o);a&&a.forEach(s=>{if(s.name==n.triggerName){let l=as(o,n.triggerName,n.fromState.value,n.toState.value);l._data=e,ss(n.player,s.phase,l,s.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((n,r)=>{let o=n.transition.ast.depCount,a=r.transition.ast.depCount;return o==0||a==0?o-a:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},ns=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){let n=new is(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){let n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let a=!1,s=this.driver.getParentElement(t);for(;s;){let l=r.get(s);if(l){let c=n.indexOf(l);n.splice(c+1,0,e),a=!0;break}s=this.driver.getParentElement(s)}a||n.unshift(e)}else n.push(e);return r.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let n=this._fetchNamespace(e);this.namespacesByHostElement.delete(n.hostElement);let r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1),n.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,n=this.statesByElement.get(e);if(n){for(let r of n.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}}return t}trigger(e,t,n,r){if(Dr(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!Dr(t))return;let o=t[se];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let a=this.collectedLeaveElements.indexOf(t);a>=0&&this.collectedLeaveElements.splice(a,1)}if(e){let a=this._fetchNamespace(e);a&&a.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),re(e,jo)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Oi(e,jo))}removeNode(e,t,n){if(Dr(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,n):this.markElementAsRemoved(e,t,!1,n);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,n)}else this._onRemovalComplete(t,n)}markElementAsRemoved(e,t,n,r,o){this.collectedLeaveElements.push(t),t[se]={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,n,r,o){return Dr(t)?this._fetchNamespace(e).listen(t,n,r,o):()=>{}}_buildInstruction(e,t,n,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,Mr,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,qo,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ge(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[se];if(t&&t.setForRemoval){if(e[se]=uu,t.namespaceId){this.destroyInnerAnimations(e);let n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(jo)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Pd,!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++){let r=this.collectedEnterElements[n];re(r,Nd)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let n=[];try{t=this._flushAnimations(n,e)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++){let r=this.collectedLeaveElements[n];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){let n=this._whenQuietFns;this._whenQuietFns=[],t.length?Ge(t).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(e){throw Zm(e)}_flushAnimations(e,t){let n=new ln,r=[],o=new Map,a=[],s=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(H=>{d.add(H);let L=this.driver.query(H,Id,!0);for(let j=0;j<L.length;j++)d.add(L[j])});let h=this.bodyNode,_=Array.from(this.statesByElement.keys()),T=Zc(_,this.collectedEnterElements),f=new Map,u=0;T.forEach((H,L)=>{let j=ru+u++;f.set(L,j),H.forEach(G=>re(G,j))});let p=[],m=new Set,g=new Set;for(let H=0;H<this.collectedLeaveElements.length;H++){let L=this.collectedLeaveElements[H],j=L[se];j&&j.setForRemoval&&(p.push(L),m.add(L),j.hasAnimation?this.driver.query(L,Rd,!0).forEach(G=>m.add(G)):g.add(L))}let S=new Map,b=Zc(_,Array.from(m));b.forEach((H,L)=>{let j=Uo+u++;S.set(L,j),H.forEach(G=>re(G,j))}),e.push(()=>{T.forEach((H,L)=>{let j=f.get(L);H.forEach(G=>Oi(G,j))}),b.forEach((H,L)=>{let j=S.get(L);H.forEach(G=>Oi(G,j))}),p.forEach(H=>{this.processLeaveNode(H)})});let x=[],k=[];for(let H=this._namespaceList.length-1;H>=0;H--)this._namespaceList[H].drainQueuedTransitions(t).forEach(j=>{let G=j.player,gt=j.element;if(x.push(G),this.collectedEnterElements.length){let W=gt[se];if(W&&W.setForMove){if(W.previousTriggersValues&&W.previousTriggersValues.has(j.triggerName)){let yt=W.previousTriggersValues.get(j.triggerName),Dt=this.statesByElement.get(j.element);if(Dt&&Dt.has(j.triggerName)){let le=Dt.get(j.triggerName);le.value=yt,Dt.set(j.triggerName,le)}}G.destroy();return}}let It=!h||!this.driver.containsElement(h,gt),bt=S.get(gt),wt=f.get(gt),w=this._buildInstruction(j,n,wt,bt,It);if(w.errors&&w.errors.length){k.push(w);return}if(It){G.onStart(()=>li(gt,w.fromStyles)),G.onDestroy(()=>_e(gt,w.toStyles)),r.push(G);return}if(j.isFallbackTransition){G.onStart(()=>li(gt,w.fromStyles)),G.onDestroy(()=>_e(gt,w.toStyles)),r.push(G);return}let Y=[];w.timelines.forEach(W=>{W.stretchStartingKeyframe=!0,this.disabledNodes.has(W.element)||Y.push(W)}),w.timelines=Y,n.append(gt,w.timelines);let At={instruction:w,player:G,element:gt};a.push(At),w.queriedElements.forEach(W=>Qt(s,W,[]).push(G)),w.preStyleProps.forEach((W,yt)=>{if(W.size){let Dt=l.get(yt);Dt||l.set(yt,Dt=new Set),W.forEach((le,Rt)=>Dt.add(Rt))}}),w.postStyleProps.forEach((W,yt)=>{let Dt=c.get(yt);Dt||c.set(yt,Dt=new Set),W.forEach((le,Rt)=>Dt.add(Rt))})});if(k.length){let H=[];k.forEach(L=>{H.push(Jm(L.triggerName,L.errors))}),x.forEach(L=>L.destroy()),this.reportError(H)}let F=new Map,$=new Map;a.forEach(H=>{let L=H.element;n.has(L)&&($.set(L,L),this._beforeAnimationBuild(H.player.namespaceId,H.instruction,F))}),r.forEach(H=>{let L=H.element;this._getPreviousPlayers(L,!1,H.namespaceId,H.triggerName,null).forEach(G=>{Qt(F,L,[]).push(G),G.destroy()})});let U=p.filter(H=>Jc(H,l,c)),ct=new Map;Xc(ct,this.driver,g,c,de).forEach(H=>{Jc(H,l,c)&&U.push(H)});let Bt=new Map;T.forEach((H,L)=>{Xc(Bt,this.driver,new Set(H),l,Pn)}),U.forEach(H=>{let L=ct.get(H),j=Bt.get(H);ct.set(H,new Map([...L?.entries()??[],...j?.entries()??[]]))});let Tt=[],xe=[],we={};a.forEach(H=>{let{element:L,player:j,instruction:G}=H;if(n.has(L)){if(d.has(L)){j.onDestroy(()=>_e(L,G.toStyles)),j.disabled=!0,j.overrideTotalTime(G.totalTime),r.push(j);return}let gt=we;if($.size>1){let bt=L,wt=[];for(;bt=bt.parentNode;){let w=$.get(bt);if(w){gt=w;break}wt.push(bt)}wt.forEach(w=>$.set(w,gt))}let It=this._buildAnimation(j.namespaceId,G,F,o,Bt,ct);if(j.setRealPlayer(It),gt===we)Tt.push(j);else{let bt=this.playersByElement.get(gt);bt&&bt.length&&(j.parentPlayer=Ge(bt)),r.push(j)}}else li(L,G.fromStyles),j.onDestroy(()=>_e(L,G.toStyles)),xe.push(j),d.has(L)&&r.push(j)}),xe.forEach(H=>{let L=o.get(H.element);if(L&&L.length){let j=Ge(L);H.setRealPlayer(j)}}),r.forEach(H=>{H.parentPlayer?H.syncPlayerEvents(H.parentPlayer):H.destroy()});for(let H=0;H<p.length;H++){let L=p[H],j=L[se];if(Oi(L,Uo),j&&j.hasAnimation)continue;let G=[];if(s.size){let It=s.get(L);It&&It.length&&G.push(...It);let bt=this.driver.query(L,qo,!0);for(let wt=0;wt<bt.length;wt++){let w=s.get(bt[wt]);w&&w.length&&G.push(...w)}}let gt=G.filter(It=>!It.destroyed);gt.length?$d(this,L,gt):this.processLeaveNode(L)}return p.length=0,Tt.forEach(H=>{this.players.push(H),H.onDone(()=>{H.destroy();let L=this.players.indexOf(H);this.players.splice(L,1)}),H.play()}),Tt}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,o){let a=[];if(t){let s=this.playersByQueriedElement.get(e);s&&(a=s)}else{let s=this.playersByElement.get(e);if(s){let l=!o||o==sn;s.forEach(c=>{c.queued||!l&&c.triggerName!=r||a.push(c)})}}return(n||r)&&(a=a.filter(s=>!(n&&n!=s.namespaceId||r&&r!=s.triggerName))),a}_beforeAnimationBuild(e,t,n){let r=t.triggerName,o=t.element,a=t.isRemovalTransition?void 0:e,s=t.isRemovalTransition?void 0:r;for(let l of t.timelines){let c=l.element,d=c!==o,h=Qt(n,c,[]);this._getPreviousPlayers(c,d,a,s,t.toState).forEach(T=>{let f=T.getRealPlayer();f.beforeDestroy&&f.beforeDestroy(),T.destroy(),h.push(T)})}li(o,t.fromStyles)}_buildAnimation(e,t,n,r,o,a){let s=t.triggerName,l=t.element,c=[],d=new Set,h=new Set,_=t.timelines.map(f=>{let u=f.element;d.add(u);let p=u[se];if(p&&p.removedBeforeQueried)return new gi(f.duration,f.delay);let m=u!==l,g=jd((n.get(u)||Fd).map(F=>F.getRealPlayer())).filter(F=>{let $=F;return $.element?$.element===u:!1}),S=o.get(u),b=a.get(u),x=tu(this._normalizer,f.keyframes,S,b),k=this._buildPlayer(f,x,g);if(f.subTimeline&&r&&h.add(u),m){let F=new un(e,s,u);F.setRealPlayer(k),c.push(F)}return k});c.forEach(f=>{Qt(this.playersByQueriedElement,f.element,[]).push(f),f.onDone(()=>Hd(this.playersByQueriedElement,f.element,f))}),d.forEach(f=>re(f,zc));let T=Ge(_);return T.onDestroy(()=>{d.forEach(f=>Oi(f,zc)),_e(l,t.toStyles)}),h.forEach(f=>{Qt(r,f,[]).push(T)}),T}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new gi(e.duration,e.delay)}},un=class{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new gi,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,n)=>{t.forEach(r=>ss(e,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Qt(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Hd(i,e,t){let n=i.get(e);if(n){if(n.length){let r=n.indexOf(t);n.splice(r,1)}n.length==0&&i.delete(e)}return n}function Ld(i){return i??null}function Dr(i){return i&&i.nodeType===1}function Bd(i){return i=="start"||i=="done"}function Yc(i,e){let t=i.style.display;return i.style.display=e??"none",t}function Xc(i,e,t,n,r){let o=[];t.forEach(l=>o.push(Yc(l)));let a=[];n.forEach((l,c)=>{let d=new Map;l.forEach(h=>{let _=e.computeStyle(c,h,r);d.set(h,_),(!_||_.length==0)&&(c[se]=Od,a.push(c))}),i.set(c,d)});let s=0;return t.forEach(l=>Yc(l,o[s++])),a}function Zc(i,e){let t=new Map;if(i.forEach(s=>t.set(s,[])),e.length==0)return t;let n=1,r=new Set(e),o=new Map;function a(s){if(!s)return n;let l=o.get(s);if(l)return l;let c=s.parentNode;return t.has(c)?l=c:r.has(c)?l=n:l=a(c),o.set(s,l),l}return e.forEach(s=>{let l=a(s);l!==n&&t.get(l).push(s)}),t}function re(i,e){i.classList?.add(e)}function Oi(i,e){i.classList?.remove(e)}function $d(i,e,t){Ge(t).onDone(()=>i.processLeaveNode(e))}function jd(i){let e=[];return pu(i,e),e}function pu(i,e){for(let t=0;t<i.length;t++){let n=i[t];n instanceof vo?pu(n.players,e):e.push(n)}}function Vd(i,e){let t=Object.keys(i),n=Object.keys(e);if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++){let o=t[r];if(!e.hasOwnProperty(o)||i[o]!==e[o])return!1}return!0}function Jc(i,e,t){let n=t.get(i);if(!n)return!1;let r=e.get(i);return r?n.forEach(o=>r.add(o)):e.set(i,n),t.delete(i),!0}var Hi=class{constructor(e,t,n){this._driver=t,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new ns(e.body,t,n),this._timelineEngine=new es(e.body,t,n),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,n,r,o){let a=e+"-"+r,s=this._triggerCache[a];if(!s){let l=[],c=[],d=au(this._driver,o,l,c);if(l.length)throw Vm(r,l);c.length&&void 0,s=Dd(r,d,this._normalizer),this._triggerCache[a]=s}this._transitionEngine.registerTrigger(t,r,s)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n){this._transitionEngine.removeNode(e,t,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if(n.charAt(0)=="@"){let[o,a]=jc(n),s=r;this._timelineEngine.command(o,t,a,s)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,o){if(n.charAt(0)=="@"){let[a,s]=jc(n);return this._timelineEngine.listen(a,t,s,o)}return this._transitionEngine.listen(e,t,n,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function zd(i,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=zo(e[0]),e.length>1&&(n=zo(e[e.length-1]))):e instanceof Map&&(t=zo(e)),t||n?new rs(i,t,n):null}var rs=class i{static{this.initialStylesByElement=new WeakMap}constructor(e,t,n){this._element=e,this._startStyles=t,this._endStyles=n,this._state=0;let r=i.initialStylesByElement.get(e);r||i.initialStylesByElement.set(e,r=new Map),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&_e(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(_e(this._element,this._initialStyles),this._endStyles&&(_e(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(li(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(li(this._element,this._endStyles),this._endStyles=null),_e(this._element,this._initialStyles),this._state=3)}};function zo(i){let e=null;return i.forEach((t,n)=>{Ud(n)&&(e=e||new Map,e.set(n,t))}),e}function Ud(i){return i==="display"||i==="position"}var Hr=class{constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(n=>{t.push(Object.fromEntries(n))}),t}_triggerWebAnimation(e,t,n){return e.animate(this._convertKeyframesToObject(t),n)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{r!=="offset"&&e.set(r,this._finished?n:ps(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},Lr=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return eu(e,t)}getParentElement(e){return ls(e)}query(e,t,n){return iu(e,t,n)}computeStyle(e,t,n){return ps(e,t)}animate(e,t,n,r,o,a=[]){let s=r==0?"both":"forwards",l={duration:n,delay:r,fill:s};o&&(l.easing=o);let c=new Map,d=a.filter(T=>T instanceof Hr);ud(n,r)&&d.forEach(T=>{T.currentSnapshot.forEach((f,u)=>c.set(u,f))});let h=ad(t).map(T=>new Map(T));h=pd(e,h,c);let _=zd(e,h);return new Hr(e,h,l,_)}};var kr="@",mu="@.disabled",Br=class{constructor(e,t,n,r){this.namespaceId=e,this.delegate=t,this.engine=n,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,r=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,n){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==kr&&t==mu?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},os=class extends Br{constructor(e,t,n,r,o){super(t,n,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==kr?t.charAt(1)=="."&&t==mu?(n=n===void 0?!0:!!n,this.disableAnimations(e,n)):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if(t.charAt(0)==kr){let r=qd(e),o=t.slice(1),a="";return o.charAt(0)!=kr&&([o,a]=Kd(o)),this.engine.listen(this.namespaceId,r,o,a,s=>{let l=s._data||-1;this.factory.scheduleListenerCallback(l,n,s)})}return this.delegate.listen(e,t,n)}};function qd(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}function Kd(i){let e=i.indexOf("."),t=i.substring(0,e),n=i.slice(e+1);return[t,n]}var $r=class{constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(r,o)=>{o?.removeChild(null,r)}}createRenderer(e,t){let n="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let c=this._rendererCache,d=c.get(r);if(!d){let h=()=>c.delete(r);d=new Br(n,r,this.engine,h),c.set(r,d)}return d}let o=t.id,a=t.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);let s=c=>{Array.isArray(c)?c.forEach(s):this.engine.registerTrigger(o,a,e,c.name,c)};return t.data.animation.forEach(s),new os(this,a,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(n));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[a,s]=o;a(s)}),this._animationCallbacksBuffer=[]})}),r.push([t,n])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var Wd=(()=>{class i extends Hi{constructor(t,n,r){super(t,n,r)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(n){return new(n||i)(E(bn),E(ci),E(ui))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac})}}return i})();function Qd(){return new Pr}function Yd(i,e,t){return new $r(i,e,t)}var du=[{provide:ui,useFactory:Qd},{provide:Hi,useClass:Wd},{provide:ta,useFactory:Yd,deps:[fa,Hi,mi]}],ds=[{provide:ci,useFactory:()=>new Lr},{provide:eo,useValue:"BrowserAnimations"},...du],fu=[{provide:ci,useClass:cs},{provide:eo,useValue:"NoopAnimations"},...du],hu=(()=>{class i{static withConfig(t){return{ngModule:i,providers:t.disableAnimations?fu:ds}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=pe({type:i})}static{this.\u0275inj=ue({providers:ds,imports:[Tn]})}}return i})();function gu(){return ea("NgEagerAnimations"),[...ds]}function yu(){return[...fu]}var mn="PERFORM_ACTION",Xd="REFRESH",Eu="RESET",Tu="ROLLBACK",Au="COMMIT",xu="SWEEP",wu="TOGGLE_ACTION",Zd="SET_ACTIONS_ACTIVE",Du="JUMP_TO_STATE",ku="JUMP_TO_ACTION",xs="IMPORT_STATE",Mu="LOCK_CHANGES",Iu="PAUSE_RECORDING",Li=class{constructor(e,t){if(this.action=e,this.timestamp=t,this.type=mn,typeof e.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},fs=class{constructor(){this.type=Xd}},hs=class{constructor(e){this.timestamp=e,this.type=Eu}},gs=class{constructor(e){this.timestamp=e,this.type=Tu}},ys=class{constructor(e){this.timestamp=e,this.type=Au}},vs=class{constructor(){this.type=xu}},Ss=class{constructor(e){this.id=e,this.type=wu}};var _s=class{constructor(e){this.index=e,this.type=Du}},Cs=class{constructor(e){this.actionId=e,this.type=ku}},bs=class{constructor(e){this.nextLiftedState=e,this.type=xs}},Es=class{constructor(e){this.status=e,this.type=Mu}},Ts=class{constructor(e){this.status=e,this.type=Iu}};var Ur=new Pe("@ngrx/store-devtools Options"),vu=new Pe("@ngrx/store-devtools Initial Config");function Pu(){return null}var Jd="NgRx Store DevTools";function tf(i){let e={maxAge:!1,monitor:Pu,actionSanitizer:void 0,stateSanitizer:void 0,name:Jd,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},t=typeof i=="function"?i():i,n=t.logOnly?{pause:!0,export:!0,test:!0}:!1,r=t.features||n||e.features;r.import===!0&&(r.import="custom");let o=Object.assign({},e,{features:r},t);if(o.maxAge&&o.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${o.maxAge}`);return o}function Su(i,e){return i.filter(t=>e.indexOf(t)<0)}function Nu(i){let{computedStates:e,currentStateIndex:t}=i;if(t>=e.length){let{state:r}=e[e.length-1];return r}let{state:n}=e[t];return n}function pn(i){return new Li(i,+Date.now())}function ef(i,e){return Object.keys(e).reduce((t,n)=>{let r=Number(n);return t[r]=Ru(i,e[r],r),t},{})}function Ru(i,e,t){return O(D({},e),{action:i(e.action,t)})}function nf(i,e){return e.map((t,n)=>({state:Fu(i,t.state,n),error:t.error}))}function Fu(i,e,t){return i(e,t)}function Ou(i){return i.predicate||i.actionsSafelist||i.actionsBlocklist}function rf(i,e,t,n){let r=[],o={},a=[];return i.stagedActionIds.forEach((s,l)=>{let c=i.actionsById[s];c&&(l&&ws(i.computedStates[l],c,e,t,n)||(o[s]=c,r.push(s),a.push(i.computedStates[l])))}),O(D({},i),{stagedActionIds:r,actionsById:o,computedStates:a})}function ws(i,e,t,n,r){let o=t&&!t(i,e.action),a=n&&!e.action.type.match(n.map(l=>_u(l)).join("|")),s=r&&e.action.type.match(r.map(l=>_u(l)).join("|"));return o||a||s}function _u(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Hu(i){return{ngZone:i?vt(mi):null,connectInZone:i}}var qr=(()=>{class i extends An{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Qs(i)))(r||i)}})()}static{this.\u0275prov=V({token:i,factory:i.\u0275fac})}}return i})(),jr={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},As=new Pe("@ngrx/store-devtools Redux Devtools Extension"),Lu=(()=>{class i{constructor(t,n,r){this.config=n,this.dispatcher=r,this.zoneConfig=Hu(this.config.connectInZone),this.devtoolsExtension=t,this.createActionStreams()}notify(t,n){if(this.devtoolsExtension)if(t.type===mn){if(n.isLocked||n.isPaused)return;let r=Nu(n);if(Ou(this.config)&&ws(r,t,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let o=this.config.stateSanitizer?Fu(this.config.stateSanitizer,r,n.currentStateIndex):r,a=this.config.actionSanitizer?Ru(this.config.actionSanitizer,t,n.nextActionId):t;this.sendToReduxDevtools(()=>this.extensionConnection.send(a,o))}else{let r=O(D({},n),{stagedActionIds:n.stagedActionIds,actionsById:this.config.actionSanitizer?ef(this.config.actionSanitizer,n.actionsById):n.actionsById,computedStates:this.config.stateSanitizer?nf(this.config.stateSanitizer,n.computedStates):n.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,r,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new Jr(t=>{let n=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=n,n.init(),n.subscribe(r=>t.next(r)),n.unsubscribe}):Ls}createActionStreams(){let t=this.createChangesObservable().pipe(qs()),n=t.pipe(ut(c=>c.type===jr.START)),r=t.pipe(ut(c=>c.type===jr.STOP)),o=t.pipe(ut(c=>c.type===jr.DISPATCH),M(c=>this.unwrapAction(c.payload)),js(c=>c.type===xs?this.dispatcher.pipe(ut(d=>d.type===ao),$s(1e3),Ye(1e3),M(()=>c),z(()=>I(c)),Vt(1)):I(c))),s=t.pipe(ut(c=>c.type===jr.ACTION),M(c=>this.unwrapAction(c.payload))).pipe(Pt(r)),l=o.pipe(Pt(r));this.start$=n.pipe(Pt(r)),this.actions$=this.start$.pipe(N(()=>s)),this.liftedActions$=this.start$.pipe(N(()=>l))}unwrapAction(t){return typeof t=="string"?(0,eval)(`(${t})`):t}getExtensionConfig(t){let n={name:t.name,features:t.features,serialize:t.serialize,autoPause:t.autoPause??!1,trace:t.trace??!1,traceLimit:t.traceLimit??75};return t.maxAge!==!1&&(n.maxAge=t.maxAge),n}sendToReduxDevtools(t){try{t()}catch(n){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",n)}}static{this.\u0275fac=function(n){return new(n||i)(E(As),E(Ur),E(qr))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac})}}return i})(),zr={type:so},of="@ngrx/store-devtools/recompute",sf={type:of};function Bu(i,e,t,n,r){if(n)return{state:t,error:"Interrupted by an error up the chain"};let o=t,a;try{o=i(t,e)}catch(s){a=s.toString(),r.handleError(s)}return{state:o,error:a}}function Vr(i,e,t,n,r,o,a,s,l){if(e>=i.length&&i.length===o.length)return i;let c=i.slice(0,e),d=o.length-(l?1:0);for(let h=e;h<d;h++){let _=o[h],T=r[_].action,f=c[h-1],u=f?f.state:n,p=f?f.error:void 0,g=a.indexOf(_)>-1?f:Bu(t,T,u,p,s);c.push(g)}return l&&c.push(i[i.length-1]),c}function af(i,e){return{monitorState:e(void 0,{}),nextActionId:1,actionsById:{0:pn(zr)},stagedActionIds:[0],skippedActionIds:[],committedState:i,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function lf(i,e,t,n,r={}){return o=>(a,s)=>{let{monitorState:l,actionsById:c,nextActionId:d,stagedActionIds:h,skippedActionIds:_,committedState:T,currentStateIndex:f,computedStates:u,isLocked:p,isPaused:m}=a||e;a||(c=Object.create(c));function g(x){let k=x,F=h.slice(1,k+1);for(let $=0;$<F.length;$++)if(u[$+1].error){k=$,F=h.slice(1,k+1);break}else delete c[F[$]];_=_.filter($=>F.indexOf($)===-1),h=[0,...h.slice(k+1)],T=u[k].state,u=u.slice(k),f=f>k?f-k:0}function S(){c={0:pn(zr)},d=1,h=[0],_=[],T=u[f].state,f=0,u=[]}let b=0;switch(s.type){case Mu:{p=s.status,b=1/0;break}case Iu:{m=s.status,m?(h=[...h,d],c[d]=new Li({type:"@ngrx/devtools/pause"},+Date.now()),d++,b=h.length-1,u=u.concat(u[u.length-1]),f===h.length-2&&f++,b=1/0):S();break}case Eu:{c={0:pn(zr)},d=1,h=[0],_=[],T=i,f=0,u=[];break}case Au:{S();break}case Tu:{c={0:pn(zr)},d=1,h=[0],_=[],f=0,u=[];break}case wu:{let{id:x}=s;_.indexOf(x)===-1?_=[x,..._]:_=_.filter(F=>F!==x),b=h.indexOf(x);break}case Zd:{let{start:x,end:k,active:F}=s,$=[];for(let U=x;U<k;U++)$.push(U);F?_=Su(_,$):_=[..._,...$],b=h.indexOf(x);break}case Du:{f=s.index,b=1/0;break}case ku:{let x=h.indexOf(s.actionId);x!==-1&&(f=x),b=1/0;break}case xu:{h=Su(h,_),_=[],f=Math.min(f,h.length-1);break}case mn:{if(p)return a||e;if(m||a&&ws(a.computedStates[f],s,r.predicate,r.actionsSafelist,r.actionsBlocklist)){let k=u[u.length-1];u=[...u.slice(0,-1),Bu(o,s.action,k.state,k.error,t)],b=1/0;break}r.maxAge&&h.length===r.maxAge&&g(1),f===h.length-1&&f++;let x=d++;c[x]=s,h=[...h,x],b=h.length-1;break}case xs:{({monitorState:l,actionsById:c,nextActionId:d,stagedActionIds:h,skippedActionIds:_,committedState:T,currentStateIndex:f,computedStates:u,isLocked:p,isPaused:m}=s.nextLiftedState);break}case so:{b=0,r.maxAge&&h.length>r.maxAge&&(u=Vr(u,b,o,T,c,h,_,t,m),g(h.length-r.maxAge),b=1/0);break}case ao:{if(u.filter(k=>k.error).length>0)b=0,r.maxAge&&h.length>r.maxAge&&(u=Vr(u,b,o,T,c,h,_,t,m),g(h.length-r.maxAge),b=1/0);else{if(!m&&!p){f===h.length-1&&f++;let k=d++;c[k]=new Li(s,+Date.now()),h=[...h,k],b=h.length-1,u=Vr(u,b,o,T,c,h,_,t,m)}u=u.map(k=>O(D({},k),{state:o(k.state,sf)})),f=h.length-1,r.maxAge&&h.length>r.maxAge&&g(h.length-r.maxAge),b=1/0}break}default:{b=1/0;break}}return u=Vr(u,b,o,T,c,h,_,t,m),l=n(l,s),{monitorState:l,actionsById:c,nextActionId:d,stagedActionIds:h,skippedActionIds:_,committedState:T,currentStateIndex:f,computedStates:u,isLocked:p,isPaused:m}}}var Cu=(()=>{class i{constructor(t,n,r,o,a,s,l,c){let d=af(l,c.monitor),h=lf(l,d,s,c.monitor,c),_=to(to(n.asObservable().pipe(Ks(1)),o.actions$).pipe(M(pn)),t,o.liftedActions$).pipe(Bs(Hs)),T=r.pipe(M(h)),f=Hu(c.connectInZone),u=new Os(1);this.liftedStateSubscription=_.pipe(Gs(T),bu(f),Us(({state:g},[S,b])=>{let x=b(g,S);return S.type!==mn&&Ou(c)&&(x=rf(x,c.predicate,c.actionsSafelist,c.actionsBlocklist)),o.notify(S,x),{state:x,action:S}},{state:d,action:null})).subscribe(({state:g,action:S})=>{if(u.next(g),S.type===mn){let b=S.action;a.next(b)}}),this.extensionStartSubscription=o.start$.pipe(bu(f)).subscribe(()=>{this.refresh()});let p=u.asObservable(),m=p.pipe(M(Nu));Object.defineProperty(m,"state",{value:ba(m,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=t,this.liftedState=p,this.state=m}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(t){this.dispatcher.next(t)}next(t){this.dispatcher.next(t)}error(t){}complete(){}performAction(t){this.dispatch(new Li(t,+Date.now()))}refresh(){this.dispatch(new fs)}reset(){this.dispatch(new hs(+Date.now()))}rollback(){this.dispatch(new gs(+Date.now()))}commit(){this.dispatch(new ys(+Date.now()))}sweep(){this.dispatch(new vs)}toggleAction(t){this.dispatch(new Ss(t))}jumpToAction(t){this.dispatch(new Cs(t))}jumpToState(t){this.dispatch(new _s(t))}importState(t){this.dispatch(new bs(t))}lockChanges(t){this.dispatch(new Es(t))}pauseRecording(t){this.dispatch(new Ts(t))}static{this.\u0275fac=function(n){return new(n||i)(E(qr),E(An),E(Ta),E(Lu),E(xa),E(Ys),E(Ea),E(Ur))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac})}}return i})();function bu({ngZone:i,connectInZone:e}){return t=>e?new Jr(n=>t.subscribe({next:r=>i.run(()=>n.next(r)),error:r=>i.run(()=>n.error(r)),complete:()=>i.run(()=>n.complete())})):t}var cf=new Pe("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function uf(i,e){return!!i||e.monitor!==Pu}function pf(){let i="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[i]<"u"?window[i]:null}function mf(i={}){return Ws([Lu,qr,Cu,{provide:vu,useValue:i},{provide:cf,deps:[As,Ur],useFactory:uf},{provide:As,useFactory:pf},{provide:Ur,deps:[vu],useFactory:tf},{provide:wa,deps:[Cu],useFactory:df},{provide:Aa,useExisting:qr}])}function df(i){return i.state}var $u=(()=>{class i{static instrument(t={}){return{ngModule:i,providers:[mf(t)]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=pe({type:i})}static{this.\u0275inj=ue({})}}return i})();var ju={production:!0};var ff={processorTypes:[],controllerServiceTypes:[],prioritizerTypes:[],reportingTaskTypes:[],registryClientTypes:[],flowAnalysisRuleTypes:[],parameterProviderTypes:[],status:"pending"},Vu=mt(ff,B($n,i=>O(D({},i),{status:"loading"})),B(jn,(i,{response:e})=>O(D({},i),{processorTypes:e.processorTypes,controllerServiceTypes:e.controllerServiceTypes,prioritizerTypes:e.prioritizers,status:"success"})),B(Vn,(i,{response:e})=>O(D({},i),{controllerServiceTypes:e.controllerServiceTypes,reportingTaskTypes:e.reportingTaskTypes,registryClientTypes:e.registryClientTypes,parameterProviderTypes:e.parameterProviderTypes,flowAnalysisRuleTypes:e.flowAnalysisRuleTypes,status:"success"})),B(zn,(i,{response:e})=>O(D({},i),{processorTypes:e.processorTypes,controllerServiceTypes:e.controllerServiceTypes,reportingTaskTypes:e.reportingTaskTypes,parameterProviderTypes:e.parameterProviderTypes,flowAnalysisRuleTypes:e.flowAnalysisRuleTypes,status:"success"})),B(Un,(i,{response:e})=>O(D({},i),{processorTypes:e.processorTypes,controllerServiceTypes:e.controllerServiceTypes,reportingTaskTypes:e.reportingTaskTypes,parameterProviderTypes:e.parameterProviderTypes,flowAnalysisRuleTypes:e.flowAnalysisRuleTypes,status:"success"})));var hf={about:null,status:"pending"},zu=mt(hf,B(Xn,i=>O(D({},i),{status:"loading"})),B(Zn,(i,{response:e})=>O(D({},i),{about:e.about,status:"success"})));var Kr="status-history";var dn={statusHistory:{},status:"pending",loadedTimestamp:""},Uu=mt(dn,B(ii,qn,i=>O(D({},i),{status:"loading"})),B(Di,zi,(i,{response:e})=>O(D({},i),{status:"success",loadedTimestamp:e.statusHistory.statusHistory.generated,statusHistory:e.statusHistory})),B(Ui,i=>O(D({},i),{status:"error"})),B(Hl,()=>D({},dn)),B(Kn,Gn,()=>D({},dn)));var qu={setEnableRequest:{enable:!0,currentStep:lt.Pending,scope:"SERVICE_ONLY"},controllerService:null,status:"pending"},Ku=mt(qu,B(mc,()=>D({},qu)),B(dc,(i,{request:e})=>O(D({},i),{controllerService:e.controllerService})),B(cr,(i,{request:e})=>O(D({},i),{setEnableRequest:{enable:!0,currentStep:lt.EnableService,scope:e.scope}})),B(ur,i=>O(D({},i),{setEnableRequest:{enable:!1,currentStep:lt.StopReferencingComponents,scope:"SERVICE_AND_REFERENCING_COMPONENTS"}})),B(Xi,Ji,(i,{response:e})=>O(D({},i),{controllerService:e.controllerService,setEnableRequest:O(D({},i.setEnableRequest),{currentStep:e.currentStep})})),B(mr,Zi,(i,{response:e})=>ge(i,t=>{t.controllerService&&(t.controllerService.component.referencingComponents=e.referencingComponents),t.setEnableRequest.currentStep=e.currentStep})),B(ye,(i,{response:e})=>O(D({},i),{setEnableRequest:O(D({},i.setEnableRequest),{error:e}),status:"error"})));var Ds={systemDiagnostics:null,status:"pending",loadedTimestamp:""},Gu=mt(Ds,B(ki,Qn,i=>O(D({},i),{status:"loading"})),B(qi,Wn,(i,{response:e})=>O(D({},i),{status:"success",loadedTimestamp:e.systemDiagnostics.aggregateSnapshot.statsLastRefreshed,systemDiagnostics:e.systemDiagnostics})),B(Ki,Mi,i=>O(D({},i),{status:"error"})),B(Ll,()=>D({},Ds)),B(Yn,()=>D({},Ds)));var Gr="componentState";var Wu={componentName:null,componentUri:null,componentState:null,canClear:null,status:"pending"},Qu=mt(Wu,B(rr,(i,{request:e})=>O(D({},i),{componentName:e.componentName,componentUri:e.componentUri,canClear:e.canClear,status:"loading"})),B(Yi,sr,(i,{response:e})=>O(D({},i),{status:"success",componentState:e.componentState})),B(ar,()=>D({},Wu)));var Yu={bannerErrors:{},fullScreenError:null,routedToFullScreenError:!1},Xu=mt(Yu,B(Jt,(i,{errorDetail:e})=>O(D({},i),{fullScreenError:e})),B(Ee,(i,{errorContext:e})=>ge(i,t=>{t.bannerErrors===null&&(t.bannerErrors={}),t.bannerErrors[e.context]||(t.bannerErrors[e.context]=[]),t.bannerErrors[e.context].push(...e.errors)})),B(Na,(i,{context:e})=>ge(i,t=>{t.bannerErrors&&t.bannerErrors[e]&&delete t.bannerErrors[e]})),B(In,(i,{routedToFullScreenError:e})=>O(D({},i),{routedToFullScreenError:e})),B(Ra,()=>D({},Yu)));var gf={disconnectionAcknowledged:!1,connectedStateChanged:!1,clusterSummary:null,searchResults:null,status:"pending"},Zu=mt(gf,B(Gi,i=>O(D({},i),{status:"loading"})),B(tr,(i,{response:e})=>O(D({},i),{clusterSummary:e.clusterSummary,status:"success"})),B(er,(i,{response:e})=>O(D({},i),{searchResults:e})),B(ni,i=>O(D({},i),{connectedStateChanged:!0})),B(Ul,i=>O(D({},i),{connectedStateChanged:!1})),B(Wi,(i,{disconnectionAcknowledged:e})=>O(D({},i),{disconnectionAcknowledged:e})));var yf={loginConfiguration:null,status:"pending"},Ju=mt(yf,B(Cr,i=>O(D({},i),{status:"loading"})),B(qe,(i,{response:e})=>O(D({},i),{loginConfiguration:e.loginConfiguration,status:"success"})));var tp={results:[],status:"pending",requestContext:null,activeRequest:null,configurationAnalysis:null,attributes:null},ep=mt(tp,B(Ri,(i,{response:e})=>ge(i,t=>{t.status="loading",t.configurationAnalysis=e.configurationAnalysis,t.requestContext=e.requestContext,e.configurationAnalysis.supportsVerification&&(t.attributes=e.configurationAnalysis.referencedAttributes)})),B(Pi,(i,{response:e})=>O(D({},i),{configurationAnalysis:e.configurationAnalysis,requestContext:e.requestContext})),B(nn,en,(i,{response:e})=>O(D({},i),{activeRequest:e.request,results:e.request.results||[]})),B(yr,i=>O(D({},i),{activeRequest:null,status:"success"})),B(yc,i=>O(D({},tp),{attributes:i.attributes})));var vf={backNavigations:[]},ip=mt(vf,B(br,(i,{backNavigation:e})=>ge(i,t=>{if(t.backNavigations.length>0){let n=t.backNavigations[t.backNavigations.length-1];Sf(n.route,e.route)&&t.backNavigations.push(e)}else t.backNavigations.push(e)})),B(Er,(i,{url:e})=>ge(i,t=>{for(;t.backNavigations.length>0;){let n=t.backNavigations[t.backNavigations.length-1];if(!e.startsWith(n.routeBoundary.join("/")))t.backNavigations.pop();else break}})));function Sf(i,e){if(i.length!==e.length)return!0;for(let t=0;t<i.length;t++)if(i[t]!==e[t])return!0;return!1}var _f={bannerText:null,status:"pending"},np=mt(_f,B(ir,i=>O(D({},i),{status:"loading"})),B(nr,(i,{response:e})=>O(D({},i),{bannerText:e.bannerText,status:"success"})));var Cf={documentVisibility:rn.Visible,changedTimestamp:Date.now()},rp=mt(Cf,B(Tr,(i,{change:e})=>O(D({},i),{documentVisibility:e.documentVisibility,changedTimestamp:e.changedTimestamp})));var op={[bl]:_l,[Ml]:Xu,[Pa]:Pc,[Fl]:Vu,[Ec]:zu,[Ql]:np,[Gl]:ip,[Bl]:Nc,[Fa]:Ju,[Kr]:Uu,[pc]:Ku,[wc]:Gu,[Gr]:Qu,[Oc]:rp,[Kl]:Zu,[cc]:ep};var sp=(()=>{class i{constructor(t,n,r,o,a,s){this.actions$=t,this.store=n,this.router=r,this.userService=o,this.authService=a,this.errorHelper=s,this.loadCurrentUser$=R(()=>this.actions$.pipe(P(lo),N(()=>K(this.userService.getUser().pipe(M(l=>wn({response:{user:l}})),z(l=>I(this.errorHelper.fullScreenError(l)))))))),this.startCurrentUserPolling$=R(()=>this.actions$.pipe(P(ka),N(()=>Ie(3e4,Me).pipe(Pt(this.actions$.pipe(P(Dn))))),N(()=>I(lo())))),this.navigateToLogIn$=R(()=>this.actions$.pipe(P(kn),it(()=>{this.router.navigate(["/login"])})),{dispatch:!1}),this.logout$=R(()=>this.actions$.pipe(P(Ia),N(()=>K(this.authService.logout()).pipe(M(()=>co()),z(l=>I(this.errorHelper.fullScreenError(l))))))),this.navigateToLogOut$=R(()=>this.actions$.pipe(P(co),_t(()=>this.store.select(Oa)),it(([,l])=>{l&&(window.location.href=l)})),{dispatch:!1})}static{this.\u0275fac=function(n){return new(n||i)(E(pt),E(et),E(Oe),E(_r),E(He),E(dt))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac})}}return i})();var ap=(i,e)=>{let t=vt(et);return e(i).pipe(z(n=>{if(n instanceof En&&n.status===401)return Qe([t.select(Mn).pipe(Vt(1),it(()=>t.dispatch(Ma()))),t.select(hi).pipe(Vt(1)),t.select(Il).pipe(Vt(1),it(()=>t.dispatch(In({routedToFullScreenError:!0}))))]).pipe(N(([r,o,a])=>(r.status==="pending"&&o?.loginSupported&&!a?t.dispatch(kn()):t.dispatch(Jt({errorDetail:{title:"Unauthorized",message:"Your session has expired. Please navigate home to log in again."}})),yn)));throw n}))};var lp=(()=>{class i{constructor(t,n,r){this.actions$=t,this.extensionTypesService=n,this.errorHelper=r,this.loadExtensionTypesForCanvas$=R(()=>this.actions$.pipe(P($n),N(()=>Qe([this.extensionTypesService.getProcessorTypes(),this.extensionTypesService.getControllerServiceTypes(),this.extensionTypesService.getPrioritizers()]).pipe(M(([o,a,s])=>jn({response:{processorTypes:o.processorTypes,controllerServiceTypes:a.controllerServiceTypes,prioritizers:s.prioritizerTypes}})),z(o=>I(wi({error:o}))))))),this.loadExtensionTypesForSettings$=R(()=>this.actions$.pipe(P(Pl),N(()=>Qe([this.extensionTypesService.getControllerServiceTypes(),this.extensionTypesService.getReportingTaskTypes(),this.extensionTypesService.getRegistryClientTypes(),this.extensionTypesService.getParameterProviderTypes(),this.extensionTypesService.getFlowAnalysisRuleTypes()]).pipe(M(([o,a,s,l,c])=>Vn({response:{controllerServiceTypes:o.controllerServiceTypes,reportingTaskTypes:a.reportingTaskTypes,registryClientTypes:s.flowRegistryClientTypes,parameterProviderTypes:l.parameterProviderTypes,flowAnalysisRuleTypes:c.flowAnalysisRuleTypes}})),z(o=>I(wi({error:o}))))))),this.loadExtensionTypesForPolicies$=R(()=>this.actions$.pipe(P(Nl),N(()=>Qe([this.extensionTypesService.getProcessorTypes(),this.extensionTypesService.getControllerServiceTypes(),this.extensionTypesService.getReportingTaskTypes(),this.extensionTypesService.getParameterProviderTypes(),this.extensionTypesService.getFlowAnalysisRuleTypes()]).pipe(M(([o,a,s,l,c])=>zn({response:{processorTypes:o.processorTypes,controllerServiceTypes:a.controllerServiceTypes,reportingTaskTypes:s.reportingTaskTypes,parameterProviderTypes:l.parameterProviderTypes,flowAnalysisRuleTypes:c.flowAnalysisRuleTypes}})),z(o=>I(wi({error:o}))))))),this.loadExtensionTypesForDocumentation$=R(()=>this.actions$.pipe(P(Rl),N(()=>Qe([this.extensionTypesService.getProcessorTypes(),this.extensionTypesService.getControllerServiceTypes(),this.extensionTypesService.getReportingTaskTypes(),this.extensionTypesService.getParameterProviderTypes(),this.extensionTypesService.getFlowAnalysisRuleTypes()]).pipe(M(([o,a,s,l,c])=>Un({response:{processorTypes:o.processorTypes,controllerServiceTypes:a.controllerServiceTypes,reportingTaskTypes:s.reportingTaskTypes,parameterProviderTypes:l.parameterProviderTypes,flowAnalysisRuleTypes:c.flowAnalysisRuleTypes}})),z(o=>I(wi({error:o}))))))),this.extensionTypesApiError$=R(()=>this.actions$.pipe(P(wi),M(o=>o.error),N(o=>I(ht({error:this.errorHelper.getErrorString(o,"Failed to load extension types. You may not be able to create new Processors, Controller Services, Reporting Tasks, Parameter Providers, or Flow Analysis Rules.")})))))}static{this.\u0275fac=function(n){return new(n||i)(E(pt),E(fc),E(dt))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac})}}return i})();var cp=(i,e)=>{let t=vt(et);return e(i).pipe(z(n=>{if(n instanceof En&&n.status===0)return t.dispatch(Dn()),t.dispatch(Ic()),t.dispatch(Jn()),t.dispatch(Jt({errorDetail:{title:"Unable to communicate with NiFi",message:"Please ensure the application is running and check the logs for any errors."}})),yn;throw n}))};var up=(()=>{class i{static{this.API="../nifi-api"}constructor(t){this.httpClient=t}getAbout(){return this.httpClient.get(`${i.API}/flow/about`)}static{this.\u0275fac=function(n){return new(n||i)(E(Ht))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Tf(i,e){if(i&1&&(v(0,"div",9),C(1),y()),i&2){let t=q();A(),St(t.buildTimestamp)}}function Af(i,e){if(i&1&&(v(0,"div",9),C(1),y()),i&2){let t=q();A(),rt("Tagged ",t.buildTag,"")}}function xf(i,e){if(i&1&&(v(0,"div",9),C(1),y()),i&2){let t=q();A(),di("From ",t.buildRevision," on branch ",t.buildBranch,"")}}function wf(i,e){if(i&1&&(v(0,"div",5),st(1,"img",6),y(),v(2,"div",7)(3,"div",8),C(4),y(),Q(5,Tf,2,1,"div",9)(6,Af,2,1,"div",9)(7,xf,2,2,"div",9),y(),v(8,"div"),C(9," Apache NiFi is a framework to support highly scalable and flexible dataflows. It can be run on laptops up through clusters of enterprise class servers. Instead of dictating a particular dataflow or behavior it empowers you to design your own optimal dataflow tailored to your specific environment. "),y()),i&2){let t=e;A(4),St(t.version),A(),X(t.buildTimestamp?5:-1),A(),X(t.buildTag&&t.buildTag!=="HEAD"?6:-1),A(),X(t.buildRevision?7:-1)}}var pp=(()=>{class i extends Be{constructor(t){super(),this.store=t,this.about$=this.store.select(Tc)}static{this.\u0275fac=function(n){return new(n||i)(tt(et))}}static{this.\u0275cmp=xt({type:i,selectors:[["about"]],standalone:!0,features:[Xt,Nt],decls:10,vars:3,consts:[[1,"about-dialog"],["mat-dialog-title",""],[1,"flex","flex-col","justify-between","gap-y-5"],["align","end"],["mat-button","","mat-dialog-close",""],[1,"flex","justify-center"],["ngSrc","assets/icons/nifi-logo-about.svg","priority","","width","300","height","128","alt","NiFi Logo"],[1,"flex","flex-col","gap-y-1"],[1,"font-bold"],[1,"text-sm","ml-2"]],template:function(n,r){if(n&1&&(v(0,"div",0)(1,"h2",1),C(2,"About"),y(),v(3,"mat-dialog-content")(4,"div",2),Q(5,wf,10,4),Ft(6,"async"),y()(),v(7,"mat-dialog-actions",3)(8,"button",4),C(9,"Close"),y()()()),n&2){let o;A(5),X((o=Ot(6,1,r.about$))?5:-1,o)}},dependencies:[he,Ut,fe,te,ee,ne,ie,Rn,lr,me,$e,Ai,Hn,ua],styles:[".about-dialog[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px;--mdc-filled-button-container-height: 32px;--mdc-protected-button-container-height: 32px;--mdc-outlined-button-container-height: 32px;--mat-text-button-touch-target-display: block;--mat-filled-button-touch-target-display: block;--mat-protected-button-touch-target-display: block;--mat-outlined-button-touch-target-display: block}"]})}}return i})();var mp=(()=>{class i{constructor(t,n,r,o){this.actions$=t,this.aboutService=n,this.dialog=r,this.errorHelper=o,this.loadAbout$=R(()=>this.actions$.pipe(P(Xn),N(()=>K(this.aboutService.getAbout().pipe(M(a=>Zn({response:a})),z(a=>I(ht({error:this.errorHelper.getErrorString(a)})))))))),this.openAboutDialog$=R(()=>this.actions$.pipe(P(Vl),it(()=>{this.dialog.open(pp,O(D({},Ve),{autoFocus:!1}))})),{dispatch:!1})}static{this.\u0275fac=function(n){return new(n||i)(E(pt),E(up),E(Lt),E(dt))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac})}}return i})();var Wr=(()=>{class i{static{this.API="../nifi-api"}constructor(t,n){this.httpClient=t,this.client=n}getComponentStatusHistory(t,n){let r;switch(t){case Vi.Processor:r="processors";break;case Vi.ProcessGroup:r="process-groups";break;case Vi.Connection:r="connections";break;case Vi.RemoteProcessGroup:r="remote-process-groups";break;default:r="processors"}return this.httpClient.get(`${i.API}/flow/${r}/${encodeURIComponent(n)}/status/history`)}getNodeStatusHistory(){return this.httpClient.get(`${i.API}/controller/status/history`)}static{this.\u0275fac=function(n){return new(n||i)(E(Ht),E(ze))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Is=xn(Kr),Qr=be(Is,i=>i.statusHistory),fp=be(Qr,i=>i.statusHistory?.componentDetails),hp=be(Qr,i=>i.statusHistory?.fieldDescriptors);var ae={nifiInstanceId:"nifi-instance-id",nifiInstanceLabel:"NiFi"};var gp=(()=>{class i{set instances(t){this._instances=t,this._selectedDescriptor&&this.updateChart(this._selectedDescriptor)}get instances(){return this._instances}set selectedFieldDescriptor(t){this._selectedDescriptor!==t&&(this.brushSelection=null,this._selectedDescriptor=t,t&&this.updateChart(t))}get selectedFieldDescriptor(){return this._selectedDescriptor}set visibleInstances(t){this._visibleInstances=t,this._selectedDescriptor&&this.updateChart(this._selectedDescriptor)}get visibleInstances(){return this._visibleInstances}constructor(t){this.nifiCommon=t,this._selectedDescriptor=null,this._visibleInstances={},this.nodeStats=new Xe,this.clusterStats=new Xe,this.nodeStats$=new ce,this.clusterStats$=new ce,this.nodes=[],this.formatters={DURATION:n=>this.nifiCommon.formatDuration(n),COUNT:n=>n%1===0?this.nifiCommon.formatInteger(n):this.nifiCommon.formatFloat(n),DATA_SIZE:n=>this.nifiCommon.formatDataSize(n),FRACTION:n=>this.nifiCommon.formatFloat(n/1e6)},this.brushSelection=null,this.nodeStats$.pipe(Ye(20),Zt()).subscribe(n=>{this.nodeStats.next(n)}),this.clusterStats$.pipe(Ye(20),Zt()).subscribe(n=>{this.clusterStats.next(n)})}updateChart(t){let n={top:15,right:20,bottom:25,left:80},r=Cc(bc),o=this.instances.map(w=>w.label);r.domain(o);let a=this.instances.map(w=>({id:w.id,label:w.label,values:w.snapshots.map(Y=>({timestamp:Y.timestamp,value:Y.statusMetrics[t.field]})),visible:this._visibleInstances[w.id]})),s=w=>w.getMilliseconds()?Ue(":%S.%L")(w):w.getSeconds()?Ue(":%S")(w):w.getMinutes()||w.getHours()?Ue("%H:%M")(w):w.getDay()&&w.getDate()!==1?Ue("%a %d")(w):w.getDate()!==1?Ue("%b %d")(w):w.getMonth()?Ue("%B")(w):Ue("%Y")(w),l=document.getElementById("status-history-chart-container");l.replaceChildren(),l.setAttribute("height",this.getChartMinHeight()+"px");let c=l.clientWidth-n.left-n.right,d=l.clientHeight-n.top-n.bottom,h=Math.min(l.clientWidth,this.getChartMaxWidth());c>h&&(c=h);let _=this.getChartMaxHeight();d>_&&(d=_);let T=Ro().range([0,c]),f=Mo(T).ticks(5).tickFormat(s),u=No().range([d,0]),p=Io(u).tickFormat(this.formatters[t.formatter]),m=Fo().curve(Oo).x(w=>T(w.timestamp)).y(w=>u(w.value)),g=Fi("#status-history-chart-container").append("svg").attr("style","pointer-events: none;").attr("width",l.clientWidth).attr("height",l.clientHeight),S=g.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",c).attr("height",d),b=g.append("g").attr("transform","translate("+n.left+", "+n.top+")"),x=Se(a,w=>Se(w.values,Y=>Y.timestamp)),k=ve(a,w=>ve(w.values,Y=>Y.timestamp));T.domain([x,k]),u.domain([this.getMinValue(a),this.getMaxValue(a)]),b.append("g").attr("class","x axis").attr("transform","translate(0, "+d+")").call(f),b.append("g").attr("class","y axis").call(p).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").attr("text-anchor","end").text(t.label);let F=b.selectAll(".status").data(a).enter().append("g").attr("clip-path","url(#clip)").attr("class","status");F.append("path").attr("class",w=>"chart-line chart-line-"+w.id).attr("d",w=>m(w.values)).attr("stroke",w=>r(w.label)).classed("hidden",w=>w.visible===!1).append("title").text(w=>w.label),F.each((w,Y,At)=>{Fi(At[Y]).append("g").attr("class",function(){return"mark-group mark-group-"+w.id}).classed("hidden",function(yt){return yt.visible===!1}).selectAll("circle.mark").data(w.values).enter().append("circle").attr("style","pointer-events: all;").attr("class","mark").attr("cx",yt=>T(yt.timestamp)).attr("cy",yt=>u(yt.value)).attr("fill",()=>r(w.label)).attr("r",1.5).append("title").text(yt=>w.label+" -- "+this.formatters[t.formatter](yt.value))});let $=l.parentElement;$&&g.attr("width",$.clientWidth).attr("height",l.clientHeight),S.attr("width",c).attr("height",d),b.select(".x.axis").attr("transform","translate(0, "+d+")");let U=document.getElementById("status-history-chart-control-container");U.replaceChildren();let ct=U.clientHeight-n.top-n.bottom,Ct=Ro().range([0,c]),Bt=Mo(Ct).ticks(5).tickFormat(s),Tt=No().range([ct,0]),xe=Io(Tt).tickValues(u.domain()).tickFormat(this.formatters[t.formatter]),we=Fo().curve(Oo).x(function(w){return Ct(w.timestamp)}).y(function(w){return Tt(w.value)}),L=Fi("#status-history-chart-control-container").append("svg").attr("width",l.clientWidth).attr("height",U.clientHeight).append("g").attr("transform","translate("+n.left+", "+n.top+")");Ct.domain(T.domain()),Tt.domain(u.domain()),L.append("g").attr("class","x axis").attr("transform","translate(0, "+ct+")").call(Bt),L.append("g").attr("class","y axis").call(xe),L.selectAll(".status").data(a).enter().append("g").attr("class","status").append("path").attr("class",w=>"chart-line chart-line-"+w.id).attr("d",w=>we(w.values)).attr("stroke",w=>r(w.label)).classed("hidden",w=>this.visibleInstances[w.id]===!1).append("title").text(function(w){return w.label});let G=()=>{let w=T.domain(),Y=u.domain(),At=a.map(at=>{let jt=at.values.filter(We=>We.timestamp>=w[0].getTime()&&We.timestamp<=w[1]&&We.value>=Y[0]&&We.value<=Y[1]);return O(D({},at),{values:jt})}),W=At.filter(at=>at.id!==ae.nifiInstanceId&&at.visible&&at.values.length>0),yt=W.length===0?"NA":this.formatters[t.formatter](this.getMinValue(W)),Dt=W.length===0?"NA":this.formatters[t.formatter](this.getMeanValue(W)),le=W.length===0?"NA":this.formatters[t.formatter](this.getMaxValue(W));this.nodeStats$.next({min:yt,max:le,mean:Dt,nodes:W.map(at=>({id:at.id,label:at.label,color:r(at.label)}))});let Rt=At.filter(at=>at.id===ae.nifiInstanceId&&at.visible&&at.values.length>0),pi=Rt.length===0?"NA":this.formatters[t.formatter](this.getMinValue(Rt)),hn=Rt.length===0?"NA":this.formatters[t.formatter](this.getMeanValue(Rt)),gn=Rt.length===0?"NA":this.formatters[t.formatter](this.getMaxValue(Rt));this.clusterStats$.next({min:pi,max:gn,mean:hn,nodes:Rt.map(at=>({id:at.id,label:at.label,color:r(at.label)}))})},gt=(w,Y)=>{T.domain(w),u.domain(Y),F.selectAll(".chart-line").attr("d",At=>m(At.values)),F.selectAll("circle.mark").attr("cx",At=>T(At.timestamp)).attr("cy",At=>u(At.value)).attr("r",function(){return Po(wt.node())===null?1.5:4}),b.select(".x.axis").call(f),b.select(".y.axis").call(p)},It=()=>{this.brushSelection=Po(wt.node());let w,Y;if(this.brushSelection===null){let At=a.filter(W=>W.visible);At.length===0?Y=Tt.domain():Y=[Se(At,W=>Se(W.values,yt=>yt.value)),ve(At,W=>ve(W.values,yt=>yt.value))],w=Ct.domain()}else w=[this.brushSelection[0][0],this.brushSelection[1][0]].map(Ct.invert,Ct),Y=[this.brushSelection[1][1],this.brushSelection[0][1]].map(Tt.invert,Tt);gt(w,Y),G()},bt=_c().extent([[Ct.range()[0],Tt.range()[1]],[Ct.range()[1],Tt.range()[0]]]).on("brush",It),wt=L.append("g").attr("class","brush").on("click",It).call(bt);this.brushSelection&&(bt=bt.move(wt,this.brushSelection)),L.select("rect.selection").attr("style","pointer-events: all;").on("dblclick",()=>{if(this.brushSelection!==null){let w=Tt.range();bt.move(wt,[[this.brushSelection[0][0],w[1]],[this.brushSelection[1][0],w[0]]])}}),this.nodes=a.filter(w=>w.id!==ae.nifiInstanceId).sort((w,Y)=>w.label<Y.label?-1:w.label>Y.label?1:0),It()}getChartMinHeight(){let t=document.getElementById("status-history-chart-container"),n=document.getElementById("status-history-chart-control-container"),r=n.computedStyleMap().get("margin-top");return t.parentElement.clientHeight-n.clientHeight-parseInt(r.value,10)}getChartMaxHeight(){let t=document.getElementById("status-history-chart-control-container"),n=t.computedStyleMap().get("margin-top"),o=document.getElementsByClassName("status-history")[0].getElementsByClassName("status-history-dialog-content")[0],a=document.getElementsByClassName("selected-descriptor-container")[0],s=o.computedStyleMap();return document.body.getBoundingClientRect().height-t.clientHeight-a.clientHeight-parseInt(n.value,10)-parseInt(s.get("top")?.value)-parseInt(s.get("bottom")?.value)}getChartMaxWidth(){let t=document.getElementsByClassName("status-history")[0],r=t.getElementsByClassName("status-history-dialog-content")[0].computedStyleMap(),o=t.computedStyleMap();return document.body.getBoundingClientRect().width-t.clientWidth-parseInt(o.get("left")?.value,10)-parseInt(r.get("left")?.value)-parseInt(r.get("right")?.value)}getMinValue(t){return Se(t,n=>Se(n.values,r=>r.value))}getMaxValue(t){return ve(t,n=>ve(n.values,r=>r.value))}getMeanValue(t){let n=0;return ko(t,o=>(n+=o.values.length,ko(o.values,a=>a.value)))/n}ngOnDestroy(){this.nodeStats$.complete(),this.clusterStats$.complete()}static{this.\u0275fac=function(n){return new(n||i)(tt(qt))}}static{this.\u0275cmp=xt({type:i,selectors:[["status-history-chart"]],inputs:{instances:"instances",selectedFieldDescriptor:"selectedFieldDescriptor",visibleInstances:"visibleInstances"},outputs:{nodeStats:"nodeStats",clusterStats:"clusterStats"},standalone:!0,features:[Nt],decls:3,vars:0,consts:[["id","status-history-container",1,"flex-1","flex","flex-col","select-none"],["id","status-history-chart-container",1,"grow"],["id","status-history-chart-control-container"]],template:function(n,r){n&1&&(v(0,"div",0),st(1,"div",1)(2,"div",2),y())}})}}return i})();var vp=i=>({color:i});function Mf(i,e){if(i&1){let t=zt();v(0,"button",15),Et("click",function(){kt(t);let r=q(3);return Mt(r.maximize())}),st(1,"i",16),y()}}function If(i,e){if(i&1){let t=zt();v(0,"button",17),Et("click",function(){kt(t);let r=q(3);return Mt(r.minimize())}),st(1,"i",18),y()}}function Pf(i,e){if(i&1&&Q(0,Mf,2,0,"button",13)(1,If,2,0,"button",14),i&2){let t=q(2);X(t.dialogMaximized?1:0)}}function Nf(i,e){i&1&&(v(0,"div",8),st(1,"ngx-skeleton-loader",19),y())}function Rf(i,e){if(i&1&&(v(0,"div",23)(1,"div"),C(2),y(),v(3,"div",33),C(4),y()()),i&2){let t=q().$implicit;A(2),St(t.key),A(),ot("title",t.value),A(),rt(" ",t.value," ")}}function Ff(i,e){if(i&1&&Q(0,Rf,5,3,"div",23),i&2){let t=e.$implicit;X(t.key&&t.value?0:-1)}}function Of(i,e){if(i&1){let t=zt();v(0,"div",34)(1,"mat-checkbox",35),Et("change",function(r){kt(t);let o=q(7);return Mt(o.selectNode(r))}),y(),v(2,"mat-label",29),C(3),y()()}if(i&2){let t=q().$implicit,n=q(6);A(),ot("value",t.id)("checked",!!n.instanceVisibility[t.id]),A(),ot("ngStyle",ji(4,vp,n.getColor(n.nodeStats,t.id))),A(),St(t.label)}}function Hf(i,e){if(i&1&&Q(0,Of,4,6,"div",34),i&2){let t=e.$implicit;X(t.snapshots!=null&&t.snapshots.length?0:-1)}}function Lf(i,e){if(i&1&&(v(0,"div",23)(1,"div"),C(2,"Nodes"),y(),v(3,"div")(4,"div"),C(5,"Min / Max / Mean"),y(),v(6,"div",24),C(7),y()(),v(8,"div",27),Re(9,Hf,1,1,null,null,Ne),y()()),i&2){let t=q(5);A(7),Je(" ",t.nodeStats.min," / ",t.nodeStats.max," / ",t.nodeStats.mean," "),A(2),Fe(t.nodes)}}function Bf(i,e){if(i&1&&(v(0,"mat-option",37)(1,"span",39),C(2),y()()),i&2){let t=q().$implicit,n=q(6);ot("value",t)("tooltipComponentType",n.TextTip)("tooltipInputData",t.description)("delayClose",!1),A(2),St(t.label)}}function $f(i,e){if(i&1&&(v(0,"mat-option",38)(1,"span",39),C(2),y()()),i&2){let t=q().$implicit;ot("value",t),A(2),St(t.label)}}function jf(i,e){if(i&1&&Q(0,Bf,3,5,"mat-option",37)(1,$f,3,2,"mat-option",38),i&2){let t=e.$implicit;X(t.description?0:1)}}function Vf(i,e){if(i&1&&(v(0,"div",31)(1,"mat-form-field")(2,"mat-select",36),Re(3,jf,2,1,null,null,Ne),y()()()),i&2){let t=q(5);A(3),Fe(t.fieldDescriptors)}}function zf(i,e){if(i&1){let t=zt();v(0,"div",21)(1,"div",22),Re(2,Ff,1,1,null,null,Ne),v(4,"div",23)(5,"div"),C(6,"Start"),y(),v(7,"div",24),C(8),y()(),v(9,"div",23)(10,"div"),C(11,"End"),y(),v(12,"div",24),C(13),y()(),v(14,"div",23)(15,"div",25),C(16,"NiFi"),y(),v(17,"div",26)(18,"div"),C(19,"Min / Max / Mean"),y(),v(20,"div",24),C(21),y()(),v(22,"div",27)(23,"mat-checkbox",28),Et("change",function(r){kt(t);let o=q(4);return Mt(o.selectNode(r))}),y(),v(24,"mat-label",29),C(25,"NiFi"),y()()(),Q(26,Lf,11,3,"div",23),y(),v(27,"div",30),Q(28,Vf,5,0,"div",31),Ft(29,"async"),v(30,"status-history-chart",32),Et("nodeStats",function(r){kt(t);let o=q(4);return Mt(o.nodeStatsChanged(r))})("clusterStats",function(r){kt(t);let o=q(4);return Mt(o.clusterStatsChanged(r))}),y()()()}if(i&2){let t=q(4);A(2),Fe(t.details),A(6),rt(" ",t.minDate," "),A(5),rt(" ",t.maxDate," "),A(8),Je(" ",t.clusterStats.min," / ",t.clusterStats.max," / ",t.clusterStats.mean," "),A(2),ot("checked",!!t.instanceVisibility["nifi-instance-id"]),A(),ot("ngStyle",ji(14,vp,t.getColor(t.nodeStats,t.NIFI_NODE_CONFIG.nifiInstanceId))),A(2),X(t.nodes&&t.nodes.length>0?26:-1),A(2),X(Ot(29,12,t.fieldDescriptors$)?28:-1),A(2),ot("instances",t.instances)("visibleInstances",t.instanceVisibility)("selectedFieldDescriptor",t.selectedDescriptor)}}function Uf(i,e){if(i&1&&(Q(0,zf,31,16,"div",21),Ft(1,"async")),i&2){let t,n=q(3);X((t=Ot(1,1,n.componentDetails$))?0:-1,t)}}function qf(i,e){i&1&&(v(0,"div",20),C(1," Insufficient history, please try again later. "),y())}function Kf(i,e){if(i&1&&Q(0,Uf,2,3)(1,qf,2,0,"div",20),i&2){let t=q(2);X(t.instances.length>0&&t.fieldDescriptors.length>0?0:1)}}function Gf(i,e){if(i&1){let t=zt();v(0,"div",11)(1,"button",40),Et("click",function(){kt(t);let r=q(2);return Mt(r.refresh())}),st(2,"i",41),y(),v(3,"div"),C(4,"Last updated:"),y(),v(5,"div",24),C(6),y()()}if(i&2){let t=q();A(2),Ze("fa-spin",t.status==="loading"),A(4),rt(" ",t.loadedTimestamp," ")}}function Wf(i,e){if(i&1&&(v(0,"div",1)(1,"h2",2),C(2,"Status History"),y(),Q(3,Pf,2,1),y(),st(4,"context-error-banner",3),v(5,"div",4)(6,"mat-dialog-content",5)(7,"form",6)(8,"div",7),Q(9,Nf,2,0,"div",8)(10,Kf,2,1),y()()(),v(11,"mat-dialog-actions",9)(12,"div",10)(13,"div",8),Q(14,Gf,7,3,"div",11),y(),v(15,"div")(16,"button",12),C(17,"Close"),y()()()()()),i&2){let t=q();A(3),X(t.instances.length>0&&t.fieldDescriptors.length>0?3:-1),A(),ot("context",t.ErrorContextKey.STATUS_HISTORY),A(3),ot("formGroup",t.statusHistoryForm),A(2),X(t.isInitialLoading(e)?9:10),A(5),X(t.instances.length>0&&t.fieldDescriptors.length>0?14:-1)}}var Sp=(()=>{class i extends Be{constructor(t,n,r,o,a){super(),this.statusHistoryService=t,this.store=n,this.formBuilder=r,this.nifiCommon=o,this.dialogRequest=a,this.statusHistoryState$=this.store.select(Is),this.componentDetails$=this.store.select(fp),this.statusHistory$=this.store.select(Qr),this.fieldDescriptors$=this.store.select(hp),this.fieldDescriptors=[],this.dialogMaximized=!1,this.details=[],this.minDate="",this.maxDate="",this.nodeStats={max:"NA",min:"NA",mean:"NA",nodes:[]},this.clusterStats={max:"NA",min:"NA",mean:"NA",nodes:[]},this.nodes=[],this.instances=[],this.instanceVisibility={},this.selectedDescriptor=null,this.destroyRef=vt(Sn),this.Object=Object,this.TextTip=xi,this.NIFI_NODE_CONFIG=ae,this.ErrorContextKey=Kt,this.request=a,this.statusHistoryForm=this.formBuilder.group({fieldDescriptor:""})}ngOnInit(){this.statusHistory$.pipe(ut(t=>!!t),Zt(this.destroyRef)).subscribe(t=>{if(t){this.instances=[],t.statusHistory?.aggregateSnapshots?.length>1&&(this.instances.push({id:ae.nifiInstanceId,label:ae.nifiInstanceLabel,snapshots:t.statusHistory.aggregateSnapshots}),this.instanceVisibility[ae.nifiInstanceId]===void 0&&(this.instanceVisibility[ae.nifiInstanceId]=!0)),t.statusHistory?.nodeSnapshots&&t.statusHistory?.nodeSnapshots.length>1&&t.statusHistory.nodeSnapshots.forEach(o=>{this.instances.push({id:o.nodeId,label:`${o.address}:${o.apiPort}`,snapshots:o.statusSnapshots}),this.instanceVisibility[o.nodeId]===void 0&&(this.instanceVisibility[o.nodeId]=!0)}),this.nodes=this.instances.filter(o=>o.id!==ae.nifiInstanceId).sort((o,a)=>o.label<a.label?-1:o.label>a.label?1:0);let n=Se(this.instances,o=>Se(o.snapshots,a=>a.timestamp)),r=ve(this.instances,o=>ve(o.snapshots,a=>a.timestamp));this.minDate=this.nifiCommon.formatDateTime(new Date(n)),this.maxDate=this.nifiCommon.formatDateTime(new Date(r))}}),this.fieldDescriptors$.pipe(ut(t=>!!t),Vt(1)).subscribe(t=>{this.fieldDescriptors=t,this.statusHistoryForm.get("fieldDescriptor")?.setValue(t[0]),this.selectedDescriptor=t[0]}),this.componentDetails$.pipe(ft(),Vt(1)).subscribe(t=>{this.details=Object.entries(t).map(n=>({key:n[0],value:n[1]}))})}ngAfterViewInit(){this.statusHistoryForm.get("fieldDescriptor")?.valueChanges.pipe(Zt(this.destroyRef)).subscribe(t=>{this.instances.length>0&&(this.selectedDescriptor=t)})}maximize(){this.dialogMaximized=!0,this.resized()}minimize(){this.dialogMaximized=!1,this.resized()}isInitialLoading(t){return t.loadedTimestamp===dn.loadedTimestamp}refresh(){this.store.dispatch(ii({request:this.request}))}clusterStatsChanged(t){this.clusterStats=t}nodeStatsChanged(t){this.nodeStats=t}selectNode(t){let n=t.source.value,r=t.checked,o=Sc("path.chart-line-"+n),a=Fi("g.mark-group-"+n),s=a.classed("hidden");o.classed("hidden",()=>!s),a.classed("hidden",()=>!s),this.instanceVisibility=O(D({},this.instanceVisibility),{[n]:r})}resized(){this.selectedDescriptor&&(this.selectedDescriptor=D({},this.selectedDescriptor))}windowResized(){this.dialogMaximized&&this.resized()}getColor(t,n){if(t.nodes&&t.nodes.length>0){let r=t.nodes?.find(o=>o.id===n);if(r)return r.color}return"unset neutral-color"}static{this.\u0275fac=function(n){return new(n||i)(tt(Wr),tt(et),tt(bi),tt(qt),tt(Nn))}}static{this.\u0275cmp=xt({type:i,selectors:[["status-history"]],hostBindings:function(n,r){n&1&&Et("resize",function(a){return r.windowResized(a.target)},!1,Zs)},standalone:!0,features:[Xt,Nt],decls:3,vars:7,consts:[[1,"flex","flex-col","status-history-container"],[1,"flex","justify-between"],["mat-dialog-title",""],[3,"context"],[1,"status-history","flex","flex-col","grow"],[1,"grow","flex","flex-1"],[1,"flex","flex-1","h-full",3,"formGroup"],[1,"status-history-dialog-content","flex","w-full","flex-1"],[1,"flex-1"],["align","start"],[1,"flex","w-full"],[1,"text-sm","flex","items-center","gap-x-2"],["mat-button","","mat-dialog-close",""],["mat-icon-button","","title","Maximize dialog size",1,"primary-icon-button","mt-2","mr-2"],["mat-icon-button","","title","Restore default dialog size",1,"primary-icon-button","mt-2","mr-2"],["mat-icon-button","","title","Maximize dialog size",1,"primary-icon-button","mt-2","mr-2",3,"click"],[1,"fa","fa-window-maximize"],["mat-icon-button","","title","Restore default dialog size",1,"primary-icon-button","mt-2","mr-2",3,"click"],[1,"fa","fa-window-minimize"],["count","3"],[1,"grow","flex","items-center","justify-center"],[1,"flex","flex-1","w-full","gap-x-4"],[1,"component-details","flex","flex-col","gap-y-3"],[1,"flex","flex-col"],[1,"tertiary-color","font-medium"],[1,"font-bold"],[1,"detail-item"],[1,"legend-entry"],["value","nifi-instance-id",3,"change","checked"],[3,"ngStyle"],[1,"chart-panel","grow","flex","flex-col"],[1,"selected-descriptor-container"],[1,"flex","flex-1","flex-col",3,"nodeStats","clusterStats","instances","visibleInstances","selectedFieldDescriptor"],[1,"tertiary-color","overflow-ellipsis","overflow-hidden","whitespace-nowrap","font-medium",3,"title"],[1,"flex"],[3,"change","value","checked"],["formControlName","fieldDescriptor"],["nifiTooltip","",3,"value","tooltipComponentType","tooltipInputData","delayClose"],[3,"value"],[1,"option-text"],["mat-icon-button","",1,"primary-icon-button",3,"click"],[1,"fa","fa-refresh"]],template:function(n,r){if(n&1&&(v(0,"div",0),Q(1,Wf,18,5),Ft(2,"async"),y()),n&2){let o;Ze("maximized",r.dialogMaximized&&r.instances.length>0&&r.fieldDescriptors.length>0)("insufficient-history",!r.instances.length||!r.fieldDescriptors.length),A(),X((o=Ot(2,5,r.statusHistoryState$))?1:-1,o)}},dependencies:[fe,te,ee,ne,ie,me,he,Ut,Ei,kl,Dl,$e,Si,yi,vi,_i,Ci,Ai,On,Fn,ac,sc,Wa,Ti,tl,Ja,gp,ca,Ii],styles:[`.status-history-container[_ngcontent-%COMP%]{position:relative;resize:both;height:732px;width:887px;min-height:732px;min-width:887px}.status-history-container.maximized[_ngcontent-%COMP%]{height:96vh;width:98vw}.status-history-container.insufficient-history[_ngcontent-%COMP%]{height:unset;width:unset;min-height:unset;min-width:unset}.status-history-container[_ngcontent-%COMP%]   .status-history[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px;--mdc-filled-button-container-height: 32px;--mdc-protected-button-container-height: 32px;--mdc-outlined-button-container-height: 32px;--mat-text-button-touch-target-display: block;--mat-filled-button-touch-target-display: block;--mat-protected-button-touch-target-display: block;--mat-outlined-button-touch-target-display: block}.status-history-container[_ngcontent-%COMP%]   .status-history[_ngcontent-%COMP%]   .mat-mdc-dialog-content[_ngcontent-%COMP%]{max-height:unset}.status-history-container[_ngcontent-%COMP%]   .status-history[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}.status-history-container[_ngcontent-%COMP%]   .status-history[_ngcontent-%COMP%]   .status-history-svg[_ngcontent-%COMP%]{pointer-events:none}.status-history-container[_ngcontent-%COMP%]   .status-history[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]{min-width:495px}.status-history-container[_ngcontent-%COMP%]   .status-history[_ngcontent-%COMP%]   .component-details[_ngcontent-%COMP%]{min-width:300px;max-width:300px}[_nghost-%COMP%]     #status-history-chart-container, [_nghost-%COMP%]     #status-history-chart-control-container{overflow:hidden;cursor:default}[_nghost-%COMP%]     #status-history-chart-container .axis path, [_nghost-%COMP%]     #status-history-chart-container .axis line, [_nghost-%COMP%]     #status-history-chart-control-container .axis path, [_nghost-%COMP%]     #status-history-chart-control-container .axis line{fill:none;shape-rendering:crispEdges}[_nghost-%COMP%]     #status-history-chart-container .chart-area, [_nghost-%COMP%]     #status-history-chart-control-container .chart-area{clip-path:url(#clip)}[_nghost-%COMP%]     #status-history-chart-container .chart-line, [_nghost-%COMP%]     #status-history-chart-control-container .chart-line{fill:none;stroke-width:1.5px}[_nghost-%COMP%]     #status-history-chart-container .chart-line.over, [_nghost-%COMP%]     #status-history-chart-control-container .chart-line.over{stroke-width:2.5px}[_nghost-%COMP%]     #status-history-chart-container .brush .selection, [_nghost-%COMP%]     #status-history-chart-control-container .brush .selection{fill-opacity:.125;shape-rendering:crispEdges}[_nghost-%COMP%]     #status-history-chart-container{height:372px;cursor:default;overflow:hidden}[_nghost-%COMP%]     #status-history-chart-control-container{height:125px;margin-top:5px;cursor:default;overflow:hidden}[_nghost-%COMP%]     #status-history-chart-container text, #status-history-chart-control-container[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{font-family:Arial,sans-serif;font-size:10px}[_nghost-%COMP%]     .mat-mdc-dialog-surface.mdc-dialog__surface{overflow:hidden!important}
















`]})}}return i})();var _p=(()=>{class i{constructor(t,n,r,o,a){this.actions$=t,this.store=n,this.statusHistoryService=r,this.dialog=o,this.errorHelper=a,this.reloadComponentStatusHistory$=R(()=>this.actions$.pipe(P(ii),M(s=>s.request),ut(s=>!!s.componentId&&!!s.componentType),N(s=>K(this.statusHistoryService.getComponentStatusHistory(s.componentType,s.componentId).pipe(M(l=>zi({response:{statusHistory:{canRead:l.canRead,statusHistory:l.statusHistory}}})),z(l=>this.bannerOrFullScreenError(l))))))),this.reloadNodeStatusHistory$=R(()=>this.actions$.pipe(P(ii),M(s=>s.request),ut(s=>!s.componentId&&!s.componentType),N(()=>K(this.statusHistoryService.getNodeStatusHistory().pipe(M(s=>zi({response:{statusHistory:{canRead:s.canRead,statusHistory:s.statusHistory}}})),z(s=>this.bannerOrFullScreenError(s))))))),this.getStatusHistoryAndOpenDialog$=R(()=>this.actions$.pipe(P(qn),M(s=>s.request),N(s=>K(this.statusHistoryService.getComponentStatusHistory(s.componentType,s.componentId).pipe(M(l=>Di({request:s,response:{statusHistory:{canRead:l.canRead,statusHistory:l.statusHistory}}})),z(l=>this.snackBarOrFullScreenError(l))))))),this.getNodeStatusHistoryAndOpenDialog$=R(()=>this.actions$.pipe(P(Ol),M(s=>s.request),N(s=>K(this.statusHistoryService.getNodeStatusHistory().pipe(M(l=>Di({request:s,response:{statusHistory:{canRead:l.canRead,statusHistory:l.statusHistory}}})),z(l=>this.snackBarOrFullScreenError(l))))))),this.loadStatusHistorySuccess$=R(()=>this.actions$.pipe(P(Di),M(s=>s.request),N(s=>I(So({request:s}))))),this.openStatusHistoryDialog$=R(()=>this.actions$.pipe(P(So),M(s=>s.request),it(s=>{this.dialog.open(Sp,{maxHeight:"unset",maxWidth:"unset",data:s,autoFocus:"dialog"}).afterClosed().subscribe(c=>{c!=="ROUTED"&&("componentType"in s?this.store.dispatch(Kn({request:{source:s.source,componentType:s.componentType,componentId:s.componentId}})):this.store.dispatch(Gn({request:{source:s.source}})))})})),{dispatch:!1}),this.statusHistoryBannerError$=R(()=>this.actions$.pipe(P(Ui),M(s=>s.error),N(s=>I(Ee({errorContext:{errors:[s],context:Kt.STATUS_HISTORY}})))))}bannerOrFullScreenError(t){if(this.errorHelper.showErrorInContext(t.status)){let n=this.errorHelper.getErrorString(t,"Failed to reload Status History.");return I(Ui({error:n}))}else return I(this.errorHelper.fullScreenError(t))}snackBarOrFullScreenError(t){if(this.errorHelper.showErrorInContext(t.status)){let n=this.errorHelper.getErrorString(t,"Failed to load Status History.");return I(ht({error:n}))}else return I(this.errorHelper.fullScreenError(t))}static{this.\u0275fac=function(n){return new(n||i)(E(pt),E(et),E(Wr),E(Lt),E(dt))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac})}}return i})();var Cp=(()=>{class i{static{this.API="../nifi-api"}constructor(t,n,r,o){this.httpClient=t,this.nifiCommon=n,this.client=r,this.clusterConnectionService=o}getControllerService(t){let n={uiOnly:!0};return this.httpClient.get(`${i.API}/controller-services/${t}`,{params:n})}setEnable(t,n){return this.httpClient.put(`${this.nifiCommon.stripProtocol(t.uri)}/run-status`,{revision:this.client.getRevision(t),disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),state:n?"ENABLED":"DISABLED",uiOnly:!0})}updateReferencingServices(t,n){let r={};return this.getReferencingComponentRevisions(t.component.referencingComponents,r,!0),this.httpClient.put(`${this.nifiCommon.stripProtocol(t.uri)}/references`,{id:t.id,state:n?"ENABLED":"DISABLED",referencingComponentRevisions:r,disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),uiOnly:!0})}updateReferencingSchedulableComponents(t,n){let r={};return this.getReferencingComponentRevisions(t.component.referencingComponents,r,!1),this.httpClient.put(`${this.nifiCommon.stripProtocol(t.uri)}/references`,{id:t.id,state:n?"RUNNING":"STOPPED",referencingComponentRevisions:r,disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),uiOnly:!0})}getReferencingComponentRevisions(t,n,r){this.nifiCommon.isEmpty(t)||t.forEach(o=>{let a=o.component;r?a.referenceType==="ControllerService"&&(n[a.id]=this.client.getRevision(o)):(a.referenceType==="Processor"||a.referenceType==="ReportingTask")&&(n[a.id]=this.client.getRevision(o)),this.getReferencingComponentRevisions(a.referencingComponents,n,r)})}static{this.\u0275fac=function(n){return new(n||i)(E(Ht),E(qt),E(ze),E(ic))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var bp=(()=>{class i{constructor(t,n,r,o,a){this.actions$=t,this.store=n,this.dialog=r,this.controllerServiceStateService=o,this.errorHelper=a,this.submitEnableRequest$=R(()=>this.actions$.pipe(P(cr),M(s=>s.request),_t(()=>this.store.select(ri).pipe(ft())),N(([s,l])=>s.scope==="SERVICE_AND_REFERENCING_COMPONENTS"&&this.hasUnauthorizedReferences(l.component.referencingComponents)?I(ye({response:{step:lt.EnableService,error:"Unable to enable due to unauthorized referencing components."}})):I(pr())))),this.submitDisableRequest$=R(()=>this.actions$.pipe(P(ur),_t(()=>this.store.select(ri).pipe(ft())),N(([,s])=>this.hasUnauthorizedReferences(s.component.referencingComponents)?I(ye({response:{step:lt.StopReferencingComponents,error:"Unable to disable due to unauthorized referencing components."}})):I(dr())))),this.setEnableControllerService$=R(()=>this.actions$.pipe(P(pr),_t(()=>[this.store.select(ri).pipe(ft()),this.store.select(tn)]),N(([,s,l])=>K(this.controllerServiceStateService.setEnable(s,l.enable)).pipe(M(c=>Xi({response:{controllerService:c,currentStep:l.currentStep}})),z(c=>I(ye({response:{step:l.currentStep,error:this.errorHelper.getErrorString(c)}}))))))),this.setEnableControllerServiceSuccess$=R(()=>this.actions$.pipe(P(Xi),M(s=>s.response),ut(s=>s.currentStep!==lt.DisableService),N(()=>I(fr())))),this.startPollingControllerService$=R(()=>this.actions$.pipe(P(fr),N(()=>Ie(2e3,Me).pipe(Pt(this.actions$.pipe(P(hr))))),N(()=>I(To())))),this.pollControllerService$=R(()=>this.actions$.pipe(P(To),_t(()=>[this.store.select(ri).pipe(ft()),this.store.select(tn)]),N(([,s,l])=>K(this.controllerServiceStateService.getControllerService(s.id)).pipe(M(c=>Ji({response:{controllerService:c,currentStep:this.getNextStep(l,s)},previousStep:l.currentStep})),z(c=>I(ye({response:{step:l.currentStep,error:this.errorHelper.getErrorString(c)}}))))))),this.setEnableStepComplete$=R(()=>this.actions$.pipe(P(Ji),ut(s=>{let l=s.response,c=s.previousStep;return l.currentStep!==c}),N(s=>{switch(s.response.currentStep){case lt.DisableReferencingServices:case lt.EnableReferencingServices:return I(Eo());case lt.DisableService:case lt.EnableService:return I(pr());case lt.StopReferencingComponents:case lt.StartReferencingComponents:return I(dr());case lt.Completed:default:return I(hr())}}))),this.updateReferencingServices$=R(()=>this.actions$.pipe(P(Eo),_t(()=>[this.store.select(ri),this.store.select(tn)]),N(([,s,l])=>s?K(this.controllerServiceStateService.updateReferencingServices(s,l.enable)).pipe(M(c=>mr({response:{referencingComponents:c.controllerServiceReferencingComponents,currentStep:l.currentStep}})),z(c=>I(ye({response:{step:l.currentStep,error:this.errorHelper.getErrorString(c)}})))):I(gr({title:"Enable Service",message:"Controller Service not initialized"}))))),this.updateReferencingComponents$=R(()=>this.actions$.pipe(P(dr),_t(()=>[this.store.select(ri),this.store.select(tn)]),N(([,s,l])=>s?K(this.controllerServiceStateService.updateReferencingSchedulableComponents(s,l.enable)).pipe(M(c=>Zi({response:{referencingComponents:c.controllerServiceReferencingComponents,currentStep:l.currentStep}})),z(c=>I(ye({response:{step:l.currentStep,error:this.errorHelper.getErrorString(c)}})))):I(gr({title:"Enable Service",message:"Controller Service not initialized"}))))),this.updateReferencingComponentsSuccess$=R(()=>this.actions$.pipe(P(Zi),M(s=>s.response),ut(s=>s.currentStep!==lt.StartReferencingComponents),N(()=>I(fr())))),this.setEnableStepFailure$=R(()=>this.actions$.pipe(P(ye),N(()=>I(hr())))),this.showOkDialog$=R(()=>this.actions$.pipe(P(gr),it(s=>{this.dialog.open(Bn,O(D({},Ve),{data:{title:s.title,message:s.message}}))})),{dispatch:!1})}hasUnauthorizedReferences(t){if(t.length===0)return!1;if(t.some(o=>!o.permissions.canRead||!o.permissions.canWrite))return!0;let r=t.filter(o=>o.component.referenceType==="ControllerService");return r.length===0?!1:r.some(o=>this.hasUnauthorizedReferences(o.component.referencingComponents))}getNextStep(t,n){switch(t.currentStep){case lt.EnableService:return this.isServiceActionComplete(n,["ENABLED","ENABLING"])?t.scope==="SERVICE_ONLY"?lt.Completed:lt.EnableReferencingServices:t.currentStep;case lt.EnableReferencingServices:return this.isReferencingServicesActionComplete(n.component.referencingComponents,["ENABLED","ENABLING"])?lt.StartReferencingComponents:t.currentStep;case lt.StartReferencingComponents:return lt.Completed;case lt.StopReferencingComponents:return this.areReferencingComponentsStopped(n.component.referencingComponents)?lt.DisableReferencingServices:t.currentStep;case lt.DisableReferencingServices:return this.isReferencingServicesActionComplete(n.component.referencingComponents,["DISABLED"])?lt.DisableService:t.currentStep;case lt.DisableService:return this.isServiceActionComplete(n,["DISABLED"])?lt.Completed:t.currentStep;default:return t.currentStep}}isServiceActionComplete(t,n){return n.includes(t.status.runStatus)}isReferencingServicesActionComplete(t,n){let r=t.filter(o=>o.component.referenceType==="ControllerService");return r.length===0?!0:r.some(o=>{let a=n.includes(o.component.state);return a&&this.isReferencingServicesActionComplete(o.component.referencingComponents,n)})}areReferencingComponentsStopped(t){if(t.filter(a=>a.component.referenceType==="Processor"||a.component.referenceType==="ReportingTask").some(a=>{let s=a.component;return s.state==="RUNNING"||s.activeThreadCount&&s.activeThreadCount>0}))return!1;let o=t.filter(a=>a.component.referenceType==="ControllerService");return o.length===0?!0:o.some(a=>this.areReferencingComponentsStopped(a.component.referencingComponents))}static{this.\u0275fac=function(n){return new(n||i)(E(pt),E(et),E(Lt),E(Cp),E(dt))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac})}}return i})();var Ep=(()=>{class i{static{this.API="../nifi-api"}constructor(t,n){this.httpClient=t,this.client=n}getSystemDiagnostics(t){if(t){let n={nodewise:!0};return this.httpClient.get(`${i.API}/system-diagnostics`,{params:n})}return this.httpClient.get(`${i.API}/system-diagnostics`)}static{this.\u0275fac=function(n){return new(n||i)(E(Ht),E(ze))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Zf(i,e){if(i&1&&(v(0,"div",10)(1,"div"),C(2),y(),v(3,"div",11),C(4),y()()),i&2){let t=e.$implicit;A(2),St(t.name),A(2),di(" ",t.collectionCount," times (",t.collectionTime,") ")}}function Jf(i,e){if(i&1&&(v(0,"div",9),Re(1,Zf,5,3,"div",10,Ne),y()),i&2){let t=q(2);A(),Fe(t.sortedGarbageCollections)}}function th(i,e){if(i&1&&(v(0,"div")(1,"div",18),C(2),y(),st(3,"mat-progress-bar",19),v(4,"div",11),C(5),y()()),i&2){let t=e.$implicit,n=q(2);A(2),rt("Usage for ",t.identifier,":"),A(),ot("value",n.getRepositoryStorageUsagePercent(t)),A(2),Je(" ",t.utilization," (",t.usedSpace," of ",t.totalSpace,") ")}}function eh(i,e){if(i&1&&(v(0,"div")(1,"div",18),C(2),y(),st(3,"mat-progress-bar",19),v(4,"div",11),C(5),y()()),i&2){let t=e.$implicit,n=q(2);A(2),rt("Usage for ",t.identifier,":"),A(),ot("value",n.getRepositoryStorageUsagePercent(t)),A(2),Je(" ",t.utilization," (",t.usedSpace," of ",t.totalSpace,") ")}}function ih(i,e){if(i&1){let t=zt();v(0,"h2",0),C(1,"System Diagnostics"),y(),st(2,"context-error-banner",1),v(3,"div",2)(4,"mat-tab-group",3),aa("selectedIndexChange",function(r){kt(t);let o=q();return sa(o.selectedIndex,r)||(o.selectedIndex=r),Mt(r)}),Et("selectedIndexChange",function(r){kt(t);let o=q();return Mt(o.tabChanged(r))}),v(5,"mat-tab",4)(6,"mat-dialog-content")(7,"div",5)(8,"div",6)(9,"div",7)(10,"section")(11,"div",8),C(12),y(),v(13,"div",9)(14,"div",10)(15,"div"),C(16,"Max"),y(),v(17,"div",11),C(18),y()(),v(19,"div",10)(20,"div"),C(21,"Total"),y(),v(22,"div",11),C(23),y()(),v(24,"div",10)(25,"div"),C(26,"Used"),y(),v(27,"div",11),C(28),y()(),v(29,"div",10)(30,"div"),C(31,"Free"),y(),v(32,"div",11),C(33),y()()()(),v(34,"section")(35,"div",8),C(36,"Garbage Collection"),y(),Q(37,Jf,3,0,"div",9),y()(),v(38,"div",7)(39,"section")(40,"div",8),C(41,"Non Heap"),y(),v(42,"div",9)(43,"div",10)(44,"div"),C(45,"Max"),y(),v(46,"div",11),C(47),y()(),v(48,"div",10)(49,"div"),C(50,"Total"),y(),v(51,"div",11),C(52),y()(),v(53,"div",10)(54,"div"),C(55,"Used"),y(),v(56,"div",11),C(57),y()(),v(58,"div",10)(59,"div"),C(60,"Free"),y(),v(61,"div",11),C(62),y()()()(),v(63,"section")(64,"div",8),C(65,"Runtime"),y(),v(66,"div",9)(67,"div",10)(68,"div"),C(69,"Uptime"),y(),v(70,"div",11),C(71),y()()()()()()()()(),v(72,"mat-tab",12)(73,"mat-dialog-content")(74,"div",13)(75,"div",14)(76,"div",7)(77,"div",9)(78,"div",10)(79,"div"),C(80,"Available Cores"),y(),v(81,"div",11),C(82),y()()()(),v(83,"div",7)(84,"div",9)(85,"div",10)(86,"div",15)(87,"div"),C(88,"Core Load Average"),y(),st(89,"i",16),y(),v(90,"div",11),C(91),y()()()()(),v(92,"section",17)(93,"div",8),C(94,"FlowFile Repository Usage"),y(),v(95,"div")(96,"div",18),C(97,"Usage:"),y(),st(98,"mat-progress-bar",19),v(99,"div",11),C(100),y()()(),v(101,"section",17)(102,"div",8),C(103,"Content Repository Usage"),y(),v(104,"div",20),Re(105,th,6,5,"div",null,Ne),y()(),v(107,"section",17)(108,"div",8),C(109,"Provenance Repository Usage"),y(),v(110,"div",20),Re(111,eh,6,5,"div",null,Ne),y()()()()(),v(113,"mat-tab",21)(114,"mat-dialog-content")(115,"div",5)(116,"div",22)(117,"section")(118,"div",8),C(119,"NiFi"),y(),v(120,"dl",23)(121,"dt",24),C(122,"NiFi Version"),y(),v(123,"dd"),C(124),y(),v(125,"dt",24),C(126,"Tag"),y(),v(127,"dd"),C(128),y(),v(129,"dt",24),C(130,"Build Date/Time"),y(),v(131,"dd"),C(132),y(),v(133,"dt",24),C(134,"Branch"),y(),v(135,"dd"),C(136),y(),v(137,"dt",24),C(138,"Revision"),y(),v(139,"dd"),C(140),y()()(),v(141,"section")(142,"div",8),C(143,"Java"),y(),v(144,"dl",23)(145,"dt",24),C(146,"Version"),y(),v(147,"dd"),C(148),y(),v(149,"dt",24),C(150,"Vendor"),y(),v(151,"dd"),C(152),y()()(),v(153,"section")(154,"div",8),C(155,"Operating System"),y(),v(156,"dl",23)(157,"dt",24),C(158,"Name"),y(),v(159,"dd"),C(160),y(),v(161,"dt",24),C(162,"Version"),y(),v(163,"dd"),C(164),y(),v(165,"dt",24),C(166,"Architecture"),y(),v(167,"dd"),C(168),y()()()()()()()(),v(169,"mat-dialog-actions")(170,"div",25)(171,"div",26)(172,"button",27),Et("click",function(){kt(t);let r=q();return Mt(r.refreshSystemDiagnostics())}),st(173,"i",28),Ft(174,"async"),y(),v(175,"div"),C(176,"Last updated:"),y(),v(177,"div",11),C(178),Ft(179,"async"),y()(),v(180,"div")(181,"button",29),C(182,"Close"),y()()()()()}if(i&2){let t=e,n=q();A(2),ot("context",n.ErrorContextKey.SYSTEM_DIAGNOSTICS),A(2),oa("selectedIndex",n.selectedIndex),A(8),rt(" Heap (",t.heapUtilization,") "),A(6),rt(" ",t.maxHeap," "),A(5),rt(" ",t.totalHeap," "),A(5),rt(" ",t.usedHeap," "),A(5),rt(" ",t.freeHeap," "),A(4),X(n.sortedGarbageCollections?37:-1),A(10),rt(" ",t.maxNonHeap," "),A(5),rt(" ",t.totalNonHeap," "),A(5),rt(" ",t.usedNonHeap," "),A(5),rt(" ",t.freeNonHeap," "),A(9),rt(" ",t.uptime," "),A(11),rt(" ",t.availableProcessors," "),A(7),ot("tooltipComponentType",n.TextTip),A(2),rt(" ",n.formatFloat(t.processorLoadAverage)," "),A(7),ot("value",n.getRepositoryStorageUsagePercent(t.flowFileRepositoryStorageUsage)),A(2),Je(" ",t.flowFileRepositoryStorageUsage.utilization," (",t.flowFileRepositoryStorageUsage.usedSpace," of ",t.flowFileRepositoryStorageUsage.totalSpace,") "),A(5),Fe(t.contentRepositoryStorageUsage),A(6),Fe(t.provenanceRepositoryStorageUsage),A(13),St(t.versionInfo.niFiVersion),A(4),St(t.versionInfo.buildTag),A(4),St(t.versionInfo.buildTimestamp),A(4),St(t.versionInfo.buildBranch),A(4),St(t.versionInfo.buildRevision),A(8),St(t.versionInfo.javaVersion),A(4),St(t.versionInfo.javaVendor),A(8),St(t.versionInfo.osName),A(4),St(t.versionInfo.osVersion),A(4),St(t.versionInfo.osArchitecture),A(5),Ze("fa-spin",Ot(174,33,n.status$)==="loading"),A(5),St(Ot(179,35,n.loadedTimestamp$))}}var Tp=(()=>{class i extends uc{constructor(t,n){super("system-diagnostics-selected-index"),this.store=t,this.nifiCommon=n,this.systemDiagnostics$=this.store.select(Dc),this.loadedTimestamp$=this.store.select(kc),this.status$=this.store.select(Mc),this.sortedGarbageCollections=null,this.TextTip=xi,this.ErrorContextKey=Kt}ngOnInit(){this.systemDiagnostics$.pipe(ft()).subscribe(t=>{let n=t.aggregateSnapshot.garbageCollection.slice();n.sort((r,o)=>this.nifiCommon.compareString(r.name,o.name)),this.sortedGarbageCollections=n})}refreshSystemDiagnostics(){this.store.dispatch(ki({request:{nodewise:!1,errorStrategy:"banner"}}))}formatFloat(t){return this.nifiCommon.formatFloat(t)}getRepositoryStorageUsagePercent(t){return t.usedSpaceBytes/t.totalSpaceBytes*100}static{this.\u0275fac=function(n){return new(n||i)(tt(et),tt(qt))}}static{this.\u0275cmp=xt({type:i,selectors:[["system-diagnostics-dialog"]],standalone:!0,features:[Xt,Nt],decls:2,vars:3,consts:[["mat-dialog-title",""],[3,"context"],[1,"system-diagnostics"],[3,"selectedIndexChange","selectedIndex"],["label","JVM"],[1,"dialog-tab-content","w-full"],[1,"flex","gap-y-4"],[1,"flex","flex-col","flex-1","gap-y-4"],[1,"font-bold","primary-color"],[1,"flex","flex-col","gap-y-3"],[1,"flex","flex-col"],[1,"tertiary-color","font-medium"],["label","System"],[1,"dialog-tab-content","gap-y-6","w-full","flex","flex-col"],[1,"flex"],[1,"flex","gap-x-3","items-center"],["nifiTooltip","","tooltipInputData","Core load average for the last minute. Not available on all platforms.",1,"fa","fa-info-circle","primary-color",3,"tooltipComponentType"],[1,"flex","flex-col","pr-4"],[1,"capitalize"],["mode","determinate",3,"value"],[1,"repository-storage-container","flex","flex-col","gap-y-2"],["label","Version"],[1,"flex","flex-col","gap-y-4"],[1,"setting-attributes-list"],[1,"font-bold"],[1,"flex","flex-1","justify-between"],[1,"text-sm","flex","items-center","gap-x-2"],["mat-icon-button","",1,"primary-icon-button",3,"click"],[1,"fa","fa-refresh"],["mat-button","","mat-dialog-close",""]],template:function(n,r){if(n&1&&(Q(0,ih,183,37),Ft(1,"async")),n&2){let o;X((o=(o=Ot(1,1,r.systemDiagnostics$))==null?null:o.aggregateSnapshot)?0:-1,o)}},dependencies:[fi,me,ec,Jl,tc,fe,te,ee,ne,ie,he,Ut,Ei,Ti,Fc,Sr,Ii],styles:[`.system-diagnostics[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px;--mdc-filled-button-container-height: 32px;--mdc-protected-button-container-height: 32px;--mdc-outlined-button-container-height: 32px;--mat-text-button-touch-target-display: block;--mat-filled-button-touch-target-display: block;--mat-protected-button-touch-target-display: block;--mat-outlined-button-touch-target-display: block}.system-diagnostics[_ngcontent-%COMP%]   .setting-attributes-list[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{float:left;clear:left;padding:0 .5em .2em 0}.system-diagnostics[_ngcontent-%COMP%]   .setting-attributes-list[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{margin-left:9em;padding-bottom:.2em}
















`]})}}return i})();var Ap=(()=>{class i{constructor(t,n,r,o,a){this.actions$=t,this.store=n,this.systemDiagnosticsService=r,this.dialog=o,this.errorHelper=a,this.reloadSystemDiagnostics$=R(()=>this.actions$.pipe(P(ki),M(s=>s.request),N(s=>K(this.systemDiagnosticsService.getSystemDiagnostics(s.nodewise)).pipe(M(l=>Wn({response:{systemDiagnostics:l.systemDiagnostics}})),z(l=>{let c=this.errorHelper.getErrorString(l,"Failed to reload System Diagnostics.");return s.errorStrategy==="snackbar"?I(Mi({error:c})):I(Ki({error:c}))}))))),this.getSystemDiagnosticsAndOpenDialog$=R(()=>this.actions$.pipe(P(Qn),M(s=>s.request),N(s=>K(this.systemDiagnosticsService.getSystemDiagnostics(s.nodewise)).pipe(M(l=>qi({response:{systemDiagnostics:l.systemDiagnostics}})),z(l=>I(Mi({error:this.errorHelper.getErrorString(l,"Failed to load System Diagnostics.")}))))))),this.loadSystemDiagnosticsSuccess$=R(()=>this.actions$.pipe(P(qi),N(()=>I(_o())))),this.openSystemDiagnosticsDialog$=R(()=>this.actions$.pipe(P(_o),it(()=>{this.dialog.open(Tp,D({},Ln)).afterClosed().subscribe(()=>{this.store.dispatch(Yn())})})),{dispatch:!1}),this.systemDiagnosticsBannerError$=R(()=>this.actions$.pipe(P(Ki),M(s=>s.error),N(s=>I(Ee({errorContext:{errors:[s],context:Kt.SYSTEM_DIAGNOSTICS}}))))),this.systemDiagnosticsSnackbarError$=R(()=>this.actions$.pipe(P(Mi),M(s=>s.error),N(s=>I(ht({error:s})))))}static{this.\u0275fac=function(n){return new(n||i)(E(pt),E(et),E(Ep),E(Lt),E(dt))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac})}}return i})();var xp=(()=>{class i{constructor(t,n,r){this.actions$=t,this.flowConfigurationService=n,this.errorHelper=r,this.loadFlowConfiguration$=R(()=>this.actions$.pipe(P($l),N(()=>K(this.flowConfigurationService.getFlowConfiguration().pipe(M(o=>jl({response:o})),z(o=>I(ht({error:this.errorHelper.getErrorString(o,"Failed to load Flow Configuration.")}))))))))}static{this.\u0275fac=function(n){return new(n||i)(E(pt),E(xc),E(dt))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac})}}return i})();var wp=(()=>{class i{constructor(t,n){this.httpClient=t,this.nifiCommon=n}getComponentState(t){return this.httpClient.get(`${this.nifiCommon.stripProtocol(t.componentUri)}/state`)}clearComponentState(t){return this.httpClient.post(`${this.nifiCommon.stripProtocol(t.componentUri)}/state/clear-requests`,{})}static{this.\u0275fac=function(n){return new(n||i)(E(Ht),E(qt))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Yr=xn(Gr),Dp=be(Yr,i=>i.componentState),kp=be(Yr,i=>i.componentName),Ps=be(Yr,i=>i.componentUri),Mp=be(Yr,i=>i.canClear);var rh=i=>({value:i});function oh(i,e){i&1&&(v(0,"div",4)(1,"div"),C(2,"Name"),y(),v(3,"div",5),C(4),y()()),i&2&&(A(4),St(e))}function sh(i,e){if(i&1){let t=zt();v(0,"div")(1,"a",26),Et("click",function(){kt(t);let r=q(2);return Mt(r.clearState())}),C(2,"Clear state"),y()()}}function ah(i,e){if(i&1&&Q(0,sh,3,0,"div"),i&2){let t=q();X(e.value&&t.totalEntries>0?0:-1)}}function lh(i,e){i&1&&(v(0,"th",27),C(1,"Key"),y())}function ch(i,e){if(i&1&&(v(0,"td",28),C(1),y()),i&2){let t=e.$implicit;A(),rt(" ",t.key," ")}}function uh(i,e){i&1&&(v(0,"th",27),C(1,"Value"),y())}function ph(i,e){if(i&1&&(v(0,"td",29),C(1),y()),i&2){let t=e.$implicit;ot("title",t.value),A(),rt(" ",t.value," ")}}function mh(i,e){i&1&&(v(0,"th",27),C(1,"Scope"),y())}function dh(i,e){if(i&1&&(v(0,"td",29),C(1),y()),i&2){let t=e.$implicit;ot("title",t.scope),A(),rt(" ",t.scope," ")}}function fh(i,e){i&1&&(_n(0,20),Q(1,mh,2,0,"th",16)(2,dh,2,2,"td",19),Cn())}function hh(i,e){i&1&&st(0,"tr",30)}function gh(i,e){if(i&1&&st(0,"tr",31),i&2){let t=e.even;Ze("even",t)}}function yh(i,e){i&1&&(v(0,"div",23),C(1,"Showing partial results"),y())}var Ip=(()=>{class i extends Be{constructor(t,n,r){super(),this.store=t,this.formBuilder=n,this.nifiCommon=r,this.initialSortColumn="key",this.initialSortDirection="asc",this.componentName$=this.store.select(kp).pipe(ft()),this.canClear$=this.store.select(Mp).pipe(ft()),this.displayedColumns=["key","value"],this.dataSource=new fl,this.stateDescription="",this.totalEntries=0,this.filteredEntries=0,this.partialResults=!1,this.destroyRef=vt(Sn),this.ErrorContextKey=Kt,this.filterForm=this.formBuilder.group({filterTerm:""}),this.store.select(Dp).pipe(ft(),Zt()).subscribe(o=>{this.stateDescription=o.stateDescription;let a=[];if(o.localState){let l=this.processStateMap(o.localState,!1);a.push(...l)}if(o.clusterState){let l=this.processStateMap(o.clusterState,!0);a.push(...l)}this.dataSource.data=this.sortStateItems(a,{active:this.initialSortColumn,direction:this.initialSortDirection}),this.filteredEntries=a.length;let s=this.filterForm.get("filterTerm")?.value;s?.length>0&&this.applyFilter(s)}),this.store.select(Qi).pipe(ft(),Zt()).subscribe(o=>{if(o.connectedToCluster)this.displayedColumns.includes("scope")||this.displayedColumns.splice(this.displayedColumns.length,0,"scope");else{let a=this.displayedColumns.indexOf("scope");a>-1&&this.displayedColumns.splice(a,1)}})}ngAfterViewInit(){this.filterForm.get("filterTerm")?.valueChanges.pipe(Ye(500),Zt(this.destroyRef)).subscribe(t=>{this.applyFilter(t)})}processStateMap(t,n){let r=t.state?t.state:[];return r.length!==t.totalEntryCount&&(this.partialResults=!0),this.totalEntries+=t.totalEntryCount,r.map(o=>({key:o.key,value:o.value,scope:n?"Cluster":o.clusterNodeAddress}))}applyFilter(t){this.dataSource.filter=t.trim().toLowerCase(),this.filteredEntries=this.dataSource.filteredData.length}sortData(t){this.dataSource.data=this.sortStateItems(this.dataSource.data,t)}sortStateItems(t,n){return t?t.slice().sort((r,o)=>{let a=n.direction==="asc",s=0;switch(n.active){case"key":s=this.nifiCommon.compareString(r.key,o.key);break;case"value":s=this.nifiCommon.compareString(r.value,o.value);break;case"scope":r.scope&&o.scope&&(s=this.nifiCommon.compareString(r.scope,o.scope));break}return s*(a?1:-1)}):[]}clearState(){this.store.dispatch(or())}static{this.\u0275fac=function(n){return new(n||i)(tt(et),tt(bi),tt(qt))}}static{this.\u0275cmp=xt({type:i,selectors:[["component-state"]],inputs:{initialSortColumn:"initialSortColumn",initialSortDirection:"initialSortDirection"},standalone:!0,features:[Xt,Nt],decls:41,vars:21,consts:[[1,"component-state-dialog"],["mat-dialog-title",""],[3,"context"],[1,"dialog-content","flex","flex-col","justify-between","gap-y-5"],[1,"flex","flex-col"],[1,"tertiary-color","font-medium"],[1,"flex","flex-1","flex-col"],[1,"flex","flex-col","my-2",3,"formGroup"],[1,"flex","justify-between","items-center"],["subscriptSizing","dynamic"],["matInput","","type","text","formControlName","filterTerm",1,"small"],[1,"my-2","tertiary-color","leading-none","font-medium"],[1,"listing-table","flex-1","relative"],[1,"absolute","inset-0","overflow-y-auto","overflow-x-hidden"],["mat-table","","matSort","","matSortDisableClear","",3,"matSortChange","dataSource","matSortActive","matSortDirection"],["matColumnDef","key"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","value"],["mat-cell","",3,"title",4,"matCellDef"],["matColumnDef","scope"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"even",4,"matRowDef","matRowDefColumns"],[1,"-mt-3"],["align","end"],["mat-button","","mat-dialog-close",""],[3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-cell","",3,"title"],["mat-header-row",""],["mat-row",""]],template:function(n,r){if(n&1&&(v(0,"div",0)(1,"h2",1),C(2,"Component State"),y(),st(3,"context-error-banner",2),v(4,"mat-dialog-content")(5,"div",3),Q(6,oh,5,1,"div",4),Ft(7,"async"),v(8,"div",4)(9,"div"),C(10,"Description"),y(),v(11,"div",5),C(12),y()(),v(13,"div",6)(14,"div")(15,"form",7)(16,"div",8)(17,"mat-form-field",9)(18,"mat-label"),C(19,"Filter"),y(),st(20,"input",10),y(),Q(21,ah,1,1),Ft(22,"async"),y()(),v(23,"div",11),C(24),y()(),v(25,"div",12)(26,"div",13)(27,"table",14),Et("matSortChange",function(a){return r.sortData(a)}),_n(28,15),Q(29,lh,2,0,"th",16)(30,ch,2,1,"td",17),Cn(),_n(31,18),Q(32,uh,2,0,"th",16)(33,ph,2,2,"td",19),Cn(),Q(34,fh,3,0,"ng-container",20)(35,hh,1,0,"tr",21)(36,gh,1,2,"tr",22),y()()()(),Q(37,yh,2,0,"div",23),y()(),v(38,"mat-dialog-actions",24)(39,"button",25),C(40,"Close"),y()()()),n&2){let o,a;A(3),ot("context",r.ErrorContextKey.COMPONENT_STATE),A(3),X((o=Ot(7,15,r.componentName$))?6:-1,o),A(6),rt(" ",r.stateDescription," "),A(3),ot("formGroup",r.filterForm),A(6),X((a=ji(19,rh,Ot(22,17,r.canClear$)))?21:-1,a),A(3),di(" Displaying ",r.filteredEntries," of ",r.totalEntries," "),A(3),ot("dataSource",r.dataSource)("matSortActive",r.initialSortColumn)("matSortDirection",r.initialSortDirection),A(7),X(r.displayedColumns.includes("scope")?34:-1),A(),ot("matHeaderRowDef",r.displayedColumns)("matHeaderRowDefSticky",!0),A(),ot("matRowDefColumns",r.displayedColumns),A(),X(r.partialResults?37:-1)}},dependencies:[he,Ut,fe,te,ee,ne,ie,Rn,rl,sl,ul,al,ol,pl,ll,cl,ml,dl,lr,rc,oc,me,$e,Si,Xa,yi,vi,_i,Ci,Ai,On,Fn,Hn,vl,Ii],styles:[".component-state-dialog[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px;--mdc-filled-button-container-height: 32px;--mdc-protected-button-container-height: 32px;--mdc-outlined-button-container-height: 32px;--mat-text-button-touch-target-display: block;--mat-filled-button-touch-target-display: block;--mat-protected-button-touch-target-display: block;--mat-outlined-button-touch-target-display: block}.component-state-dialog[_ngcontent-%COMP%]   .listing-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-key[_ngcontent-%COMP%]{width:200px}"]})}}return i})();var Pp=(()=>{class i{constructor(t,n,r,o,a){this.actions$=t,this.store=n,this.componentStateService=r,this.dialog=o,this.errorHelper=a,this.getComponentStateAndOpenDialog$=R(()=>this.actions$.pipe(P(rr),M(s=>s.request),N(s=>K(this.componentStateService.getComponentState({componentUri:s.componentUri}).pipe(M(l=>Yi({response:{componentState:l.componentState}})),z(l=>I(ht({error:this.errorHelper.getErrorString(l,`Failed to get the component state for ${s.componentName}.`)})))))))),this.loadComponentStateSuccess$=R(()=>this.actions$.pipe(P(Yi),M(s=>s.response),N(()=>I(Co())))),this.openComponentStateDialog$=R(()=>this.actions$.pipe(P(Co),it(()=>{this.dialog.open(Ip,O(D({},Ln),{autoFocus:!1})).afterClosed().subscribe(()=>{this.store.dispatch(ar())})})),{dispatch:!1}),this.clearComponentState$=R(()=>this.actions$.pipe(P(or),_t(()=>this.store.select(Ps).pipe(ft())),N(([,s])=>K(this.componentStateService.clearComponentState({componentUri:s}).pipe(M(()=>bo()),z(l=>I(Ee({errorContext:{errors:[this.errorHelper.getErrorString(l,"Failed to clear the component state.")],context:Kt.COMPONENT_STATE}})))))))),this.reloadComponentState$=R(()=>this.actions$.pipe(P(bo),_t(()=>this.store.select(Ps).pipe(ft())),N(([,s])=>K(this.componentStateService.getComponentState({componentUri:s}).pipe(M(l=>sr({response:{componentState:l.componentState}})),z(l=>I(Ee({errorContext:{errors:[this.errorHelper.getErrorString(l,"Failed to reload the component state.")],context:Kt.COMPONENT_STATE}}))))))))}static{this.\u0275fac=function(n){return new(n||i)(E(pt),E(et),E(wp),E(Lt),E(dt))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac})}}return i})();function vh(i,e){if(i&1){let t=zt();v(0,"div",1)(1,"button",2),Et("click",function(){kt(t);let r=q();return Mt(r.action())}),C(2),y()()}if(i&2){let t=q();A(2),rt(" ",t.data.action," ")}}var Sh=["label"];function _h(i,e){}var Ch=Math.pow(2,31)-1,fn=class{constructor(e,t){this._overlayRef=t,this._afterDismissed=new ce,this._afterOpened=new ce,this._onAction=new ce,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,Ch))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},Np=new Pe("MatSnackBarData"),Bi=class{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}},bh=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=vn({type:i,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"],standalone:!0})}}return i})(),Eh=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=vn({type:i,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"],standalone:!0})}}return i})(),Th=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=vn({type:i,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"],standalone:!0})}}return i})(),Rp=(()=>{class i{constructor(t,n){this.snackBarRef=t,this.data=n}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static{this.\u0275fac=function(n){return new(n||i)(tt(fn),tt(Np))}}static{this.\u0275cmp=xt({type:i,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],standalone:!0,features:[Nt],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(n,r){n&1&&(v(0,"div",0),C(1),y(),Q(2,vh,3,1,"div",1)),n&2&&(A(),rt(" ",r.data.message,`
`),A(),X(r.hasAction?2:-1))},dependencies:[Ut,bh,Eh,Th],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0})}}return i})(),Ah={snackBarState:Qa("state",[go("void, hidden",ei({transform:"scale(0.8)",opacity:0})),go("visible",ei({transform:"scale(1)",opacity:1})),yo("* => visible",ho("150ms cubic-bezier(0, 0, 0.2, 1)")),yo("* => void, * => hidden",ho("75ms cubic-bezier(0.4, 0.0, 1, 1)",ei({opacity:0})))])},xh=0,wh=(()=>{class i extends Ba{constructor(t,n,r,o,a){super(),this._ngZone=t,this._elementRef=n,this._changeDetectorRef=r,this._platform=o,this.snackBarConfig=a,this._document=vt(bn),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new ce,this._onExit=new ce,this._onEnter=new ce,this._animationState="void",this._liveElementId=`mat-snack-bar-container-live-${xh++}`,this.attachDomPortal=s=>{this._assertNotAttached();let l=this._portalOutlet.attachDomPortal(s);return this._afterPortalAttached(),l},a.politeness==="assertive"&&!a.announcementMessage?this._live="assertive":a.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(t){this._assertNotAttached();let n=this._portalOutlet.attachComponentPortal(t);return this._afterPortalAttached(),n}attachTemplatePortal(t){this._assertNotAttached();let n=this._portalOutlet.attachTemplatePortal(t);return this._afterPortalAttached(),n}onAnimationEnd(t){let{fromState:n,toState:r}=t;if((r==="void"&&n!=="void"||r==="hidden")&&this._completeExit(),r==="visible"){let o=this._onEnter;this._ngZone.run(()=>{o.next(),o.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let t=this._elementRef.nativeElement,n=this.snackBarConfig.panelClass;n&&(Array.isArray(n)?n.forEach(a=>t.classList.add(a)):t.classList.add(n)),this._exposeToModals();let r=this._label.nativeElement,o="mdc-snackbar__label";r.classList.toggle(o,!r.querySelector(`.${o}`))}_exposeToModals(){let t=this._liveElementId,n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<n.length;r++){let o=n[r],a=o.getAttribute("aria-owns");this._trackedModals.add(o),a?a.indexOf(t)===-1&&o.setAttribute("aria-owns",a+" "+t):o.setAttribute("aria-owns",t)}}_clearFromModals(){this._trackedModals.forEach(t=>{let n=t.getAttribute("aria-owns");if(n){let r=n.replace(this._liveElementId,"").trim();r.length>0?t.setAttribute("aria-owns",r):t.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{let t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),n=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&n){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(r=document.activeElement),t.removeAttribute("aria-hidden"),n.appendChild(t),r?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static{this.\u0275fac=function(n){return new(n||i)(tt(mi),tt(Xs),tt(la),tt(Ha),tt(Bi))}}static{this.\u0275cmp=xt({type:i,selectors:[["mat-snack-bar-container"]],viewQuery:function(n,r){if(n&1&&(io(mo,7),io(Sh,7)),n&2){let o;no(o=ro())&&(r._portalOutlet=o.first),no(o=ro())&&(r._label=o.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:1,hostBindings:function(n,r){n&1&&ra("@state.done",function(a){return r.onAnimationEnd(a)}),n&2&&na("@state",r._animationState)},standalone:!0,features:[Xt,Nt],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(n,r){n&1&&(v(0,"div",1)(1,"div",2,0)(3,"div",3),Q(4,_h,0,0,"ng-template",4),y(),st(5,"div"),y()()),n&2&&(A(5),ia("aria-live",r._live)("role",r._role)("id",r._liveElementId))},dependencies:[mo],styles:[".mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}.cdk-high-contrast-active .mat-mdc-snackbar-surface{outline:solid 1px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mdc-snackbar-supporting-text-color, var(--mat-app-inverse-on-surface));border-radius:var(--mdc-snackbar-container-shape, var(--mat-app-corner-extra-small));background-color:var(--mdc-snackbar-container-color, var(--mat-app-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mdc-snackbar-supporting-text-font, var(--mat-app-body-medium-font));font-size:var(--mdc-snackbar-supporting-text-size, var(--mat-app-body-medium-size));font-weight:var(--mdc-snackbar-supporting-text-weight, var(--mat-app-body-medium-weight));line-height:var(--mdc-snackbar-supporting-text-line-height, var(--mat-app-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color, var(--mat-app-inverse-primary));--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}"],encapsulation:2,data:{animation:[Ah.snackBarState]}})}}return i})();function Dh(){return new Bi}var kh=new Pe("mat-snack-bar-default-options",{providedIn:"root",factory:Dh}),Ns=(()=>{class i{get _openedSnackBarRef(){let t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}constructor(t,n,r,o,a,s){this._overlay=t,this._live=n,this._injector=r,this._breakpointObserver=o,this._parentSnackBar=a,this._defaultConfig=s,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=Rp,this.snackBarContainerComponent=wh,this.handsetCssClass="mat-mdc-snack-bar-handset"}openFromComponent(t,n){return this._attach(t,n)}openFromTemplate(t,n){return this._attach(t,n)}open(t,n="",r){let o=D(D({},this._defaultConfig),r);return o.data={message:t,action:n},o.announcementMessage===t&&(o.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,o)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,n){let r=n&&n.viewContainerRef&&n.viewContainerRef.injector,o=$i.create({parent:r||this._injector,providers:[{provide:Bi,useValue:n}]}),a=new po(this.snackBarContainerComponent,n.viewContainerRef,o),s=t.attach(a);return s.instance.snackBarConfig=n,s.instance}_attach(t,n){let r=D(D(D({},new Bi),this._defaultConfig),n),o=this._createOverlay(r),a=this._attachSnackBarContainer(o,r),s=new fn(a,o);if(t instanceof Js){let l=new La(t,null,{$implicit:r.data,snackBarRef:s});s.instance=a.attachTemplatePortal(l)}else{let l=this._createInjector(r,s),c=new po(t,void 0,l),d=a.attachComponentPortal(c);s.instance=d.instance}return this._breakpointObserver.observe(qa.HandsetPortrait).pipe(Pt(o.detachments())).subscribe(l=>{o.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),r.announcementMessage&&a._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(s,r),this._openedSnackBarRef=s,this._openedSnackBarRef}_animateSnackBar(t,n){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),n.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),n.duration&&n.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(n.duration))}_createOverlay(t){let n=new ja;n.direction=t.direction;let r=this._overlay.position().global(),o=t.direction==="rtl",a=t.horizontalPosition==="left"||t.horizontalPosition==="start"&&!o||t.horizontalPosition==="end"&&o,s=!a&&t.horizontalPosition!=="center";return a?r.left("0"):s?r.right("0"):r.centerHorizontally(),t.verticalPosition==="top"?r.top("0"):r.bottom("0"),n.positionStrategy=r,this._overlay.create(n)}_createInjector(t,n){let r=t&&t.viewContainerRef&&t.viewContainerRef.injector;return $i.create({parent:r||this._injector,providers:[{provide:fn,useValue:n},{provide:Np,useValue:t.data}]})}static{this.\u0275fac=function(n){return new(n||i)(E(Va),E(Ka),E($i),E(Ua),E(i,12),E(kh))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Fp=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=pe({type:i})}static{this.\u0275inj=ue({providers:[Ns],imports:[za,$a,he,fo,Rp,fo]})}}return i})();var Op=(()=>{class i{constructor(t,n,r){this.actions$=t,this.router=n,this.snackBar=r,this.fullScreenError$=R(()=>this.actions$.pipe(P(Jt),M(o=>o.skipReplaceUrl),it(o=>{o?this.router.navigate(["/error"]):this.router.navigate(["/error"],{replaceUrl:!0})})),{dispatch:!1}),this.snackBarError$=R(()=>this.actions$.pipe(P(ht),M(o=>o.error),it(o=>{this.snackBar.open(o,"Dismiss",{duration:3e4})})),{dispatch:!1})}static{this.\u0275fac=function(n){return new(n||i)(E(pt),E(Oe),E(Ns))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac})}}return i})();var Hp=(()=>{class i{constructor(t,n){this.actions$=t,this.router=n,this.navigateToComponentDocumentation$=R(()=>this.actions$.pipe(P(nc),M(r=>r.request),it(r=>{let o=r.parameters;this.router.navigate(["/documentation",o.componentType,o.group,o.artifact,o.version,o.type],{state:{backNavigation:r.backNavigation}})})),{dispatch:!1})}static{this.\u0275fac=function(n){return new(n||i)(E(pt),E(Oe))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac})}}return i})();var Lp=(()=>{class i{constructor(t,n,r,o,a){this.actions$=t,this.clusterService=n,this.store=r,this.dialog=o,this.errorHelper=a,this.loadClusterSummary$=R(()=>this.actions$.pipe(P(Gi),_t(()=>this.store.select(Qi)),N(([,s])=>K(this.clusterService.getClusterSummary().pipe(M(l=>{let c=l.clusterSummary,d=c.connectedToCluster;return s?s.connectedToCluster!==c.connectedToCluster&&this.store.dispatch(ni({connectedToCluster:d})):c.clustered&&!c.connectedToCluster&&this.store.dispatch(ni({connectedToCluster:d})),tr({response:l})}),z(l=>I(ht({error:this.errorHelper.getErrorString(l,"Failed to load cluster summary")})))))))),this.startProcessGroupPolling$=R(()=>this.actions$.pipe(P(zl),N(()=>Ie(3e4,Me).pipe(Pt(this.actions$.pipe(P(Jn))))),N(()=>I(Gi())))),this.acknowledgeClusterConnectionChange$=R(()=>this.actions$.pipe(P(ni),Vs(2e3),it(({connectedToCluster:s})=>{let l=s?"This node just joined the cluster. Any modifications to the data flow made here will replicate across the cluster.":"This node is currently not connected to the cluster. Any modifications to the data flow made here will not replicate across the cluster.",c=this.dialog.open(Bn,O(D({},Ve),{disableClose:!0,data:{title:"Cluster Connection",message:l}}));c.componentInstance.ok.pipe(Pt(c.afterClosed())).subscribe(()=>{s?this.store.dispatch(Wi({disconnectionAcknowledged:!1})):this.store.dispatch(Wi({disconnectionAcknowledged:!0}))})})),{dispatch:!1}),this.searchCluster$=R(()=>this.actions$.pipe(P(ql),M(s=>s.request),_t(()=>this.store.select(Qi).pipe(ft(),ut(s=>s.connectedToCluster))),N(([s])=>K(this.clusterService.searchCluster(s.q)).pipe(M(l=>er({response:l})),z(l=>I(ht({error:this.errorHelper.getErrorString(l,"Failed to search cluster summary")})))))))}static{this.\u0275fac=function(n){return new(n||i)(E(pt),E(Ac),E(et),E(Lt),E(dt))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac})}}return i})();var Bp=(()=>{class i{static{this.API="../nifi-api"}constructor(t,n,r){this.httpClient=t,this.client=n,this.nifiCommon=r}getAnalysis(t){let n={configurationAnalysis:{componentId:t.entity.id,properties:t.properties}};return this.httpClient.post(`${this.nifiCommon.stripProtocol(t.entity.uri)}/config/analysis`,n)}initiatePropertyVerification(t){return this.httpClient.post(`${this.nifiCommon.stripProtocol(t.uri)}/config/verification-requests`,t.request)}getPropertyVerificationRequest(t,n){return this.httpClient.get(`${this.nifiCommon.stripProtocol(n)}/config/verification-requests/${t}`)}deletePropertyVerificationRequest(t,n){return this.httpClient.delete(`${this.nifiCommon.stripProtocol(n)}/config/verification-requests/${t}`)}static{this.\u0275fac=function(n){return new(n||i)(E(Ht),E(ze),E(qt))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Ph(i,e){i&1&&C(0," Complete ")}function Nh(i,e){if(i&1&&C(0),i&2){let t=q();rt(" ",t.state," ")}}function Rh(i,e){if(i&1&&(v(0,"div",5),Q(1,Ph,1,0)(2,Nh,1,1),y(),v(3,"div",6),st(4,"mat-progress-bar",7),v(5,"div",5),C(6),y()()),i&2){let t=e;A(),X(t.complete?1:2),A(3),ot("value",t.percentCompleted),A(2),rt("",t.percentCompleted,"%")}}function Fh(i,e){if(i&1){let t=zt();v(0,"button",8),Et("click",function(){let r=kt(t),o=q();return Mt(o.stop(r))}),C(1,"Stop"),y()}}var $p=(()=>{class i{constructor(){this.verificationRequest$=I(null),this.stopVerification=new Xe}stop(t){this.stopVerification.next(t)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=xt({type:i,selectors:[["property-verification-progress"]],inputs:{verificationRequest$:"verificationRequest$"},outputs:{stopVerification:"stopVerification"},standalone:!0,features:[Nt],decls:10,vars:6,consts:[["mat-dialog-title",""],[1,"change-version-progress"],[1,"flex","flex-col","gap-y-4"],["align","end"],["mat-flat-button","","mat-dialog-close",""],[1,"tertiary-color","font-medium"],[1,"w-full","flex","flex-col","items-center"],["mode","determinate",3,"value"],["mat-flat-button","","mat-dialog-close","",3,"click"]],template:function(n,r){if(n&1&&(v(0,"h2",0),C(1,"Verifying Properties"),y(),v(2,"div",1)(3,"mat-dialog-content")(4,"div",2),Q(5,Rh,7,3),Ft(6,"async"),y()(),v(7,"mat-dialog-actions",3),Q(8,Fh,2,0,"button",4),Ft(9,"async"),y()()),n&2){let o,a;A(5),X((o=Ot(6,2,r.verificationRequest$))?5:-1,o),A(3),X((a=Ot(9,4,r.verificationRequest$))?8:-1,a)}},dependencies:[fi,me,Ut,ne,te,ie,ee,Sr]})}}return i})();var jp=(()=>{class i extends Be{constructor(t,n){super(),this.formBuilder=t,this.data=n,this.verify=new Xe,this.TextTip=xi;let r=n.attributes||[];this.referencedAttributesForm=this.formBuilder.group({attributes:new Za(r)})}verifyClicked(){this.verify.next(this.referencedAttributesForm.value)}clearAttributesClicked(){this.referencedAttributesForm.reset()}isEmpty(){return(this.referencedAttributesForm.get("attributes")?.value||[]).length===0}static{this.\u0275fac=function(n){return new(n||i)(tt(bi),tt(Nn))}}static{this.\u0275cmp=xt({type:i,selectors:[["referenced-attributes-dialog"]],inputs:{createNew:"createNew"},outputs:{verify:"verify"},standalone:!0,features:[Xt,Nt],decls:17,vars:5,consts:[["mat-dialog-title",""],[1,"referenced-attributes-form",3,"formGroup"],[1,"dialog-content","max-h-96"],["formControlName","attributes",3,"createNew","reportChangesOnly"],[1,"flex","flex-row","justify-between","items-center"],["nifiTooltip","","tooltipInputData","Supply attribute values that should be considered when performing property verification.",1,"fa","fa-info-circle","primary-color",3,"tooltipComponentType"],["mat-icon-button","","type","button",1,"primary-icon-button",3,"click","disabled"],[1,"fa","fa-eraser"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-flat-button","","mat-dialog-close","","cdkFocusInitial","",3,"click"]],template:function(n,r){n&1&&(v(0,"h2",0),C(1,"Referenced Attributes"),y(),v(2,"form",1)(3,"mat-dialog-content")(4,"div",2)(5,"map-table",3)(6,"div",4)(7,"div"),C(8," Enter Attribute Values "),st(9,"i",5),y(),v(10,"button",6),Et("click",function(){return r.clearAttributesClicked()}),st(11,"i",7),y()()()()(),v(12,"mat-dialog-actions",8)(13,"button",9),C(14,"Cancel"),y(),v(15,"button",10),Et("click",function(){return r.verifyClicked()}),C(16,"Verify"),y()()()),n&2&&(A(2),ot("formGroup",r.referencedAttributesForm),A(3),ot("createNew",r.createNew)("reportChangesOnly",!1),A(4),ot("tooltipComponentType",r.TextTip),A(),ot("disabled",r.isEmpty()))},dependencies:[fi,ee,$e,Si,yi,vi,_i,Ci,ie,ne,Ut,te,hl,Ti,Ei]})}}return i})();var Vp=(()=>{class i{constructor(t,n,r,o,a,s,l){this.actions$=t,this.store=n,this.dialog=r,this.errorHelper=o,this.propertyVerificationService=a,this.propertyTableHelperService=s,this.mapTableHelperService=l,this.verifyProperties$=R(()=>this.actions$.pipe(P(gc),M(c=>c.request),N(c=>K(this.propertyVerificationService.getAnalysis(c)).pipe(M(d=>Pi({response:{requestContext:c,configurationAnalysis:d.configurationAnalysis}})),z(d=>I(ht({error:this.errorHelper.getErrorString(d)}))))))),this.getConfigurationAnalysisSuccess_noExtraVerification$=R(()=>this.actions$.pipe(P(Pi),M(c=>c.response),ut(c=>!c.configurationAnalysis.supportsVerification),N(c=>I(Ri({response:c}))))),this.getConfigurationAnalysisSuccess_extraVerification$=R(()=>this.actions$.pipe(P(Pi),M(c=>c.response),ut(c=>c.configurationAnalysis.supportsVerification),_t(()=>this.store.select(vc)),it(([c,d])=>{let h=[];d&&(h=Object.entries(d).map(([T,f])=>({name:T,value:f})));let _=this.dialog.open(jp,O(D({},Ve),{data:{attributes:h}}));_.componentInstance.createNew=this.mapTableHelperService.createNewEntry("Attribute"),_.componentInstance.verify.pipe(Pt(_.afterClosed())).subscribe(T=>{let f=T.attributes||[],u={};f.forEach(m=>{u[m.name]=m.value});let p=O(D({},c),{configurationAnalysis:O(D({},c.configurationAnalysis),{referencedAttributes:u})});this.store.dispatch(Ri({response:p}))})})),{dispatch:!1}),this.initiatePropertyVerification$=R(()=>this.actions$.pipe(P(Ri),M(c=>c.response),N(c=>(this.store.dispatch(wo()),K(this.propertyVerificationService.initiatePropertyVerification({request:{request:{properties:c.configurationAnalysis.properties,componentId:c.configurationAnalysis.componentId,attributes:c.configurationAnalysis.referencedAttributes}},uri:c.requestContext.entity.uri}).pipe(M(d=>nn({response:d})),z(d=>I(ht({error:this.errorHelper.getErrorString(d)}))))))))),this.openPropertyVerificationProgressDialog$=R(()=>this.actions$.pipe(P(wo),it(()=>{let c=this.dialog.open($p,D({},Tl)),d=this.store.select(vr).pipe(ft());c.componentInstance.verificationRequest$=d,d.pipe(Pt(c.afterClosed()),ft(),ut(h=>h.complete)).subscribe(h=>{h.failureReason&&this.store.dispatch(ht({error:h.failureReason})),c.close()}),c.componentInstance.stopVerification.pipe(Vt(1)).subscribe(()=>{this.store.dispatch(Ni())})})),{dispatch:!1}),this.verifyPropertiesSuccess$=R(()=>this.actions$.pipe(P(nn),M(c=>c.response),ut(c=>!c.request.complete),N(()=>I(Ao())))),this.startPollingPropertyVerification$=R(()=>this.actions$.pipe(P(Ao),N(()=>Ie(2e3,Me).pipe(Pt(this.actions$.pipe(P(Ni))))),N(()=>I(xo())))),this.pollPropertyVerification$=R(()=>this.actions$.pipe(P(xo),_t(()=>[this.store.select(Do).pipe(ft()),this.store.select(vr).pipe(ft())]),N(([,c,d])=>K(this.propertyVerificationService.getPropertyVerificationRequest(d.requestId,c.entity.uri).pipe(M(h=>en({response:h})),z(h=>(this.store.dispatch(Ni()),I(ht({error:this.errorHelper.getErrorString(h)}))))))))),this.pollPropertyVerificationSuccess$=R(()=>this.actions$.pipe(P(en),M(c=>c.response),ut(c=>c.request.complete),N(()=>I(Ni())))),this.stopPollingPropertyVerification$=R(()=>this.actions$.pipe(P(Ni),_t(()=>[this.store.select(Do).pipe(ft()),this.store.select(vr).pipe(ft())]),N(([,c,d])=>K(this.propertyVerificationService.deletePropertyVerificationRequest(d.requestId,c.entity.uri)).pipe(M(()=>yr()),z(h=>I(ht({error:this.errorHelper.getErrorString(h)})))))))}static{this.\u0275fac=function(n){return new(n||i)(E(pt),E(et),E(Lt),E(dt),E(Bp),E(hc),E(nl))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac})}}return i})();var zp=(i,e)=>{let t=vt(Rc);return t.set(!0,i.url),e(i).pipe(zs(()=>t.set(!1,i.url)))};var Up=(()=>{class i{constructor(t,n,r){this.actions$=t,this.authService=n,this.errorHelper=r,this.loadLoginConfiguration$=R(()=>this.actions$.pipe(P(Cr),N(()=>K(this.authService.getLoginConfiguration().pipe(M(o=>qe({response:o})),z(o=>I(ht({error:this.errorHelper.getErrorString(o,"Failed to load Login Configuration.")}))))))))}static{this.\u0275fac=function(n){return new(n||i)(E(pt),E(He),E(dt))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac})}}return i})();var qp=(()=>{class i{static{this.API="../nifi-api"}constructor(t){this.httpClient=t}getBannerText(){return this.httpClient.get(`${i.API}/flow/banners`)}static{this.\u0275fac=function(n){return new(n||i)(E(Ht))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Kp=(()=>{class i{constructor(t,n,r){this.actions$=t,this.bannerTextService=n,this.store=r,this.loadBannerText$=R(()=>this.actions$.pipe(P(ir),_t(()=>this.store.select(Yl)),ut(([,o])=>o===null),N(()=>K(this.bannerTextService.getBannerText().pipe(M(o=>nr({response:{bannerText:o.banners}})))))))}static{this.\u0275fac=function(n){return new(n||i)(E(pt),E(qp),E(et))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac})}}return i})();var Gp=localStorage.getItem("disable-animations"),Xr=Gp!==null?JSON.parse(Gp).item:"";Xr!=="true"&&Xr!=="false"&&(Xr=window.matchMedia("(prefers-reduced-motion: reduce)").matches.toString());var Hh={showDelay:2e3,hideDelay:0,touchendHideDelay:1e3},Wp=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=pe({type:i,bootstrap:[Bc]})}static{this.\u0275inj=ue({providers:[Xr==="true"?yu():gu(),{provide:yl,useValue:{appearance:"outline"}},pa(ma([ap,zp,cp]),da({cookieName:"__Secure-Request-Token",headerName:"Request-Token"})),{provide:lc,useValue:Hh},Zl({clipboardOptions:{provide:Xl,useValue:{buttonComponent:gl}}})],imports:[Tn,Lc,hu,Da.forRoot(op),El.forRoot({routerState:1,navigationActionTiming:Cl.PostActivation}),wl.forRoot(Op,sp,lp,mp,Kp,xp,Up,_p,bp,Ap,Pp,Hp,Lp,Vp),$u.instrument({maxAge:25,logOnly:ju.production,autoPause:!0}),xl,Ga,fe,Fp,Sl]})}}return i})();var tT=ke(Xp()),eT=ke(tm()),iT=ke(nm()),nT=ke(Rs()),rT=ke(lm()),oT=ke(pm()),sT=ke(fm()),aT=ke(ym());ha().bootstrapModule(Wp).catch(i=>console.error(i));
